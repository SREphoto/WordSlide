(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();class xe{constructor(){this.audioContext=null,this.enabled=!0;try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch{console.error("Web Audio API not supported")}}setEnabled(e){var r;this.enabled=e,e&&((r=this.audioContext)==null?void 0:r.state)==="suspended"&&this.audioContext.resume()}playTone(e,r,o,s=0,a=.1){if(!this.enabled||!this.audioContext)return;this.audioContext.state==="suspended"&&this.audioContext.resume().catch(u=>console.error("Audio resume failed",u));const l=this.audioContext.createOscillator(),n=this.audioContext.createGain();l.type=r,l.frequency.setValueAtTime(e,this.audioContext.currentTime+s),n.gain.setValueAtTime(a,this.audioContext.currentTime+s),n.gain.exponentialRampToValueAtTime(.001,this.audioContext.currentTime+s+o),l.connect(n),n.connect(this.audioContext.destination),l.start(this.audioContext.currentTime+s),l.stop(this.audioContext.currentTime+s+o)}playClick(){this.playTone(400,"sine",.1,0,.05)}playSelect(){this.playTone(600,"sine",.1,0,.05)}playConnect(){this.playTone(800,"sine",.08,0,.05)}playSuccess(){!this.enabled||!this.audioContext||(this.playTone(523.25,"sine",.1,0,.1),this.playTone(659.25,"sine",.3,.1,.1))}playBonus(){!this.enabled||!this.audioContext||(this.playTone(880,"sine",.1,0,.1),this.playTone(1100,"sine",.2,.1,.1))}playError(){!this.enabled||!this.audioContext||this.playTone(150,"sawtooth",.2,0,.08)}playLevelComplete(){!this.enabled||!this.audioContext||(this.playTone(523.25,"sine",.2,0,.1),this.playTone(659.25,"sine",.2,.15,.1),this.playTone(783.99,"sine",.2,.3,.1),this.playTone(1046.5,"sine",.6,.45,.1))}}class Ue{constructor(){this.words=new Set,this.isLoaded=!1,this.loadDictionary()}async loadDictionary(){try{const e=await fetch("https://raw.githubusercontent.com/first20hours/google-10000-english/master/20k.txt");if(!e.ok)throw new Error("Failed to load dictionary");(await e.text()).split(`
`).forEach(o=>{const s=o.trim().toUpperCase();s.length>=2&&this.words.add(s)}),this.isLoaded=!0,console.log(`Dictionary loaded with ${this.words.size} words.`)}catch(e){console.error("Error loading dictionary:",e),this.addFallbackWords(),this.isLoaded=!0}}addFallbackWords(){["THE","AND","FOR","ARE","BUT","NOT","YOU","ALL","ANY","CAN","HAD","HAS","HIM","HIS","HOW","INK","MAN","NEW","NOW","OLD","ONE","OUT","PUT","RUN","SAY","SHE","SIT","SON","TOO","USE","WAS","WAY","WHO","WHY","WIN","YES","YET","ZOO"].forEach(r=>this.words.add(r))}isValid(e){return this.isLoaded?this.words.has(e.toUpperCase()):!0}get isReady(){return this.isLoaded}}let p=[{id:"tutorial",name:"TUTORIAL",themeColorVar:"--world-tutorial-bg",isGenerated:!1,levels:[{id:"tut-1",worldId:"tutorial",levelInWorld:1,displayName:"Basics",letters:["C","A","T"],targetWords:["CAT","ACT"],unlocked:!0,completed:!1},{id:"tut-2",worldId:"tutorial",levelInWorld:2,displayName:"Warm Up",letters:["D","O","G"],targetWords:["DOG","GOD","GO"],unlocked:!1,completed:!1},{id:"tut-3",worldId:"tutorial",levelInWorld:3,displayName:"Challenge",letters:["P","L","A","Y"],targetWords:["PLAY","PAY","LAP","PAL"],unlocked:!1,completed:!1}]},{id:"kitchen",name:"CULINARY CHAOS",themeColorVar:"--world-culinary-bg",isGenerated:!1,levels:[{id:"kit-1",worldId:"kitchen",levelInWorld:1,displayName:"Breakfast",letters:["E","G","G"],targetWords:["EGG"],unlocked:!1,completed:!1},{id:"kit-2",worldId:"kitchen",levelInWorld:2,displayName:"Utensils",letters:["P","O","T","S"],targetWords:["POTS","POT","TOP","TOPS","STOP"],unlocked:!1,completed:!1},{id:"kit-3",worldId:"kitchen",levelInWorld:3,displayName:"Baking",letters:["P","I","E","S"],targetWords:["PIES","PIE","SIP"],unlocked:!1,completed:!1},{id:"kit-4",worldId:"kitchen",levelInWorld:4,displayName:"Drinks",letters:["T","E","A","S"],targetWords:["TEAS","TEA","SEA","EAT","SET","SAT"],unlocked:!1,completed:!1},{id:"kit-5",worldId:"kitchen",levelInWorld:5,displayName:"Fruits",letters:["P","E","A","R"],targetWords:["PEAR","PEA","EAR","RAP","PAR","APE"],unlocked:!1,completed:!1},{id:"kit-6",worldId:"kitchen",levelInWorld:6,displayName:"Main Course",letters:["M","E","A","T","S"],targetWords:["MEATS","MEAT","TEAM","EATS","SEAT","MATS","TAME"],unlocked:!1,completed:!1},{id:"kit-7",worldId:"kitchen",levelInWorld:7,displayName:"Chef's Special",letters:["B","R","E","A","D"],targetWords:["BREAD","READ","BEAR","DARE","DEAR","BAD","BED","RED","EAR"],unlocked:!1,completed:!1}]},{id:"forest",name:"WHISPERING WOODS",themeColorVar:"--world-timber-bg",isGenerated:!1,levels:[{id:"for-1",worldId:"forest",levelInWorld:1,displayName:"Trees",letters:["E","L","M"],targetWords:["ELM"],unlocked:!1,completed:!1},{id:"for-2",worldId:"forest",levelInWorld:2,displayName:"Animals",letters:["O","W","L","S"],targetWords:["OWLS","OWL","LOW","SLOW"],unlocked:!1,completed:!1},{id:"for-3",worldId:"forest",levelInWorld:3,displayName:"Camping",letters:["T","E","N","T"],targetWords:["TENT","NET","TEN"],unlocked:!1,completed:!1},{id:"for-4",worldId:"forest",levelInWorld:4,displayName:"Hiking",letters:["P","A","T","H"],targetWords:["PATH","HAT","PAT","TAP","APT"],unlocked:!1,completed:!1},{id:"for-5",worldId:"forest",levelInWorld:5,displayName:"Nature",letters:["L","E","A","F"],targetWords:["LEAF","ALE","ELF"],unlocked:!1,completed:!1},{id:"for-6",worldId:"forest",levelInWorld:6,displayName:"Wildlife",letters:["D","E","E","R","S"],targetWords:["DEERS","DEER","REDS","SEED","SEE","RED"],unlocked:!1,completed:!1},{id:"for-7",worldId:"forest",levelInWorld:7,displayName:"The Grove",letters:["F","O","R","E","S","T"],targetWords:["FOREST","REST","SOFT","ROSE","SORE","FORT","TOE","SET","FOR"],unlocked:!1,completed:!1}]},{id:"ocean",name:"DEEP BLUE",themeColorVar:"--world-aqueous-bg",isGenerated:!1,levels:[{id:"oc-1",worldId:"ocean",levelInWorld:1,displayName:"Water",letters:["S","E","A"],targetWords:["SEA"],unlocked:!1,completed:!1},{id:"oc-2",worldId:"ocean",levelInWorld:2,displayName:"Fish",letters:["C","O","D"],targetWords:["COD","DOC"],unlocked:!1,completed:!1},{id:"oc-3",worldId:"ocean",levelInWorld:3,displayName:"Beach",letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"],unlocked:!1,completed:!1},{id:"oc-4",worldId:"ocean",levelInWorld:4,displayName:"Tides",letters:["W","A","V","E"],targetWords:["WAVE","AVE"],unlocked:!1,completed:!1},{id:"oc-5",worldId:"ocean",levelInWorld:5,displayName:"Boats",letters:["S","H","I","P"],targetWords:["SHIP","HIP","SIP","HIS"],unlocked:!1,completed:!1},{id:"oc-6",worldId:"ocean",levelInWorld:6,displayName:"Creatures",letters:["W","H","A","L","E"],targetWords:["WHALE","HEAL","HALE","LAW","AWE"],unlocked:!1,completed:!1},{id:"oc-7",worldId:"ocean",levelInWorld:7,displayName:"The Reef",letters:["S","H","A","R","K","S"],targetWords:["SHARKS","SHARK","RASH","ARK","ASK","HAS"],unlocked:!1,completed:!1}]},{id:"space",name:"COSMIC VOYAGE",themeColorVar:"--world-cosmic-bg",isGenerated:!1,levels:[{id:"sp-1",worldId:"space",levelInWorld:1,displayName:"Sky",letters:["S","U","N"],targetWords:["SUN","US"],unlocked:!1,completed:!1},{id:"sp-2",worldId:"space",levelInWorld:2,displayName:"Night",letters:["S","T","A","R"],targetWords:["STAR","RAT","TAR","ART"],unlocked:!1,completed:!1},{id:"sp-3",worldId:"space",levelInWorld:3,displayName:"Moon",letters:["L","U","N","A"],targetWords:["LUNA"],unlocked:!1,completed:!1},{id:"sp-4",worldId:"space",levelInWorld:4,displayName:"Red Planet",letters:["M","A","R","S"],targetWords:["MARS","ARM","RAM","RAMS","ARMS"],unlocked:!1,completed:!1},{id:"sp-5",worldId:"space",levelInWorld:5,displayName:"Void",letters:["V","O","I","D"],targetWords:["VOID","DO"],unlocked:!1,completed:!1},{id:"sp-6",worldId:"space",levelInWorld:6,displayName:"Orbit",letters:["E","A","R","T","H"],targetWords:["EARTH","HEART","HEAR","HEAT","HATE","RATE","TEAR","EAR","THE","HAT","ART"],unlocked:!1,completed:!1},{id:"sp-7",worldId:"space",levelInWorld:7,displayName:"Galaxy",letters:["P","L","A","N","E","T"],targetWords:["PLANET","PLANE","PLANT","PLATE","LATE","TALE","LANE","LEAN","NEAT","PANT","TAPE","PAT","PAN","PEN","NET","TEN","ANT","TAN","TEA","EAT","APE","LAP","PAL","LET","PET"],unlocked:!1,completed:!1}]}],i=null,h=[],g=[],P=!1,W=[],N=[],C=0;const pe=2,Q=50,ee=25,H={tutorial:"https://images.unsplash.com/photo-1541814120807-6577382d6215?auto=format&fit=crop&w=1200&q=80",kitchen:"https://images.unsplash.com/photo-1556910103-1c02745aae4d?auto=format&fit=crop&w=1200&q=80",forest:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&w=1200&q=80",ocean:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1200&q=80",space:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&w=1200&q=80",desert:"https://images.unsplash.com/photo-1473580044384-7ba9967e16a0?auto=format&fit=crop&w=1200&q=80",arctic:"https://images.unsplash.com/photo-1517783999520-f068d7431a60?auto=format&fit=crop&w=1200&q=80",mountain:"https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=1200&q=80",jungle:"https://images.unsplash.com/photo-1516026672322-bc52d61a55d5?auto=format&fit=crop&w=1200&q=80",city:"https://images.unsplash.com/photo-1514565131-fce0801e5785?auto=format&fit=crop&w=1200&q=80",meadow:"https://images.unsplash.com/photo-1500382017468-9049fed747ef?auto=format&fit=crop&w=1200&q=80",volcano:"https://images.unsplash.com/photo-1462331940025-496dfbfc7564?auto=format&fit=crop&w=1200&q=80",sky:"https://images.unsplash.com/photo-1534067783941-51c9c23ecefd?auto=format&fit=crop&w=1200&q=80",crystal:"https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1200&q=80",cyber:"https://images.unsplash.com/photo-1550745165-9bc0b252726f?auto=format&fit=crop&w=1200&q=80",ruins:"https://images.unsplash.com/photo-1541013369527-dc20399d985a?auto=format&fit=crop&w=1200&q=80",steam:"https://images.unsplash.com/photo-1534011613143-6c84c1f618fc?auto=format&fit=crop&w=1200&q=80",enchanted:"https://images.unsplash.com/photo-1518531933037-91b2f5f229cc?auto=format&fit=crop&w=1200&q=80",ghost:"https://images.unsplash.com/photo-1509248961158-e54f6934749c?auto=format&fit=crop&w=1200&q=80",sakura:"https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=1200&q=80",mars:"https://images.unsplash.com/photo-1614728894747-a83421e2b9c9?auto=format&fit=crop&w=1200&q=80",viking:"https://images.unsplash.com/photo-1533154683836-84ea7a0bc310?auto=format&fit=crop&w=1200&q=80",pirate:"https://images.unsplash.com/photo-1519114056088-b877fe073a5e?auto=format&fit=crop&w=1200&q=80",candy:"https://images.unsplash.com/photo-1533900298318-6b8da08a523e?auto=format&fit=crop&w=1200&q=80",underground:"https://images.unsplash.com/photo-1508197145814-0cc040ca392b?auto=format&fit=crop&w=1200&q=80",safari:"https://images.unsplash.com/photo-1547471080-7cc2032e3dbe?auto=format&fit=crop&w=1200&q=80",circus:"https://images.unsplash.com/photo-1502139214982-d0ad755818d8?auto=format&fit=crop&w=1200&q=80",medieval:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&w=1200&q=80",future:"https://images.unsplash.com/photo-1485827404703-89b55fcc595e?auto=format&fit=crop&w=1200&q=80",library:"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&w=1200&q=80",toybox:"https://images.unsplash.com/photo-1558060370-d644479cb6f7?auto=format&fit=crop&w=1200&q=80",farm:"https://images.unsplash.com/photo-1500937386664-56d1dfef3854?auto=format&fit=crop&w=1200&q=80",bamboo:"https://images.unsplash.com/photo-1516245842810-749e757d5a57?auto=format&fit=crop&w=1200&q=80",station:"https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?auto=format&fit=crop&w=1200&q=80"};let Ne=0,m=100;const me=10;let c={soundEffectsEnabled:!0,musicEnabled:!0,adsRemoved:!1,purchasedThemes:["default"],currentThemeId:"default"};const O=new xe,Ke=new Ue;document.getElementById("app-container");const Ce=document.getElementById("level-selection-screen"),B=document.getElementById("game-container"),Ee=document.getElementById("roadmap-main-content"),Ve=document.getElementById("roadmap-back-button"),$e=document.getElementById("roadmap-settings-button"),qe=document.getElementById("roadmap-achievements-button"),Ye=document.getElementById("roadmap-bonus-badge"),_e=document.getElementById("roadmap-coins-value"),Xe=document.getElementById("roadmap-shop-button"),je=document.getElementById("game-back-button"),ze=document.getElementById("game-settings-button"),Ze=document.getElementById("level-name-display"),F=document.getElementById("word-grid-container"),y=document.getElementById("current-word"),Z=document.getElementById("letter-wheel"),Je=document.getElementById("shuffle-button"),Qe=document.getElementById("hint-button"),et=document.getElementById("reveal-letter-button"),w=document.getElementById("mic-button"),tt=document.getElementById("hint-cost"),st=document.getElementById("reveal-letter-cost"),rt=document.getElementById("game-achievements-button"),ot=document.getElementById("game-bonus-badge"),at=document.getElementById("game-coins-value"),nt=document.getElementById("game-shop-button"),J=document.getElementById("confetti-container"),A=document.getElementById("feedback-popup"),lt=document.getElementById("feedback-message"),E=document.getElementById("feedback-ok-button"),b=document.getElementById("swipe-line-canvas"),S=b.getContext("2d"),M=document.getElementById("bonus-words-modal"),dt=document.getElementById("close-bonus-modal"),fe=document.getElementById("bonus-words-list"),oe=document.getElementById("bonus-words-tip"),it=document.getElementById("bonus-tip-ok-button"),x=document.getElementById("shop-modal"),ct=document.getElementById("close-shop-modal"),U=document.getElementById("shop-tabs"),he=document.getElementById("shop-tab-currency"),Ae=document.getElementById("shop-tab-bundles"),We=document.getElementById("shop-tab-themes"),Le=document.getElementById("shop-tab-special"),ut=document.getElementById("shop-current-coins"),K=document.getElementById("settings-modal"),gt=document.getElementById("close-settings-modal"),ae=document.getElementById("sound-toggle"),ne=document.getElementById("music-toggle"),pt=document.getElementById("reset-progress-button"),mt=document.getElementById("privacy-policy-link"),Et=document.getElementById("acknowledgements-link"),ft=document.getElementById("api-key-input");document.getElementById("save-api-key-button");document.getElementById("api-key-status");let f=null,k=!1;function d(t,e,r=!1,o=0){lt.textContent=t,A.classList.remove("hidden","success","level-complete-popup"),e&&A.classList.add("success"),r&&A.classList.add("level-complete-popup");const s=getComputedStyle(document.documentElement).getPropertyValue(r?"--popup-success-bg":"--popup-button-bg").trim(),a=getComputedStyle(document.documentElement).getPropertyValue("--hint-badge-bg").trim();if(A.style.backgroundColor=e?s||"rgba(76, 175, 80, 0.9)":a||"rgba(244, 67, 54, 0.9)",r){ht();const n=Pe(i);n&&n.unlocked?(E.textContent="Next Level",E.nextAction=()=>be(n)):(E.textContent="Back to Map",E.nextAction=Y)}else E.textContent="OK",E.nextAction=null;const l=A.timeoutId;l&&clearTimeout(l),o>0?A.timeoutId=setTimeout(()=>{A.classList.contains("hidden")||A.classList.add("hidden")},o):E.nextAction=E.nextAction||(()=>A.classList.add("hidden"))}function ht(){J.innerHTML="";for(let t=0;t<50;t++){const e=document.createElement("div");e.classList.add("confetti"),e.style.left=Math.random()*100+"vw",e.style.animationDelay=Math.random()*.5+"s",e.style.backgroundColor=`hsl(${Math.random()*360}, 100%, 70%)`;const r=Math.random()*8+5;e.style.width=r+"px",e.style.height=r+"px",J.appendChild(e)}setTimeout(()=>J.innerHTML="",3500)}function G(t){if(c.soundEffectsEnabled){if("vibrate"in navigator)switch(t){case"light":navigator.vibrate(20);break;case"success":navigator.vibrate([100,50,100]);break;case"error":navigator.vibrate(200);break}switch(t){case"light":O.playClick();break;case"success":O.playSuccess();break;case"error":O.playError();break}}}function Y(){Lt(),Ce.classList.remove("hidden"),B.classList.add("hidden"),j()}function At(){Ce.classList.add("hidden"),B.classList.remove("hidden"),le(),_(),j()}function Wt(t,e){const r=document.createElement("button");r.classList.add("level-gem"),r.setAttribute("aria-label",`${e} - ${t.displayName}${t.completed?" (Completed)":t.unlocked?" (Unlocked)":" (Locked)"}`);const s=document.createElement("span");s.classList.add("material-symbols-outlined","level-gem-icon");const a=document.createElement("span");return a.classList.add("level-gem-number"),a.textContent=String(t.levelInWorld),t.completed?(r.classList.add("completed"),s.textContent="check_circle",r.appendChild(s)):t.unlocked?(r.classList.add("unlocked"),r.appendChild(a),r.addEventListener("click",()=>be(t))):(r.classList.add("locked"),s.textContent="lock",r.appendChild(s),r.disabled=!0),r}function Lt(){Ee.innerHTML="",p.forEach(t=>{const e=document.createElement("div");e.classList.add("world-section"),e.id=`world-${t.id}`;const r=getComputedStyle(document.documentElement).getPropertyValue(`--world-${t.id}-bg`).trim()||"var(--primary)";e.style.setProperty("--world-color",r),H[t.id]&&(e.style.backgroundImage=`linear-gradient(rgba(15, 23, 42, 0.7), rgba(15, 23, 42, 0.7)), url(${H[t.id]})`,e.style.backgroundSize="cover");const o=document.createElement("div");o.classList.add("world-info");const s=document.createElement("h2");s.classList.add("world-name-vertical"),s.textContent=t.name,o.appendChild(s);const a=t.levels.filter(u=>u.completed).length,l=document.createElement("p");l.classList.add("world-progress"),l.textContent=`${a}/${t.levels.length}`,o.appendChild(l),e.appendChild(o);const n=document.createElement("div");n.classList.add("levels-grid"),t.levels.forEach(u=>{const D=Wt(u,t.name);n.appendChild(D)}),e.appendChild(n),Ee.appendChild(e)}),j()}function be(t){i=t,h=[...t.letters],W=[],Ne=0;const e=document.getElementById("app-container");e&&H[t.worldId]&&e.style.setProperty("--bg-image",`url(${H[t.worldId]})`),At(),It()}function It(){i&&(Ze.textContent=`${i.worldId.toUpperCase().replace("GEN-WORLD-","GEN ").replace(/-/g," ")} ${i.levelInWorld}`,le(),_(),X(),T(),R(),y.textContent="",tt.textContent=String(Q),st.textContent=String(ee))}function le(){const t=document.getElementById("letter-input-container");t&&t.offsetParent!==null&&(b.width=t.offsetWidth,b.height=t.offsetHeight)}function _(){if(!B.classList.contains("hidden")){Z.innerHTML="";const t=Z.getBoundingClientRect();if(t.width===0||t.height===0)return;const e=t.width/2*.75,r=t.width/2,o=t.height/2;h.forEach((s,a)=>{const l=a/h.length*2*Math.PI-Math.PI/2,n=document.createElement("button");n.classList.add("letter-button"),n.textContent=s,n.dataset.letter=s,n.dataset.originalIndex=String(a),n.setAttribute("aria-label",`Letter ${s}`),Z.appendChild(n);const u=parseFloat(getComputedStyle(n).width),D=parseFloat(getComputedStyle(n).height),I=r+e*Math.cos(l)-u/2,z=o+e*Math.sin(l)-D/2;n.style.left=`${I}px`,n.style.top=`${z}px`;const ge=b.getBoundingClientRect();n.canvasCenterX=(n.getBoundingClientRect().left+n.getBoundingClientRect().right)/2-ge.left,n.canvasCenterY=(n.getBoundingClientRect().top+n.getBoundingClientRect().bottom)/2-ge.top,n.addEventListener("pointerdown",Fe=>St(Fe,s,a,n))})}}function X(){if(!i)return;F.innerHTML="",[...i.targetWords].sort((e,r)=>e.length!==r.length?e.length-r.length:e.localeCompare(r)).forEach(e=>{const r=document.createElement("div");r.classList.add("word-row"),r.setAttribute("aria-label",`Word to find: ${e.length} letters`);for(let o=0;o<e.length;o++){const s=document.createElement("div");s.classList.add("letter-tile"),W.includes(e)?(s.textContent=e[o],s.classList.add("filled"),s.setAttribute("aria-label",`Letter ${e[o]}, part of found word ${e}`)):(s.classList.add("empty"),s.setAttribute("aria-label",`Empty letter tile, position ${o+1} of ${e.length}`)),r.appendChild(s)}F.appendChild(r)})}function V(){y.textContent=g.map(t=>t.letter).join("")}function T(){const t=String(m);at.textContent=t,_e.textContent=t,ut.textContent=t}function j(){T(),ie(C>0&&!M.classList.contains("hidden")?0:C),de()}function St(t,e,r,o){t.preventDefault(),!(P||k)&&(P=!0,o.classList.add("swiped"),g=[{letter:e,originalIndex:r,element:o,centerX:o.canvasCenterX,centerY:o.canvasCenterY}],V(),te(),document.addEventListener("pointermove",ve),document.addEventListener("pointerup",$),document.addEventListener("pointercancel",$))}function ve(t){if(!P)return;t.preventDefault();const e=document.elementFromPoint(t.clientX,t.clientY);if(e&&e.classList.contains("letter-button")&&!e.classList.contains("swiped")){const r=e.dataset.letter,o=parseInt(e.dataset.originalIndex,10);e.classList.add("swiped"),g.push({letter:r,originalIndex:o,element:e,centerX:e.canvasCenterX,centerY:e.canvasCenterY}),G("light"),O.playConnect(),V(),te()}else if(e&&e.classList.contains("letter-button")&&e.classList.contains("swiped")&&g.length>1&&g[g.length-2].element===e){const r=g.pop();r&&r.element.classList.remove("swiped"),V(),te()}}function $(t){if(!P)return;t.preventDefault(),P=!1,document.removeEventListener("pointermove",ve),document.removeEventListener("pointerup",$),document.removeEventListener("pointercancel",$);const e=g.map(r=>r.letter).join("");De(e),R()}function te(){if(S.clearRect(0,0,b.width,b.height),!(g.length<2)){S.beginPath(),S.moveTo(g[0].centerX,g[0].centerY);for(let t=1;t<g.length;t++)S.lineTo(g[t].centerX,g[t].centerY);S.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--letter-button-swiped-bg")||"rgba(255, 160, 0, 0.7)",S.lineWidth=10,S.lineCap="round",S.lineJoin="round",S.stroke()}}function R(){g.forEach(t=>t.element.classList.remove("swiped")),g=[],V(),S.clearRect(0,0,b.width,b.height)}function se(t,e){const r=[...e];for(const o of t){const s=r.indexOf(o);if(s===-1)return!1;r.splice(s,1)}return!0}function De(t){if(!i)return;const e=t.toUpperCase();if(e.length<(i.letters.length>=3?2:3)&&e.length>0&&i.letters.length>=3&&!(e.length<2&&i.letters.length>=2)){if(e.length<3){d("Word too short (min 3 letters for most puzzles).",!1,!1,1500),v(),R(),y.textContent="";return}}if(e.length===0){R(),y.textContent="";return}if(!se(e,h)){e.length>=(i.letters.length>=3?2:3)&&(d(`"${e}" uses letters not on the wheel.`,!1,!1,1500),v()),R(),y.textContent="";return}if(i.targetWords.includes(e)&&!W.includes(e))W.push(e),Ne+=e.length*10,m+=e.length,d(`Correct! "${e}" added.`,!0),G("success"),X(),T(),L(),i.targetWords.every(o=>W.includes(o))&&(i.completed=!0,Be(i),L(),d("Level Complete! All words found.",!0,!0),O.playLevelComplete());else if(W.includes(e))d(`"${e}" already found.`,!1,!1,1500),v();else if(se(e,h)&&!N.includes(e)&&!i.targetWords.includes(e)&&e.length>=(i.letters.length>=4?3:2)){if(!Ke.isValid(e)){d(`"${e}" is not a valid word.`,!1,!1,1500),v(),R(),y.textContent="";return}N.push(e),m+=pe,T(),de(),ie(C+1),d(`Bonus word: "${e}"! +${pe} coin.`,!0,!1,2e3),G("success"),O.playBonus(),N.length===1&&localStorage.getItem("bonusTipShown")!=="true"&&bt(),L()}else N.includes(e)?(d(`Bonus "${e}" already found.`,!1,!1,1500),v()):e.length>=(i.letters.length>=4?3:2)&&(d(`"${e}" is not a target word.`,!1,!1,1500),v());y.textContent="",R()}function v(){B.classList.add("screen-shake"),G("error"),setTimeout(()=>B.classList.remove("screen-shake"),300)}function Ot(){if(m<me){d("Not enough coins to shuffle!",!1),v();return}m-=me,T(),L(),O.playSelect();for(let t=h.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[h[t],h[e]]=[h[e],h[t]]}R(),_(),d("Letters shuffled!",!0,!1,1e3),G("light")}function Tt(){if(!i)return;if(m<Q){d("Not enough coins for a hint!",!1);return}const t=i.targetWords.filter(s=>!W.includes(s));if(t.length===0){d("No more hints available for this level.",!1,!1,2e3);return}t.sort((s,a)=>s.length-a.length||s.localeCompare(a));const e=t[0];if(!se(e,h)){d(`Cannot provide hint for "${e}" - letters unavailable. (Data issue)`,!1,!1,3e3),console.error(`Hint failed: Word "${e}" from targetWords is not formable with letters: ${h.join(",")}`);return}m-=Q,T(),W.push(e),X(),F.querySelectorAll(".word-row").forEach(s=>{const a=Array.from(s.querySelectorAll(".letter-tile"));if(a.map(l=>l.dataset.letterContent||"").join(""),a.length===e.length){let l=!0;for(let n=0;n<a.length;n++)if(!a[n].classList.contains("empty")&&a[n].textContent!==e[n]){l=!1;break}l&&W.includes(e)&&a.forEach((n,u)=>{n.textContent===e[u]&&(n.classList.add("hinted-reveal"),setTimeout(()=>n.classList.remove("hinted-reveal"),600))})}}),d(`Hint: "${e}" added!`,!0,!1,2500),L(),i.targetWords.every(s=>W.includes(s))&&(i.completed=!0,Be(i),L(),d("Level Complete! All words found.",!0,!0))}function yt(){if(!i)return;if(m<ee){d("Not enough coins to reveal a letter!",!1);return}const t=i.targetWords.filter(a=>!W.includes(a));if(t.length===0){d("All words found, no letters to reveal.",!1,!1,2e3);return}const e=[],r=F.querySelectorAll(".word-row"),o={};if(t.forEach(a=>{o[a.length]||(o[a.length]=[]),o[a.length].push(a)}),r.forEach(a=>{const l=Array.from(a.querySelectorAll(".letter-tile"));o[l.length]&&o[l.length].forEach(u=>{let D=!0;for(let I=0;I<l.length;I++)if(!l[I].classList.contains("empty")&&l[I].textContent!==u[I]){D=!1;break}D&&l.forEach((I,z)=>{I.classList.contains("empty")&&e.push({tile:I,letter:u[z]})})})}),e.length===0){d("No more letters to reveal in the current words.",!1,!1,2e3);return}const s=e[Math.floor(Math.random()*e.length)];m-=ee,T(),L(),s.tile.textContent=s.letter,s.tile.classList.remove("empty"),s.tile.classList.add("filled","hinted-reveal"),setTimeout(()=>s.tile.classList.remove("hinted-reveal"),600),d("A letter has been revealed!",!0,!1,2e3)}function Rt(){const t=window.SpeechRecognition||window.webkitSpeechRecognition;t?(f=new t,f.continuous=!1,f.lang="en-US",f.interimResults=!1,f.maxAlternatives=1,f.onresult=e=>{const r=e.results[e.results.length-1][0].transcript.trim().toUpperCase();y.textContent=r,De(r)},f.onerror=e=>{e.error==="no-speech"||e.error==="audio-capture"||e.error==="not-allowed"?d(`Mic error: ${e.error}. Please try again or check permissions.`,!1):d(`Mic error: ${e.error}`,!1),q()},f.onend=()=>{k&&q()}):(d("Speech recognition not supported in this browser.",!1),w.disabled=!0)}function Nt(){if(!f){d("Speech recognition not initialized.",!1);return}k?q():Ct()}function Ct(){if(!P)try{f.start(),k=!0,w.classList.add("mic-listening"),w.disabled=!0,d("Listening...",!0,!1,2e3)}catch(t){console.error("Error starting speech recognition:",t),q(),d("Mic busy. Try again.",!1)}}function q(){f&&k&&f.stop(),k=!1,w.classList.remove("mic-listening"),w.disabled=!1}function de(){fe.innerHTML="",[...N].sort().forEach(e=>{const r=document.createElement("div");r.classList.add("bonus-word-entry"),r.innerHTML=`<span class="material-symbols-outlined">paid</span> ${e}`,fe.appendChild(r)})}function Ie(){de(),M.classList.remove("hidden"),ie(0)}function Se(){M.classList.add("hidden")}function ie(t){t>0?C=t:C=0,[ot,Ye].forEach(r=>{C>0?(r.textContent=String(C),r.classList.remove("hidden")):r.classList.add("hidden")})}function bt(){localStorage.getItem("bonusTipShown")!=="true"&&oe.classList.remove("hidden")}function vt(){oe.classList.add("hidden"),localStorage.setItem("bonusTipShown","true")}function Pe(t){if(!t)return null;const e=p.find(o=>o.id===t.worldId);if(!e)return null;const r=e.levels.findIndex(o=>o.id===t.id);if(r!==-1&&r<e.levels.length-1)return e.levels[r+1];{const o=p.findIndex(s=>s.id===e.id);if(o!==-1&&o<p.length-1){const s=p[o+1];if(s.levels.length>0)return s.levels[0]}}return null}function Be(t){const e=Pe(t);e&&(e.unlocked=!0)}function L(){const t={coins:m,bonusWordsFound:N,gameRoadmap:p,settings:c};localStorage.setItem("wordFinderDeluxeProgress",JSON.stringify(t))}function we(){const e=[{id:"tutorial",name:"Tutorial",levels:[{letters:["A","T"],targetWords:["AT"]},{letters:["C","A","T"],targetWords:["CAT","ACT"]},{letters:["D","O","G"],targetWords:["DOG","GOD"]},{letters:["S","U","N"],targetWords:["SUN"]},{letters:["P","E","N"],targetWords:["PEN"]}]},{id:"kitchen",name:"Culinary Chaos",levels:[{letters:["E","G","G","S"],targetWords:["EGGS","EGG"]},{letters:["P","A","N","S"],targetWords:["PANS","PAN","NAP","SNAP"]},{letters:["C","O","O","K"],targetWords:["COOK"]},{letters:["F","O","R","K"],targetWords:["FORK"]},{letters:["D","I","S","H"],targetWords:["DISH"]},{letters:["M","E","A","L"],targetWords:["MEAL","MALE"]},{letters:["B","A","K","E"],targetWords:["BAKE"]},{letters:["S","O","U","P"],targetWords:["SOUP"]}]},{id:"forest",name:"Whispering Woods",levels:[{letters:["T","R","E","E"],targetWords:["TREE","TEE"]},{letters:["L","E","A","F"],targetWords:["LEAF","ALE","ELF"]},{letters:["W","O","O","D"],targetWords:["WOOD"]},{letters:["B","I","R","D"],targetWords:["BIRD","RID"]},{letters:["D","E","E","R"],targetWords:["DEER","REED"]},{letters:["B","E","A","R"],targetWords:["BEAR","ARE","BAR"]},{letters:["L","A","K","E"],targetWords:["LAKE"]},{letters:["F","R","O","G"],targetWords:["FROG"]}]},{id:"ocean",name:"Deep Blue",levels:[{letters:["F","I","S","H"],targetWords:["FISH"]},{letters:["W","A","V","E"],targetWords:["WAVE","AVE"]},{letters:["B","O","A","T"],targetWords:["BOAT"]},{letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"]},{letters:["S","H","I","P"],targetWords:["SHIP","HIP","SIP"]},{letters:["S","E","A","L"],targetWords:["SEAL","SEA","ALE"]},{letters:["D","I","V","E"],targetWords:["DIVE"]},{letters:["S","W","I","M"],targetWords:["SWIM"]}]},{id:"space",name:"Cosmic Voyage",levels:[{letters:["S","T","A","R"],targetWords:["STAR","RAT","ART","TAR"]},{letters:["M","O","O","N"],targetWords:["MOON","MOO"]},{letters:["M","A","R","S"],targetWords:["MARS","ARM","RAM"]},{letters:["S","U","N","S"],targetWords:["SUNS","SUN"]},{letters:["V","O","I","D"],targetWords:["VOID"]},{letters:["N","O","V","A"],targetWords:["NOVA"]},{letters:["A","T","O","M"],targetWords:["ATOM"]},{letters:["G","L","O","W"],targetWords:["GLOW","LOW","OWL"]}]},{id:"desert",name:"Desert Heat",levels:[{letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"]},{letters:["D","U","N","E"],targetWords:["DUNE","DUE"]},{letters:["H","E","A","T"],targetWords:["HEAT","HAT","EAT"]},{letters:["C","A","M","E","L"],targetWords:["CAMEL","MEAL","MALE"]},{letters:["O","A","S","I","S"],targetWords:["OASIS"]},{letters:["P","A","L","M"],targetWords:["PALM","MAP","LAP"]},{letters:["D","U","S","T"],targetWords:["DUST"]},{letters:["W","A","N","D"],targetWords:["WAND"]}]},{id:"arctic",name:"Frozen Tundra",levels:[{letters:["I","C","E","S"],targetWords:["ICES","ICE"]},{letters:["S","N","O","W"],targetWords:["SNOW","NOW","OWN","WON"]},{letters:["C","O","L","D"],targetWords:["COLD","OLD","COD"]},{letters:["S","E","A","L"],targetWords:["SEAL","SEA","ALE"]},{letters:["P","O","L","E"],targetWords:["POLE"]},{letters:["B","E","A","R"],targetWords:["BEAR","ARE","BAR"]},{letters:["F","R","O","S","T"],targetWords:["FROST","SOFT","ROTS"]},{letters:["H","A","I","L"],targetWords:["HAIL"]}]},{id:"mountain",name:"Mystic Peaks",levels:[{letters:["P","E","A","K"],targetWords:["PEAK","APE","KEA"]},{letters:["H","I","K","E"],targetWords:["HIKE"]},{letters:["S","N","O","W"],targetWords:["SNOW","SOW","WON"]},{letters:["C","L","I","M","B"],targetWords:["CLIMB","LIMB"]},{letters:["M","O","S","S"],targetWords:["MOSS"]},{letters:["R","O","C","K"],targetWords:["ROCK"]},{letters:["C","O","L","D"],targetWords:["COLD","OLD"]},{letters:["V","I","E","W"],targetWords:["VIEW"]}]},{id:"jungle",name:"Rainforest",levels:[{letters:["A","P","E","S"],targetWords:["APES","APE","SEA"]},{letters:["V","I","N","E"],targetWords:["VINE","VIE"]},{letters:["R","A","I","N"],targetWords:["RAIN","RAN","AIR"]},{letters:["F","R","O","G"],targetWords:["FROG"]},{letters:["T","I","G","E","R"],targetWords:["TIGER","TIER","GRIT"]},{letters:["L","E","A","F"],targetWords:["LEAF","ALE"]},{letters:["W","I","L","D"],targetWords:["WILD"]},{letters:["F","E","L","L"],targetWords:["FELL"]}]},{id:"city",name:"Neon City",levels:[{letters:["C","A","R","S"],targetWords:["CARS","CAR","ARC"]},{letters:["B","I","K","E"],targetWords:["BIKE"]},{letters:["T","A","X","I"],targetWords:["TAXI"]},{letters:["R","O","A","D"],targetWords:["ROAD"]},{letters:["P","A","R","K"],targetWords:["PARK","RAPA"]},{letters:["W","A","L","K"],targetWords:["WALK"]},{letters:["S","T","O","P"],targetWords:["STOP","TOP","POT"]},{letters:["M","E","T","R","O"],targetWords:["METRO","MORE","ROME"]}]},{id:"meadow",name:"Blossom Meadow",levels:[{letters:["B","E","E","S"],targetWords:["BEES","BEE","SEE"]},{letters:["F","L","O","W"],targetWords:["FLOW","LOW","OWL"]},{letters:["L","I","L","Y"],targetWords:["LILY"]},{letters:["P","I","N","K"],targetWords:["PINK"]},{letters:["R","O","S","E"],targetWords:["ROSE","SORE"]},{letters:["L","A","W","N"],targetWords:["LAWN"]},{letters:["W","E","E","D"],targetWords:["WEED"]},{letters:["F","L","U","S","H"],targetWords:["FLUSH"]}]},{id:"volcano",name:"Volcanic Vent",levels:[{letters:["A","S","H"],targetWords:["ASH","HAS"]},{letters:["L","A","V","A"],targetWords:["LAVA"]},{letters:["F","I","R","E"],targetWords:["FIRE","IRE"]},{letters:["H","E","A","T"],targetWords:["HEAT","HAT","EAT"]},{letters:["L","A","V","A","S"],targetWords:["LAVAS","LAVA"]},{letters:["C","O","R","E"],targetWords:["CORE"]},{letters:["R","O","K","S"],targetWords:["ROKS"]},{letters:["F","L","A","M","E"],targetWords:["FLAME","MEAL","MALE","LAME"]}]},{id:"sky",name:"Sky Fortress",levels:[{letters:["A","I","R"],targetWords:["AIR"]},{letters:["B","I","R","D"],targetWords:["BIRD","RID"]},{letters:["W","I","N","D"],targetWords:["WIND","WIN","DIN"]},{letters:["C","L","O","U","D"],targetWords:["CLOUD","LOUD","COLD"]},{letters:["S","T","O","R","M"],targetWords:["STORM","MOST","SORT"]},{letters:["H","I","G","H"],targetWords:["HIGH"]},{letters:["B","L","U","E"],targetWords:["BLUE"]},{letters:["W","I","N","G"],targetWords:["WING"]}]},{id:"crystal",name:"Crystal Caverns",levels:[{letters:["G","E","M","S"],targetWords:["GEMS","GEM"]},{letters:["G","O","L","D"],targetWords:["GOLD","OLD","GOD"]},{letters:["M","I","N","E"],targetWords:["MINE"]},{letters:["O","R","E"],targetWords:["ORE","ROE"]},{letters:["C","A","V","E"],targetWords:["CAVE"]},{letters:["G","L","O","W","S"],targetWords:["GLOWS","GLOW","LOWS","SLOW"]},{letters:["P","R","I","Z","E"],targetWords:["PRIZE"]},{letters:["R","A","R","E"],targetWords:["RARE","REAR","ERA"]},{letters:["R","O","C","K","S"],targetWords:["ROCKS","ROCK","CORK"]}]},{id:"cyber",name:"Cyber City",levels:[{letters:["D","A","T","A"],targetWords:["DATA"]},{letters:["B","I","T","S"],targetWords:["BITS","BIT","ITS"]},{letters:["C","O","D","E"],targetWords:["CODE","DOC","DOE"]},{letters:["H","A","C","K"],targetWords:["HACK"]},{letters:["C","H","I","P"],targetWords:["CHIP","HIP","SIP","PIC"]},{letters:["B","Y","T","E"],targetWords:["BYTE","YEB"]},{letters:["S","C","A","N"],targetWords:["SCAN","CAN","SAN"]},{letters:["U","S","E","R"],targetWords:["USER","SUE","USE"]},{letters:["L","I","N","K"],targetWords:["LINK","NIL","KIN"]},{letters:["W","A","T","C","H"],targetWords:["WATCH","HAT","CAT"]}]},{id:"ruins",name:"Ancient Ruins",levels:[{letters:["O","L","D"],targetWords:["OLD"]},{letters:["D","U","S","T"],targetWords:["DUST"]},{letters:["R","O","C","K"],targetWords:["ROCK"]},{letters:["G","O","L","D"],targetWords:["GOLD","OLD","GOD"]},{letters:["L","O","S","T"],targetWords:["LOST","SLOT","LOT"]},{letters:["P","A","T","H"],targetWords:["PATH","HAT","PAT"]},{letters:["G","A","T","E"],targetWords:["GATE","ATE","TEA"]},{letters:["T","O","M","B"],targetWords:["TOMB"]},{letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"]},{letters:["S","T","O","N","E"],targetWords:["STONE","TONE","NET","TEN"]}]},{id:"steam",name:"Steam Haven",levels:[{letters:["G","E","A","R"],targetWords:["GEAR","ARE","AGE"]},{letters:["C","O","G","S"],targetWords:["COGS","COG"]},{letters:["I","R","O","N"],targetWords:["IRON","NOR","ION"]},{letters:["P","I","P","E"],targetWords:["PIPE"]},{letters:["R","U","S","T"],targetWords:["RUST","RUT"]},{letters:["V","A","L","V","E"],targetWords:["VALVE"]},{letters:["S","T","E","A","M"],targetWords:["STEAM","TEAM","MET","EAT"]},{letters:["B","E","L","T"],targetWords:["BELT","LET","BET"]},{letters:["W","H","E","E","L"],targetWords:["WHEEL","HEL","LEE"]},{letters:["S","M","O","K","E"],targetWords:["SMOKE","SOME"]}]},{id:"enchanted",name:"Enchanted Garden",levels:[{letters:["F","A","E"],targetWords:["FAE"]},{letters:["W","I","S","P"],targetWords:["WISP"]},{letters:["L","U","M","A"],targetWords:["LUMA"]},{letters:["M","A","G","I","C"],targetWords:["MAGIC","MIG","AIM"]},{letters:["P","E","T","A","L"],targetWords:["PETAL","PLATE","PALE","TEAL"]},{letters:["F","L","O","R","A"],targetWords:["FLORA","OAR","FOR"]},{letters:["V","I","N","E"],targetWords:["VINE","VIE"]},{letters:["W","A","N","D"],targetWords:["WAND"]},{letters:["G","L","O","W"],targetWords:["GLOW","LOW","OWL"]},{letters:["M","O","O","N"],targetWords:["MOON","MOO"]}]},{id:"ghost",name:"Ghostly Grotto",levels:[{letters:["B","O","O"],targetWords:["BOO"]},{letters:["F","O","G"],targetWords:["FOG"]},{letters:["D","A","R","K"],targetWords:["DARK","ARK","RAD"]},{letters:["G","H","O","S","T"],targetWords:["GHOST","HOS","GOT"]},{letters:["B","O","N","E"],targetWords:["BONE","ONE","BEN"]},{letters:["S","C","A","R","Y"],targetWords:["SCARY","SAY","RAY","CAR"]},{letters:["M","I","S","T"],targetWords:["MIST","ITS","SIT"]},{letters:["H","A","U","N","T"],targetWords:["HAUNT","AUT","TAN"]},{letters:["C","O","L","D"],targetWords:["COLD","OLD"]},{letters:["N","I","G","H","T"],targetWords:["NIGHT","GIN","HIT","TIN"]}]},{id:"sakura",name:"Sakura Peak",levels:[{letters:["Z","E","N"],targetWords:["ZEN"]},{letters:["S","U","N"],targetWords:["SUN"]},{letters:["M","O","U","N","T"],targetWords:["MOUNT","NUT","OUT","NOT"]},{letters:["P","E","A","K"],targetWords:["PEAK","KEA","APE"]},{letters:["L","E","A","F"],targetWords:["LEAF","ALE","ELF"]},{letters:["T","R","E","E"],targetWords:["TREE","TEE"]},{letters:["C","O","L","D"],targetWords:["COLD","OLD","COD"]},{letters:["V","I","E","W"],targetWords:["VIEW"]},{letters:["R","I","C","E"],targetWords:["RICE","ICE"]},{letters:["S","N","O","W"],targetWords:["SNOW","NOW","OWN","WON"]}]},{id:"mars",name:"Mars Colony",levels:[{letters:["R","E","D"],targetWords:["RED"]},{letters:["M","A","R","S"],targetWords:["MARS","ARM","RAM"]},{letters:["D","U","S","T"],targetWords:["DUST","RUT"]},{letters:["B","A","S","E"],targetWords:["BASE","SEA","ABS"]},{letters:["R","O","V","E","R"],targetWords:["ROVER","OVER","ROE"]},{letters:["R","O","C","K"],targetWords:["ROCK","CORK"]},{letters:["L","I","F","E"],targetWords:["LIFE","LIE","FIL"]},{letters:["V","O","I","D"],targetWords:["VOID"]},{letters:["O","X","Y","G","E","N"],targetWords:["OXYGEN","YEN","ONE","EGO"]},{letters:["S","P","R","I","N","T"],targetWords:["SPRINT","PIN","TIN","SIN"]}]},{id:"viking",name:"Viking Fjord",levels:[{letters:["S","E","A"],targetWords:["SEA"]},{letters:["I","C","E"],targetWords:["ICE"]},{letters:["A","X","E"],targetWords:["AXE"]},{letters:["S","H","I","P"],targetWords:["SHIP","HIP","SIP"]},{letters:["S","N","O","W"],targetWords:["SNOW","NOW","OWN"]},{letters:["F","J","O","R","D"],targetWords:["FJORD","FOR","ROD"]},{letters:["K","I","N","G"],targetWords:["KING","GIN","INK"]},{letters:["H","O","L","D"],targetWords:["HOLD","OLD","LOD"]},{letters:["W","A","R"],targetWords:["WAR","RAW"]},{letters:["N","O","R","S","E"],targetWords:["NORSE","ROSE","ROE","ONE","SON"]}]},{id:"pirate",name:"Pirate Cove",levels:[{letters:["B","A","Y"],targetWords:["BAY"]},{letters:["S","E","A"],targetWords:["SEA","AES"]},{letters:["G","O","L","D"],targetWords:["GOLD","OLD","GOD"]},{letters:["S","H","I","I","P"],targetWords:["SHIP","HIP","SIP"]},{letters:["C","R","E","W"],targetWords:["CREW","ARE","EWE"]},{letters:["M","A","P","S"],targetWords:["MAPS","MAP","ASP","PAM"]},{letters:["I","S","L","E"],targetWords:["ISLE","LIE","LES"]},{letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"]},{letters:["C","A","V","E"],targetWords:["CAVE"]},{letters:["C","O","I","N"],targetWords:["COIN","ION","CON"]}]},{id:"candy",name:"Candy Kingdom",levels:[{letters:["G","U","M"],targetWords:["GUM"]},{letters:["P","O","P"],targetWords:["POP"]},{letters:["S","W","E","E","T"],targetWords:["SWEET","TEE","SET","WET"]},{letters:["L","O","L","L","Y"],targetWords:["LOLLY"]},{letters:["C","A","K","E"],targetWords:["CAKE"]},{letters:["M","I","L","K"],targetWords:["MILK"]},{letters:["P","I","N","K"],targetWords:["PINK"]},{letters:["S","O","F","T"],targetWords:["SOFT"]},{letters:["M","I","N","T"],targetWords:["MINT","TIN","NIT"]},{letters:["S","U","G","A","R"],targetWords:["SUGAR","RAG","GAS","SUE"]}]},{id:"underground",name:"The Deep",levels:[{letters:["D","I","G"],targetWords:["DIG"]},{letters:["D","I","R","T"],targetWords:["DIRT","RID"]},{letters:["M","U","D"],targetWords:["MUD"]},{letters:["C","A","V","E"],targetWords:["CAVE"]},{letters:["S","O","I","L"],targetWords:["SOIL","OIL"]},{letters:["M","I","N","E"],targetWords:["MINE"]},{letters:["R","O","C","K"],targetWords:["ROCK"]},{letters:["D","E","E","P"],targetWords:["DEEP"]},{letters:["W","O","R","M"],targetWords:["WORM"]},{letters:["D","A","R","K"],targetWords:["DARK"]}]},{id:"safari",name:"Wild Safari",levels:[{letters:["L","I","O","N"],targetWords:["LION","NIL","ION"]},{letters:["W","I","L","D"],targetWords:["WILD","LID"]},{letters:["P","L","A","I","N"],targetWords:["PLAIN","PLAN","NAP","PAN","PIN"]},{letters:["Z","E","B","R","A"],targetWords:["ZEBRA","ARE","BAR"]},{letters:["C","A","M","P"],targetWords:["CAMP","MAP","CAP"]},{letters:["B","I","R","D"],targetWords:["BIRD"]},{letters:["T","R","E","E"],targetWords:["TREE"]},{letters:["H","U","N","T"],targetWords:["HUNT"]},{letters:["R","O","A","R"],targetWords:["ROAR"]},{letters:["S","A","V","A","N","A"],targetWords:["SAVANA","VAN","SAN"]}]},{id:"circus",name:"Grand Circus",levels:[{letters:["F","U","N"],targetWords:["FUN"]},{letters:["T","E","N","T"],targetWords:["TENT","TEN","NET"]},{letters:["L","I","O","N"],targetWords:["LION"]},{letters:["B","A","L","L"],targetWords:["BALL","ALL"]},{letters:["S","H","O","W"],targetWords:["SHOW","WHO","SOW"]},{letters:["R","I","N","G"],targetWords:["RING"]},{letters:["H","O","O","P"],targetWords:["HOOP"]},{letters:["A","C","R","O"],targetWords:["ACRO","ARC","CAR"]},{letters:["J","U","M","P"],targetWords:["JUMP"]},{letters:["C","L","O","W","N"],targetWords:["CLOWN","LOW","OWN"]}]},{id:"medieval",name:"Knight's Tale",levels:[{letters:["S","W","O","R","D"],targetWords:["SWORD","WORD","ROD"]},{letters:["K","I","N","G"],targetWords:["KING"]},{letters:["C","A","S","T","L","E"],targetWords:["CASTLE","LAST","SALT","SALE"]},{letters:["F","O","R","T"],targetWords:["FORT"]},{letters:["H","E","R","O"],targetWords:["HERO","ROE"]},{letters:["L","A","N","D"],targetWords:["LAND","AND"]},{letters:["R","U","L","E"],targetWords:["RULE"]},{letters:["N","O","B","L","E"],targetWords:["NOBLE","ONE","BEL"]},{letters:["G","U","A","R","D"],targetWords:["GUARD","RAD","RAG"]},{letters:["K","N","I","G","H","T"],targetWords:["KNIGHT","THIN","NIGHT","TIN","GIN"]}]},{id:"future",name:"Neo Era",levels:[{letters:["T","E","C","H"],targetWords:["TECH"]},{letters:["B","O","T"],targetWords:["BOT"]},{letters:["W","O","R","L","D"],targetWords:["WORLD","ROD","OLD"]},{letters:["C","I","T","Y"],targetWords:["CITY"]},{letters:["S","P","A","C","E"],targetWords:["SPACE","ACE","SEA","APE"]},{letters:["S","T","A","R"],targetWords:["STAR"]},{letters:["G","L","O","W"],targetWords:["GLOW"]},{letters:["B","E","A","M"],targetWords:["BEAM"]},{letters:["V","I","E","W"],targetWords:["VIEW"]},{letters:["C","Y","B","E","R"],targetWords:["CYBER","BYE","BEER"]}]},{id:"library",name:"Ancient Library",levels:[{letters:["B","O","O","K"],targetWords:["BOOK"]},{letters:["R","E","A","D"],targetWords:["READ","ERA","RED"]},{letters:["P","A","P","E","R"],targetWords:["PAPER","APE","PER","ARE"]},{letters:["I","N","K"],targetWords:["INK"]},{letters:["P","E","N"],targetWords:["PEN"]},{letters:["S","H","E","L","F"],targetWords:["SHELF","SELF","SHE"]},{letters:["P","A","G","E"],targetWords:["PAGE","AGE"]},{letters:["T","A","L","E"],targetWords:["TALE","ATE","LET"]},{letters:["K","N","O","W"],targetWords:["KNOW","NOW","OWN"]},{letters:["L","E","A","R","N"],targetWords:["LEARN","NEAR","REAL","EAR","ERA"]}]},{id:"toybox",name:"Block Land",levels:[{letters:["B","L","O","C","K"],targetWords:["BLOCK"]},{letters:["T","O","Y"],targetWords:["TOY"]},{letters:["P","L","A","Y"],targetWords:["PLAY","PAY","LAP"]},{letters:["C","A","R"],targetWords:["CAR"]},{letters:["B","A","B","Y"],targetWords:["BABY","BAY"]},{letters:["D","O","L","L"],targetWords:["DOLL"]},{letters:["K","I","T","E"],targetWords:["KITE"]},{letters:["G","A","M","E"],targetWords:["GAME","AGE","GEM"]},{letters:["B","E","A","R"],targetWords:["BEAR"]},{letters:["F","L","A","G"],targetWords:["FLAG","LAG","GAL"]}]},{id:"farm",name:"Quiet Farm",levels:[{letters:["C","O","W"],targetWords:["COW"]},{letters:["P","I","G"],targetWords:["PIG"]},{letters:["H","E","N"],targetWords:["HEN"]},{letters:["D","O","G"],targetWords:["DOG"]},{letters:["C","A","T"],targetWords:["CAT"]},{letters:["C","O","R","N"],targetWords:["CORN","NOR","CON"]},{letters:["B","A","R","N"],targetWords:["BARN","BAN","RAN"]},{letters:["P","L","O","W"],targetWords:["PLOW","LOW","OWL"]},{letters:["S","E","E","D"],targetWords:["SEED","SEE"]},{letters:["F","I","E","L","D"],targetWords:["FIELD","FILE","DIE","ELD"]}]},{id:"bamboo",name:"Bamboo Forest",levels:[{letters:["Z","E","N"],targetWords:["ZEN"]},{letters:["P","A","N","D","A"],targetWords:["PANDA","AND","NAP","PAN"]},{letters:["L","E","A","F"],targetWords:["LEAF","ALE","ELF"]},{letters:["T","R","E","E"],targetWords:["TREE"]},{letters:["B","A","M","B","O","O"],targetWords:["BAMBOO","BOO","MOB"]},{letters:["G","L","O","W"],targetWords:["GLOW"]},{letters:["M","I","S","T"],targetWords:["MIST"]},{letters:["W","I","L","D"],targetWords:["WILD"]},{letters:["F","E","E","D"],targetWords:["FEED"]},{letters:["S","I","L","E","N","T"],targetWords:["SILENT","LINE","LENT","SENT","TEN"]}]},{id:"station",name:"Star Station",levels:[{letters:["S","T","A","R"],targetWords:["STAR","RAT","ART"]},{letters:["S","H","I","P"],targetWords:["SHIP","HIP","SIP"]},{letters:["M","O","O","N"],targetWords:["MOON","MOO"]},{letters:["V","O","I","D"],targetWords:["VOID"]},{letters:["A","T","O","M"],targetWords:["ATOM"]},{letters:["C","O","M","E","T"],targetWords:["COMET","MET","COT"]},{letters:["S","O","L","A","R"],targetWords:["SOLAR","OAR"]},{letters:["P","L","A","N","E","T"],targetWords:["PLANET","PLANE","PANT","TEN"]},{letters:["O","R","B","I","T"],targetWords:["ORBIT","BIT","ROT"]},{letters:["G","A","L","A","X","Y"],targetWords:["GALAXY","GAY","LAY"]}]}].map(r=>({id:r.id,name:r.name,themeColorVar:`--world-${r.id}-bg`,isGenerated:!1,levels:r.levels.map((o,s)=>({id:`${r.id}-${s+1}`,worldId:r.id,levelInWorld:s+1,displayName:`Level ${s+1}`,letters:o.letters,targetWords:o.targetWords,unlocked:!1,completed:!1}))}));return e.length>0&&e[0].levels.length>0&&(e[0].levels[0].unlocked=!0),e}function ke(){const t=localStorage.getItem("wordFinderDeluxeProgress");let e=we();const r={soundEffectsEnabled:!0,musicEnabled:!0,adsRemoved:!1,purchasedThemes:["default"],currentThemeId:"default"};if(t)try{const o=JSON.parse(t);if(m=o.coins||100,N=o.bonusWordsFound||[],c={...r,...o.settings||{}},o.gameRoadmap&&Array.isArray(o.gameRoadmap)){const s=o.gameRoadmap,a=new Map;s.forEach(l=>l.levels.forEach(n=>a.set(n.id,{unlocked:n.unlocked,completed:n.completed}))),e.forEach(l=>{l.levels.forEach(n=>{const u=a.get(n.id);u&&(n.unlocked=u.unlocked,n.completed=u.completed)})})}p=e}catch{p=e}else p=e,c=r;p.length>0&&p[0].levels.length>0&&(p.some(o=>o.levels.some(s=>s.unlocked))||(p[0].levels[0].unlocked=!0)),j(),He(),ue(c.currentThemeId)}const Dt=[{id:"coins_240",type:"currency",name:"Small Coin Pack",description:"A handful of coins",coins:240,price:.99,priceDisplay:"$0.99",image:"https://api.iconify.design/solar:coins-bold-duotone.svg?color=%23f39c12"},{id:"coins_720",type:"currency",name:"Medium Coin Pack",description:"A good stack of coins",coins:720,price:2.99,priceDisplay:"$2.99",image:"https://api.iconify.design/solar:banknote-2-bold-duotone.svg?color=%23f39c12"},{id:"coins_1340",type:"currency",name:"Large Coin Pack",bonus:"10% Bonus!",coins:1340,price:4.99,priceDisplay:"$4.99",image:"https://api.iconify.design/solar:safe-2-bold-duotone.svg?color=%23f39c12"},{id:"coins_2940",type:"currency",name:"Huge Coin Pack",bonus:"20% Bonus!",coins:2940,price:9.99,priceDisplay:"$9.99",image:"https://api.iconify.design/solar:treasure-chest-bold-duotone.svg?color=%23f39c12"},{id:"bundle_super",type:"bundle",name:"Super Bundle",items:[{name:"Coins",quantity:1340},{name:"Hints",quantity:2},{name:"Shuffles",quantity:2}],price:5.99,priceDisplay:"$5.99",image:"https://api.iconify.design/fluent-emoji-flat:wrapped-gift.svg"},{id:"bundle_mega",type:"bundle",name:"Mega Bundle",items:[{name:"Coins",quantity:2940},{name:"Hints",quantity:5},{name:"Shuffles",quantity:5}],price:12.99,priceDisplay:"$12.99",image:"https://api.iconify.design/fluent-emoji-flat:party-popper.svg"},{id:"remove_ads",type:"special",name:"Remove Ads",description:"Enjoy an ad-free experience!",price:5.99,priceDisplay:"$5.99",image:"https://api.iconify.design/solar:videocamera-record-bold-duotone.svg?color=%23e74c3c&rotate=15deg&flip=horizontal",action:()=>{c.adsRemoved=!0,L(),d("Ads Removed! Enjoy the game.",!0)}},{id:"theme_dark",type:"theme",name:"Midnight Mode",description:"Sleek dark theme",price:1.99,priceDisplay:"$1.99",image:"https://api.iconify.design/solar:moon-bold-duotone.svg?color=%239b59b6",themeId:"dark"},{id:"theme_nature",type:"theme",name:"Forest Vibes",description:"Relaxing green theme",price:1.99,priceDisplay:"$1.99",image:"https://api.iconify.design/solar:leaf-bold-duotone.svg?color=%232ecc71",themeId:"nature"},{id:"theme_ocean",type:"theme",name:"Deep Ocean",description:"Calming blue theme",price:1.99,priceDisplay:"$1.99",image:"https://api.iconify.design/solar:waterdrops-bold-duotone.svg?color=%233498db",themeId:"ocean"}];function ce(){he.innerHTML="",Ae.innerHTML="",We.innerHTML="",Le.innerHTML="";const t=document.createElement("div");t.className="shop-item-grid",he.appendChild(t);const e=document.createElement("div");e.className="shop-item-grid",Ae.appendChild(e);const r=document.createElement("div");r.className="shop-item-grid",Le.appendChild(r);const o=document.createElement("div");o.className="shop-item-grid",We.appendChild(o),Dt.forEach(s=>{const a=document.createElement("div");a.className="shop-item",a.innerHTML=`
            <div class="shop-item-image-container">
                <img src="${s.image}" alt="${s.name}" class="shop-item-image">
            </div>
            <div class="shop-item-details">
                <h4 class="shop-item-name">${s.name}</h4>
                ${s.description?`<p class="shop-item-description">${s.description}</p>`:""}
                ${s.bonus?`<p class="shop-item-bonus">${s.bonus}</p>`:""}
                ${s.items?`<div class="shop-item-bundle-contents">${s.items.map(n=>`<span>${n.quantity} ${n.name}</span>`).join("")}</div>`:""}
            </div>
            <div class="shop-item-action">
                ${s.type==="theme"&&c.purchasedThemes.includes(s.themeId)?c.currentThemeId===s.themeId?'<button class="shop-price-button" disabled>Active</button>':`<button class="shop-price-button apply-theme-btn" data-theme-id="${s.themeId}">Apply</button>`:`<button class="shop-price-button" data-item-id="${s.id}">${s.priceDisplay}</button>`}
            </div>
        `;const l=a.querySelector(".shop-price-button");l.classList.contains("apply-theme-btn")?l.addEventListener("click",()=>{ue(s.themeId),L(),ce()}):l.disabled||l.addEventListener("click",()=>Pt(s)),s.type==="currency"?t.appendChild(a):s.type==="bundle"?e.appendChild(a):s.type==="theme"?o.appendChild(a):s.type==="special"&&r.appendChild(a)})}function Pt(t){t.coins&&(m+=t.coins,d(`${t.coins} coins added!`,!0,!1,2e3)),t.items&&(t.items.forEach(e=>{e.name.toLowerCase()==="coins"&&e.quantity&&(m+=e.quantity)}),d(`${t.name} purchased! Items added.`,!0,!1,2e3)),t.action&&t.action(),t.type==="theme"&&t.themeId&&(c.purchasedThemes.includes(t.themeId)||(c.purchasedThemes.push(t.themeId),d(`${t.name} Unlocked!`,!0),ue(t.themeId))),T(),L(),ce()}function ue(t){c.currentThemeId=t;const e=document.documentElement;t==="default"?(e.style.setProperty("--background-gradient-start","#72c2ff"),e.style.setProperty("--background-gradient-end","#3a7bd5"),e.style.setProperty("--letter-button-bg","#f39c12"),e.style.setProperty("--letter-button-border","#e67e22"),document.body.style.backgroundImage="url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1200&q=80')"):t==="dark"?(e.style.setProperty("--background-gradient-start","#2c3e50"),e.style.setProperty("--background-gradient-end","#000000"),e.style.setProperty("--letter-button-bg","#8e44ad"),e.style.setProperty("--letter-button-border","#5b2c6f"),document.body.style.backgroundImage="url('https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?auto=format&fit=crop&w=1200&q=80')"):t==="nature"?(e.style.setProperty("--background-gradient-start","#2ecc71"),e.style.setProperty("--background-gradient-end","#27ae60"),e.style.setProperty("--letter-button-bg","#d35400"),e.style.setProperty("--letter-button-border","#a04000"),document.body.style.backgroundImage="url('https://images.unsplash.com/photo-1448375240586-dfd8f3793371?auto=format&fit=crop&w=1200&q=80')"):t==="ocean"&&(e.style.setProperty("--background-gradient-start","#3498db"),e.style.setProperty("--background-gradient-end","#2980b9"),e.style.setProperty("--letter-button-bg","#e74c3c"),e.style.setProperty("--letter-button-border","#c0392b"),document.body.style.backgroundImage="url('https://images.unsplash.com/photo-1505118380757-91f5f5632de0?auto=format&fit=crop&w=1200&q=80')")}function Oe(){ce(),T(),x.classList.remove("hidden");const t=U.querySelector(".shop-tab-button");t&&Me(t.dataset.tab||"currency")}function Te(){x.classList.add("hidden")}function Me(t){var e,r;U.querySelectorAll(".shop-tab-button").forEach(o=>o.classList.remove("active")),document.querySelectorAll(".shop-tab-content").forEach(o=>o.classList.remove("active")),(e=U.querySelector(`.shop-tab-button[data-tab="${t}"]`))==null||e.classList.add("active"),(r=document.getElementById(`shop-tab-${t}`))==null||r.classList.add("active")}function ye(){Ge(),K.classList.remove("hidden")}function re(){K.classList.add("hidden")}function Ge(){ae.checked=c.soundEffectsEnabled,ne.checked=c.musicEnabled;const t=localStorage.getItem("geminiApiKey");t&&(ft.value=t)}function He(){Ge(),O.setEnabled(c.soundEffectsEnabled)}function Re(){c.soundEffectsEnabled=ae.checked,c.musicEnabled=ne.checked,O.setEnabled(c.soundEffectsEnabled),console.log("Settings saved:",c),L(),He()}function Bt(){confirm("Are you sure you want to reset all your progress? This cannot be undone!")&&(localStorage.removeItem("wordFinderDeluxeProgress"),m=100,N=[],p=we(),c={soundEffectsEnabled:!0,musicEnabled:!0,adsRemoved:!1,purchasedThemes:["default"],currentThemeId:"default"},C=0,ke(),Y(),re(),d("Progress has been reset.",!0,!1,2500))}function wt(){Je.addEventListener("click",Ot),Qe.addEventListener("click",Tt),et.addEventListener("click",yt),w.addEventListener("click",Nt),je.addEventListener("click",Y),ze.addEventListener("click",ye),rt.addEventListener("click",Ie),nt.addEventListener("click",Oe),Ve.addEventListener("click",()=>{d("Welcome to the Roadmap!",!0,!1,1500)}),$e.addEventListener("click",ye),qe.addEventListener("click",Ie),Xe.addEventListener("click",Oe),E.addEventListener("click",()=>{const t=A.timeoutId;t&&clearTimeout(t),A.classList.add("hidden"),E.nextAction&&(E.nextAction(),E.nextAction=null)}),dt.addEventListener("click",Se),M.addEventListener("click",t=>{t.target===M&&Se()}),it.addEventListener("click",vt),ct.addEventListener("click",Te),x.addEventListener("click",t=>{t.target===x&&Te()}),U.querySelectorAll(".shop-tab-button").forEach(t=>{t.addEventListener("click",e=>Me(e.currentTarget.dataset.tab))}),gt.addEventListener("click",re),K.addEventListener("click",t=>{t.target===K&&re()}),ae.addEventListener("change",Re),ne.addEventListener("change",Re),pt.addEventListener("click",Bt),mt.addEventListener("click",t=>{t.preventDefault(),d("Privacy Policy: To be implemented.",!1,!1,2e3)}),Et.addEventListener("click",t=>{t.preventDefault(),d("Acknowledgements: To be implemented.",!1,!1,2e3)}),window.addEventListener("resize",()=>{B.classList.contains("hidden")||(le(),_(),X())})}function kt(){ke(),Rt(),wt(),Y(),localStorage.getItem("bonusTipShown")==="true"&&oe.classList.add("hidden")}document.addEventListener("DOMContentLoaded",kt);
