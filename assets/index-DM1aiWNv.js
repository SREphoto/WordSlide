(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();class rr{constructor(){this.audioContext=null,this.enabled=!0;try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch{console.error("Web Audio API not supported")}}setEnabled(e){var t;this.enabled=e,e&&((t=this.audioContext)==null?void 0:t.state)==="suspended"&&this.audioContext.resume()}playTone(e,t,s,n=0,o=.1){if(!this.enabled||!this.audioContext)return;this.audioContext.state==="suspended"&&this.audioContext.resume().catch(c=>console.error("Audio resume failed",c));const l=this.audioContext.createOscillator(),i=this.audioContext.createGain();l.type=t,l.frequency.setValueAtTime(e,this.audioContext.currentTime+n),i.gain.setValueAtTime(o,this.audioContext.currentTime+n),i.gain.exponentialRampToValueAtTime(.001,this.audioContext.currentTime+n+s),l.connect(i),i.connect(this.audioContext.destination),l.start(this.audioContext.currentTime+n),l.stop(this.audioContext.currentTime+n+s)}playClick(){this.playTone(400,"sine",.1,0,.05)}playSelect(){this.playTone(600,"sine",.1,0,.05)}playConnect(){this.playTone(800,"sine",.08,0,.05)}playSuccess(){!this.enabled||!this.audioContext||(this.playTone(523.25,"sine",.1,0,.1),this.playTone(659.25,"sine",.3,.1,.1))}playBonus(){!this.enabled||!this.audioContext||(this.playTone(880,"sine",.1,0,.1),this.playTone(1100,"sine",.2,.1,.1))}playError(){!this.enabled||!this.audioContext||this.playTone(150,"sawtooth",.2,0,.08)}playLevelComplete(){!this.enabled||!this.audioContext||(this.playTone(523.25,"sine",.2,0,.1),this.playTone(659.25,"sine",.2,.15,.1),this.playTone(783.99,"sine",.2,.3,.1),this.playTone(1046.5,"sine",.6,.45,.1))}playDiceRoll(){if(!this.enabled||!this.audioContext)return;const e=5;for(let t=0;t<e;t++){const s=t*.06,n=100+Math.random()*200;this.playTone(n,"square",.05,s,.05)}this.playTone(80,"square",.2,e*.06,.1)}}class nr{constructor(){this.words=new Set,this.isLoaded=!1,this.loadDictionary()}async loadDictionary(){try{const e=await fetch("https://raw.githubusercontent.com/first20hours/google-10000-english/master/20k.txt");if(!e.ok)throw new Error("Failed to load dictionary");(await e.text()).split(`
`).forEach(s=>{const n=s.trim().toUpperCase();n.length>=2&&this.words.add(n)}),this.isLoaded=!0,console.log(`Dictionary loaded with ${this.words.size} words.`)}catch(e){console.error("Error loading dictionary:",e),this.addFallbackWords(),this.isLoaded=!0}}addFallbackWords(){["THE","AND","FOR","ARE","BUT","NOT","YOU","ALL","ANY","CAN","HAD","HAS","HIM","HIS","HOW","INK","MAN","NEW","NOW","OLD","ONE","OUT","PUT","RUN","SAY","SHE","SIT","SON","TOO","USE","WAS","WAY","WHO","WHY","WIN","YES","YET","ZOO"].forEach(t=>this.words.add(t))}isValid(e){return this.isLoaded?this.words.has(e.toUpperCase()):!0}get isReady(){return this.isLoaded}getAllWords(){return Array.from(this.words)}}class or{constructor(e){this.validWords=new Set(e.map(t=>t.toUpperCase())),this.state=this.initializeGame()}initializeGame(){const e=Array.from(this.validWords).filter(s=>s.length===5);return{targetWord:e[Math.floor(Math.random()*e.length)],currentRow:0,currentGuess:"",guesses:[],gameOver:!1,won:!1}}addLetter(e){return this.state.gameOver||this.state.currentGuess.length>=5?!1:(this.state.currentGuess+=e.toUpperCase(),!0)}deleteLetter(){return this.state.gameOver||this.state.currentGuess.length===0?!1:(this.state.currentGuess=this.state.currentGuess.slice(0,-1),!0)}submitGuess(){if(this.state.gameOver)return{success:!1,message:"Game is over!"};if(this.state.currentGuess.length!==5)return{success:!1,message:"Word must be 5 letters!"};if(!this.validWords.has(this.state.currentGuess))return{success:!1,message:"Not a valid word!"};const e=this.evaluateGuess(this.state.currentGuess,this.state.targetWord);this.state.guesses.push(this.state.currentGuess);const t=this.state.currentGuess===this.state.targetWord,s=this.state.currentRow>=5&&!t;return(t||s)&&(this.state.gameOver=!0,this.state.won=t),this.state.currentRow++,this.state.currentGuess="",{success:!0,result:e,message:t?"Correct! ðŸŽ‰":s?`Game Over! Word was: ${this.state.targetWord}`:void 0}}evaluateGuess(e,t){const s=[],n=t.split(""),o=e.split(""),l=new Array(5).fill(!1);for(let i=0;i<5;i++)o[i]===n[i]&&(s[i]={letter:o[i],state:"correct"},l[i]=!0);for(let i=0;i<5;i++){if(s[i])continue;const c=n.findIndex((d,S)=>d===o[i]&&!l[S]);c!==-1?(s[i]={letter:o[i],state:"present"},l[c]=!0):s[i]={letter:o[i],state:"absent"}}return s}getState(){return{...this.state}}reset(){this.state=this.initializeGame()}}class lr{constructor(e){this.centerLetter="",this.outerLetters=[],this.allValidWords=new Set,this.foundWords=new Set,this.dictionary=new Set(e.map(t=>t.toUpperCase())),this.initializeGame()}initializeGame(){const e=Array.from(this.dictionary).filter(t=>new Set(t.split("")).size===7&&t.length>=7);if(e.length===0){const t="HONEYED".split("");this.setupLetters(t)}else{const t=e[Math.floor(Math.random()*e.length)],s=Array.from(new Set(t.split("")));this.setupLetters(s)}}setupLetters(e){const t=e.sort(()=>Math.random()-.5);this.centerLetter=t[0],this.outerLetters=t.slice(1),this.allValidWords.clear(),this.dictionary.forEach(s=>{this.isValidForSet(s)&&this.allValidWords.add(s)})}isValidForSet(e){if(e.length<4||!e.includes(this.centerLetter))return!1;const t=new Set([this.centerLetter,...this.outerLetters]);for(const s of e)if(!t.has(s))return!1;return!0}submitWord(e){const t=e.toUpperCase();if(t.length<4)return{success:!1,message:"Too short"};if(!t.includes(this.centerLetter))return{success:!1,message:"Missing center letter"};if(this.foundWords.has(t))return{success:!1,message:"Already found"};if(!this.allValidWords.has(t))return{success:!1,message:"Not in word list"};this.foundWords.add(t);const s=this.calculateWordScore(t);let n="Nice!";return new Set(t.split("")).size===7&&(n="Pangram! ðŸ"),{success:!0,message:n,score:s}}calculateWordScore(e){if(e.length===4)return 1;let t=e.length;return new Set(e.split("")).size===7&&(t+=7),t}getState(){const e=Array.from(this.foundWords).reduce((s,n)=>s+this.calculateWordScore(n),0),t=Array.from(this.allValidWords).reduce((s,n)=>s+this.calculateWordScore(n),0);return{centerLetter:this.centerLetter,outerLetters:this.outerLetters,foundWords:Array.from(this.foundWords).sort(),totalWords:this.allValidWords.size,maxScore:t,currentScore:e,rank:this.getRank(e,t)}}getRank(e,t){const s=e/t;return s===0?"Beginner":s<.05?"Good Start":s<.1?"Moving Up":s<.2?"Good":s<.3?"Solid":s<.4?"Nice":s<.5?"Great":s<.7?"Amazing":s<.9?"Genius":"Queen Bee"}shuffleOuterLetters(){this.outerLetters.sort(()=>Math.random()-.5)}}const Rt=[[{id:"c1",description:"WET WEATHER",words:["RAIN","MIST","DEW","FOG"],level:0},{id:"c2",description:"TYPES OF SHOES",words:["BOOT","PUMP","SNEAKER","MULE"],level:1},{id:"c3",description:"UNITS OF MEASURE",words:["INCH","OUNCE","PINT","FOOT"],level:2},{id:"c4",description:"___ OF THE WORLD",words:["END","TOP","REST","WAY"],level:3}],[{id:"d1",description:"PARTS OF A TREE",words:["ROOT","LEAF","BRANCH","TRUNK"],level:0},{id:"d2",description:"CHESS PIECES",words:["KING","QUEEN","ROOK","BISHOP"],level:1},{id:"d3",description:"CLEANING TOOLS",words:["MOP","BROOM","SPONGE","DUSTER"],level:2},{id:"d4",description:"R-WORDS IN MUSIC",words:["RAP","ROCK","REEL","RAG"],level:3}],[{id:"e1",description:"BREAD TYPES",words:["RYE","SODA","PITA","NAAN"],level:0},{id:"e2",description:"BIRDS",words:["ROBIN","FINCH","SWIFT","JAY"],level:1},{id:"e3",description:"MATHEMATICAL TERMS",words:["MEAN","ROOT","SINE","PLOT"],level:2},{id:"e4",description:"STAR ___",words:["FISH","GAZE","TREK","DUST"],level:3}],[{id:"f1",description:"COFFEE ORDERS",words:["LATTE","MOCHA","DECAF","ICED"],level:0},{id:"f2",description:"KINDS OF METAL",words:["GOLD","IRON","TIN","LEAD"],level:1},{id:"f3",description:"PARTS OF A CAR",words:["HOOD","TIRE","DOOR","VENT"],level:2},{id:"f4",description:"COLLECTIVE NOUNS",words:["PRIDE","HERD","PACK","GANG"],level:3}],[{id:"g1",description:"DESSERTS",words:["CAKE","PIE","TART","FLAN"],level:0},{id:"g2",description:"HALLOWEEN SYMBOLS",words:["BAT","GHOST","WITCH","PUMP"],level:1},{id:"g3",description:"GEOMETRIC SHAPES",words:["CONE","CUBE","LINE","OVAL"],level:2},{id:"g4",description:"ENDS IN -HOUSE",words:["WARE","LIGHT","PLAY","TREE"],level:3}],[{id:"h1",description:"KINDS OF WIND",words:["BREEZE","GALE","GUST","ZEPHYR"],level:0},{id:"h2",description:"MUSICAL INSTRUMENTS",words:["CELLO","HARP","LUTE","OBOE"],level:1},{id:"h3",description:"FLIGHTLESS BIRDS",words:["EMU","KIWI","PENGUIN","RHEA"],level:2},{id:"h4",description:"STARTS WITH 'P'",words:["PLANE","PLATE","PLUM","PLUS"],level:3}],[{id:"i1",description:"MEASUREMENT UNITS",words:["FOOT","MILE","YARD","INCH"],level:0},{id:"i2",description:"COMPUTER COMPONENTS",words:["CHIP","DISK","RAM","CORE"],level:1},{id:"i3",description:"STREAMS OF WATER",words:["BROOK","CREEK","RIVER","RUN"],level:2},{id:"i4",description:"ENDS IN -BELL",words:["BLUE","DOOR","DUMB","FIRE"],level:3}],[{id:"j1",description:"TYPES OF TEA",words:["BLACK","GREEN","HERBAL","WHITE"],level:0},{id:"j2",description:"DANCE STYLES",words:["SALSA","SWING","TANGO","WALTZ"],level:1},{id:"j3",description:"CHESS TERMS",words:["CHECK","MATE","PAWN","STALE"],level:2},{id:"j4",description:"PALINDROMES",words:["KAYAK","LEVEL","RADAR","STATS"],level:3}]];class ir{constructor(){this.grid=[],this.selectedWords=[],this.foundCategories=[],this.mistakesRemaining=4,this.gameOver=!1,this.won=!1;const e=Rt[Math.floor(Math.random()*Rt.length)];this.categories=e,this.initializeGrid()}initializeGrid(){this.grid=this.categories.flatMap(e=>e.words).sort(()=>Math.random()-.5)}toggleWord(e){if(this.gameOver)return!1;const t=this.selectedWords.indexOf(e);if(t>-1)this.selectedWords.splice(t,1);else if(this.selectedWords.length<4)this.selectedWords.push(e);else return!1;return!0}submitSelection(){if(this.selectedWords.length!==4)return{success:!1,message:"Select 4 words"};const e=this.categories.find(t=>this.selectedWords.every(s=>t.words.includes(s)));if(e)return this.foundCategories.push(e),this.grid=this.grid.filter(t=>!this.selectedWords.includes(t)),this.selectedWords=[],this.foundCategories.length===4&&(this.gameOver=!0,this.won=!0),{success:!0,match:e,message:"Perfect!"};{let t=0;return this.categories.forEach(s=>{if(this.foundCategories.includes(s))return;const n=s.words.filter(o=>this.selectedWords.includes(o)).length;n>t&&(t=n)}),this.mistakesRemaining--,this.mistakesRemaining===0&&(this.gameOver=!0),{success:!1,message:t===3?"One away...":"Next time!",isOneAway:t===3}}}getState(){return{grid:this.grid,selectedWords:[...this.selectedWords],foundCategories:[...this.foundCategories],mistakesRemaining:this.mistakesRemaining,gameOver:this.gameOver,won:this.won}}getSolution(){return this.categories}}const Bt=[{theme:"WET WEATHER",gridLetters:[["R","A","I","N","Y","D"],["S","T","O","R","M","E"],["F","O","G","G","Y","W"],["M","I","S","T","Y","C"],["L","O","U","D","S","O"],["P","R","E","C","I","L"],["P","I","T","A","T","D"],["I","O","N","S","U","N"]],words:[{word:"RAINY",cells:[[0,0],[0,1],[0,2],[0,3],[0,4]]},{word:"STORM",cells:[[1,0],[1,1],[1,2],[1,3],[1,4]]},{word:"FOGGY",cells:[[2,0],[2,1],[2,2],[2,3],[2,4]]},{word:"MISTY",cells:[[3,0],[3,1],[3,2],[3,3],[3,4]]},{word:"CLOUDS",cells:[[3,5],[4,5],[4,4],[4,3],[4,2],[4,1]]},{word:"PRECIPITATION",cells:[[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[4,5],[3,5],[2,5],[1,5],[0,5],[6,0],[7,0]],isSpangram:!0}]},{theme:"KITCHEN TOOLS",gridLetters:[["S","P","O","O","N","U"],["L","E","T","A","R","T"],["I","S","G","R","E","E"],["N","I","F","E","K","N"],["S","W","H","I","S","K"],["U","T","E","N","S","I"],["L","P","A","N","B","O"],["W","L","K","E","T","T"]],words:[{word:"SPOON",cells:[[0,0],[0,1],[0,2],[0,3],[0,4]]},{word:"GRATER",cells:[[2,2],[2,3],[2,4],[1,4],[1,3],[1,2]]},{word:"KNIFE",cells:[[3,5],[3,4],[3,3],[3,2],[3,1]]},{word:"WHISK",cells:[[4,1],[4,2],[4,3],[4,4],[4,5]]},{word:"PAN",cells:[[6,2],[6,1],[7,1]]},{word:"UTENSILS",cells:[[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[4,0],[3,0]],isSpangram:!0}]},{theme:"SPACE VOYAGE",gridLetters:[["M","A","R","S","V","E"],["C","O","M","E","T","N"],["O","R","B","I","T","U"],["G","A","L","A","C","S"],["T","I","C","S","T","A"],["R","P","L","U","T","O"],["E","A","R","T","H","A"],["E","N","U","S","M","O"]],words:[{word:"MARS",cells:[[0,0],[0,1],[0,2],[0,3]]},{word:"COMET",cells:[[1,0],[1,1],[1,2],[1,3],[1,4]]},{word:"ORBIT",cells:[[2,0],[2,1],[2,2],[2,3],[2,4]]},{word:"PLUTO",cells:[[5,1],[5,2],[5,3],[5,4],[5,5]]},{word:"EARTH",cells:[[6,0],[6,1],[6,2],[6,3],[6,4]]},{word:"GALACTIC",cells:[[3,0],[3,1],[3,2],[3,3],[3,4],[4,2],[4,1],[4,0]],isSpangram:!0}]},{theme:"FLORAL FANTASY",gridLetters:[["R","O","S","E","S","F"],["T","U","L","I","P","L"],["D","A","I","S","Y","O"],["P","O","P","P","Y","W"],["L","A","V","E","R","E"],["B","L","O","S","S","R"],["O","M","P","E","T","S"],["F","L","O","W","E","R"]],words:[{word:"ROSES",cells:[[0,0],[0,1],[0,2],[0,3],[0,4]]},{word:"TULIP",cells:[[1,0],[1,1],[1,2],[1,3],[1,4]]},{word:"DAISY",cells:[[2,0],[2,1],[2,2],[2,3],[2,4]]},{word:"POPPY",cells:[[3,0],[3,1],[3,2],[3,3],[3,4]]},{word:"FLOWER",cells:[[7,0],[7,1],[7,2],[7,3],[7,4],[7,5]],isSpangram:!0}]},{theme:"ANIMAL KINGDOM",gridLetters:[["L","I","O","N","S","W"],["T","I","G","E","R","I"],["B","E","A","R","S","L"],["W","O","L","V","E","D"],["H","O","R","S","E","L"],["C","A","T","S","D","I"],["D","O","G","S","F","F"],["W","I","L","D","L","I"]],words:[{word:"LIONS",cells:[[0,0],[0,1],[0,2],[0,3],[0,4]]},{word:"TIGER",cells:[[1,0],[1,1],[1,2],[1,3],[1,4]]},{word:"BEARS",cells:[[2,0],[2,1],[2,2],[2,3],[2,4]]},{word:"WILDLIFE",cells:[[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[6,5],[5,5]],isSpangram:!0}]}];class ar{constructor(){this.foundWords=[],this.spangramFound=!1,this.gameOver=!1;const e=Bt[Math.floor(Math.random()*Bt.length)];this.theme=e.theme,this.puzzleWords=e.words,this.grid=e.gridLetters.map((t,s)=>t.map((n,o)=>({letter:n,row:s,col:o,isThemeWord:!1,isSpangram:!1,found:!1})))}checkWord(e){if(this.gameOver)return{success:!1};const t=e.map(([n,o])=>this.grid[n][o].letter).join(""),s=this.puzzleWords.find(n=>n.word===t&&!this.foundWords.includes(t));return s?(this.foundWords.push(s.word),s.cells.forEach(([n,o])=>{this.grid[n][o].found=!0,s.isSpangram?(this.grid[n][o].isSpangram=!0,this.spangramFound=!0):this.grid[n][o].isThemeWord=!0}),this.foundWords.length===this.puzzleWords.length&&(this.gameOver=!0),{success:!0,word:s.word,isSpangram:s.isSpangram}):{success:!1}}getState(){return{grid:this.grid,theme:this.theme,foundWords:[...this.foundWords],spangramFound:this.spangramFound,gameOver:this.gameOver}}}class cr{constructor(e){this.foundWords=[],this.usedLetters=new Set,this.allLetters=new Set,this.currentWord="",this.lastLetter="",this.sides=[["A","B","C"],["D","E","F"],["G","H","I"],["J","K","L"]],this.sides=[["N","I","V"],["E","T","L"],["U","O","Y"],["A","S","G"]],this.sides.forEach(t=>t.forEach(s=>this.allLetters.add(s))),this.dictionary=new Set(e)}addLetter(e){if(e=e.toUpperCase(),!this.allLetters.has(e))return{success:!1,message:"Not in box"};const t=this.sides.findIndex(s=>s.includes(e));if(this.currentWord.length>0){const s=this.currentWord[this.currentWord.length-1],n=this.sides.findIndex(o=>o.includes(s));if(t===n)return{success:!1,message:"Same side"}}else if(this.lastLetter&&e!==this.lastLetter)return{success:!1,message:`Must start with ${this.lastLetter}`};return this.currentWord+=e,{success:!0}}submitWord(){if(this.currentWord.length<3)return{success:!1,message:"Too short"};const e=this.currentWord.toLowerCase();return this.dictionary.has(e)?(this.foundWords.push(this.currentWord),[...this.currentWord].forEach(t=>this.usedLetters.add(t)),this.lastLetter=this.currentWord[this.currentWord.length-1],this.currentWord="",this.usedLetters.size===this.allLetters.size?{success:!0,message:"You used all letters!"}:{success:!0,message:"Nice!"}):{success:!1,message:"Not a word"}}deleteLetter(){this.currentWord.length>0&&(this.currentWord=this.currentWord.slice(0,-1))}getState(){return{sides:this.sides,foundWords:[...this.foundWords],usedLetters:new Set(this.usedLetters),allLetters:new Set(this.allLetters),currentWord:this.currentWord,lastLetter:this.lastLetter,gameOver:this.usedLetters.size===this.allLetters.size}}}class dr{constructor(e="easy"){this.selectedCell=null,this.mistakes=0,this.gameOver=!1,this.won=!1;const{puzzle:t,solution:s}=this.generatePuzzle(e);this.grid=t,this.solution=s,this.initialGrid=t.map(n=>n.map(o=>o!==0))}generatePuzzle(e){const t=[[5,3,4,6,7,8,9,1,2],[6,7,2,1,9,5,3,4,8],[1,9,8,3,4,2,5,6,7],[8,5,9,7,6,1,4,2,3],[4,2,6,8,5,3,7,9,1],[7,1,3,9,2,4,8,5,6],[9,6,1,5,3,7,2,8,4],[2,8,7,4,1,9,6,3,5],[3,4,5,2,8,6,1,7,9]],s=t.map(l=>[...l]),n=e==="easy"?30:e==="medium"?45:55;let o=0;for(;o<n;){const l=Math.floor(Math.random()*9),i=Math.floor(Math.random()*9);s[l][i]!==0&&(s[l][i]=0,o++)}return{puzzle:s,solution:t}}selectCell(e,t){this.selectedCell={r:e,c:t}}setCellValue(e){if(!this.selectedCell||this.gameOver)return{success:!1};const{r:t,c:s}=this.selectedCell;return this.initialGrid[t][s]?{success:!1}:this.solution[t][s]===e?(this.grid[t][s]=e,this.grid.every(o=>o.every(l=>l!==0))?(this.gameOver=!0,this.won=!0,{success:!0,won:!0}):{success:!0}):(this.mistakes++,this.mistakes>=3?(this.gameOver=!0,{success:!1,mistake:!0,gameOver:!0}):{success:!1,mistake:!0})}getState(){return{grid:this.grid.map(e=>[...e]),initialGrid:this.initialGrid.map(e=>[...e]),solution:this.solution,selectedCell:this.selectedCell?{...this.selectedCell}:null,mistakes:this.mistakes,gameOver:this.gameOver,won:this.won}}}class ur{constructor(e=4,t=4){this.selectedTile=null,this.score=0,this.combo=0,this.gameOver=!1,this.grid=Array(e).fill(null).map(()=>Array(t).fill(null).map(()=>this.generateRandomTile()))}generateRandomTile(){const e=["circle","square","triangle","star"],t=["red","blue","green","yellow"];return{shape:e[Math.floor(Math.random()*e.length)],color:t[Math.floor(Math.random()*t.length)],id:Math.random()}}selectTile(e,t){if(this.gameOver||!this.grid[e][t])return{match:!1};if(!this.selectedTile)return this.selectedTile={r:e,c:t},{match:!1};const s=this.grid[this.selectedTile.r][this.selectedTile.c],n=this.grid[e][t];return this.selectedTile.r===e&&this.selectedTile.c===t?(this.selectedTile=null,{match:!1}):s.shape===n.shape||s.color===n.color?(this.grid[this.selectedTile.r][this.selectedTile.c]=this.generateRandomTile(),this.grid[e][t]=this.generateRandomTile(),this.score+=10*(this.combo+1),this.combo++,this.selectedTile=null,{match:!0}):(this.combo=0,this.selectedTile={r:e,c:t},{match:!1})}getState(){return{grid:this.grid.map(e=>[...e]),layers:1,score:this.score,combo:this.combo,selectedTile:this.selectedTile?{...this.selectedTile}:null,gameOver:this.gameOver}}}class hr{constructor(e=4,t=4){this.selectedDie=null,this.moves=0,this.gameOver=!1,this.won=!1,this.grid=Array(e).fill(null).map(()=>Array(t).fill(null).map(()=>({val:Math.floor(Math.random()*6)+1,id:Math.random(),removed:!1})))}selectDie(e,t){if(this.gameOver||!this.grid[e][t]||this.grid[e][t].removed)return{match:!1};if(!this.selectedDie)return this.selectedDie={r:e,c:t},{match:!1};const s=this.grid[this.selectedDie.r][this.selectedDie.c],n=this.grid[e][t];return this.selectedDie.r===e&&this.selectedDie.c===t?(this.selectedDie=null,{match:!1}):s.val+n.val===7?(s.removed=!0,n.removed=!0,this.moves++,this.selectedDie=null,this.grid.every(l=>l.every(i=>!i||i.removed))?(this.gameOver=!0,this.won=!0,{match:!0,won:!0}):{match:!0}):(this.selectedDie={r:e,c:t},{match:!1})}getState(){return{grid:this.grid.map(e=>e.map(t=>t?{...t}:null)),selectedDie:this.selectedDie?{...this.selectedDie}:null,moves:this.moves,gameOver:this.gameOver,won:this.won}}}class mr{constructor(e=4){this.currentPlayerIndex=0,this.pot=0,this.lastRoll=[],this.gameOver=!1,this.winner=null,this.log=[],this.players=[];for(let t=0;t<e;t++)this.players.push({id:t,name:t===0?"You":`Computer ${t}`,chips:3,isComputer:t!==0,isEliminated:!1})}roll(){if(this.gameOver)return{sides:[],message:"Game Over"};const e=this.players[this.currentPlayerIndex],t=Math.min(e.chips,3),s=[],n={1:"L",2:"C",3:"R",4:"DOT",5:"DOT",6:"DOT"};for(let l=0;l<t;l++){const i=Math.floor(Math.random()*6)+1;s.push(n[i])}this.lastRoll=s,this.processRoll(s);const o=`${e.name} rolled: ${s.join(", ")}`;return this.log.unshift(o),this.checkWinCondition(),this.gameOver||this.nextTurn(),{sides:s,message:o}}processRoll(e){const t=this.players[this.currentPlayerIndex],s=(this.currentPlayerIndex+this.players.length-1)%this.players.length,n=(this.currentPlayerIndex+1)%this.players.length;e.forEach(o=>{o==="L"?(t.chips--,this.players[s].chips++):o==="R"?(t.chips--,this.players[n].chips++):o==="C"&&(t.chips--,this.pot++)})}nextTurn(){do this.currentPlayerIndex=(this.currentPlayerIndex+1)%this.players.length;while(this.players[this.currentPlayerIndex].chips===0&&this.countPlayersWithChips()>1)}countPlayersWithChips(){return this.players.filter(e=>e.chips>0).length}checkWinCondition(){const e=this.players.filter(t=>t.chips>0);e.length===1&&this.players.every(t=>t.chips>0||t.chips===0)&&e.length===1&&(this.gameOver=!0,this.winner=e[0],this.winner.chips+=this.pot,this.pot=0,this.log.unshift(`${this.winner.name} wins the game!`))}getState(){return{players:this.players.map(e=>({...e})),currentPlayerIndex:this.currentPlayerIndex,pot:this.pot,lastRoll:[...this.lastRoll],gameOver:this.gameOver,winner:this.winner?{...this.winner}:null,log:[...this.log].slice(0,10)}}}class gr{constructor(){this.totalScore=0,this.turnScore=0,this.remainingDiceCount=6,this.lastRoll=[],this.gameOver=!1,this.farkled=!1}roll(){if(this.gameOver)return{dice:[],farkle:!1};const e=[];for(let s=0;s<this.remainingDiceCount;s++)e.push(Math.floor(Math.random()*6)+1);return this.lastRoll=e,this.calculatePotentialScore(e).score===0?(this.farkle(),{dice:e,farkle:!0}):(this.farkled=!1,{dice:e,farkle:!1})}farkle(){this.turnScore=0,this.remainingDiceCount=6,this.farkled=!0}holdDice(e){const t=e.map(n=>this.lastRoll[n]),s=this.calculatePotentialScore(t);return s.score>0&&s.usedAll?(this.turnScore+=s.score,this.remainingDiceCount-=t.length,this.remainingDiceCount===0&&(this.remainingDiceCount=6),{score:s.score,valid:!0}):{score:0,valid:!1}}stop(){this.totalScore+=this.turnScore;const e=this.turnScore;return this.turnScore=0,this.remainingDiceCount=6,this.totalScore>=1e4&&(this.gameOver=!0),e}calculatePotentialScore(e){const t={};e.forEach(l=>t[l]=(t[l]||0)+1);let s=0,n=0;if(Object.keys(t).length===6)return{score:1500,usedAll:!0};if(Object.values(t).filter(l=>l===2).length===3)return{score:750,usedAll:!0};for(let l=1;l<=6;l++){const i=t[l]||0;i>=3?(l===1?s+=1e3*Math.pow(2,i-3):s+=l*100*Math.pow(2,i-3),n+=i):(l===1&&(s+=i*100,n+=i),l===5&&(s+=i*50,n+=i))}return{score:s,usedAll:n===e.length}}getState(){return{totalScore:this.totalScore,turnScore:this.turnScore,heldDice:[],remainingDiceCount:this.remainingDiceCount,lastRoll:this.lastRoll,canStop:this.turnScore>=300||this.totalScore>0&&this.turnScore>0,gameOver:this.gameOver,farkled:this.farkled}}}class fr{constructor(){this.keptDice=[],this.currentRoll=[],this.roundStartKeptCount=0,this.gameOver=!1,this.message="Roll to start!"}reset(){this.keptDice=[],this.currentRoll=[],this.roundStartKeptCount=0,this.gameOver=!1,this.message="Roll to start!"}roll(){if(this.gameOver)return{success:!1,message:"Game Over"};if(this.currentRoll.length>0&&this.keptDice.length===this.roundStartKeptCount)return{success:!1,message:"You must keep at least one die!"};if(this.keptDice.length===5)return this.gameOver=!0,{success:!0,message:"Game Finished!"};this.roundStartKeptCount=this.keptDice.length;const e=5-this.keptDice.length,t=[];for(let s=0;s<e;s++)t.push(Math.floor(Math.random()*6)+1);return this.currentRoll=t,this.message="Select dice to keep (Threes are 0!)",{success:!0}}keepDie(e){if(e<0||e>=this.currentRoll.length)return!1;const t=this.currentRoll.splice(e,1)[0];return this.keptDice.push(t),this.keptDice.length===5&&(this.gameOver=!0,this.currentRoll=[],this.message=`Game Over! Score: ${this.calculateScore()}`),!0}calculateScore(){return this.keptDice.reduce((e,t)=>e+(t===3?0:t),0)}getState(){return{keptDice:[...this.keptDice],currentRoll:[...this.currentRoll],totalScore:this.calculateScore(),gameOver:this.gameOver,canRoll:!this.gameOver,message:this.message}}}const pr=["hearts","diamonds","clubs","spades"],Er=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];class Lr{constructor(){this.tableau=[[],[],[],[],[],[],[]],this.foundations=[[],[],[],[]],this.stock=[],this.waste=[],this.gameOver=!1,this.won=!1,this.initializeGame()}initializeGame(){const e=[];pr.forEach(t=>{Er.forEach((s,n)=>{e.push({suit:t,value:s,color:t==="hearts"||t==="diamonds"?"red":"black",rank:n+1,faceUp:!1,id:`${t}-${s}`})})});for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}for(let t=0;t<7;t++)for(let s=t;s<7;s++){const n=e.pop();t===s&&(n.faceUp=!0),this.tableau[s].push(n)}this.stock=e}draw(){if(this.stock.length===0)this.stock=this.waste.reverse().map(e=>({...e,faceUp:!1})),this.waste=[];else{const e=this.stock.pop();e.faceUp=!0,this.waste.push(e)}}getState(){return{tableau:this.tableau.map(e=>[...e]),foundations:this.foundations.map(e=>[...e]),stock:[...this.stock],waste:[...this.waste],gameOver:this.gameOver,won:this.won}}}class Sr{constructor(){this.dice=[],this.score=0,this.gameOver=!1,this.message="Roll to start!",this.rollCount=0,this.numDice=6}reset(){this.dice=[],this.score=0,this.gameOver=!1,this.message="Roll to start!",this.rollCount=0,this.numDice=6}roll(){if(!this.gameOver){this.dice=[];for(let e=0;e<this.numDice;e++)this.dice.push(Math.floor(Math.random()*6)+1);this.rollCount++,this.canMakeSeven(this.dice)?this.message="Select combinations adding to 7":(this.calculateFinalScore(),this.gameOver=!0,this.message=`No more 7s possible! Final Score: ${this.score}`)}}removeDice(e){if(this.gameOver)return{success:!1,message:"Game Over"};const s=e.map(n=>this.dice[n]).reduce((n,o)=>n+o,0);if(s===7){const n=this.dice.filter((o,l)=>!e.includes(l));return this.dice=n,this.numDice=this.dice.length,this.dice.length===0?(this.gameOver=!0,this.score=0,this.message="Cleared all dice! Score: 0 (Perfect!)"):this.canMakeSeven(this.dice)?this.message="Select more 7s or remove these and roll?":(this.calculateFinalScore(),this.gameOver=!0,this.message=`No more 7s possible! Final Score: ${this.score}`),{success:!0}}else return{success:!1,message:`Sum is ${s}, must be 7!`}}calculateFinalScore(){this.score=this.dice.reduce((e,t)=>e+t,0)}canMakeSeven(e){const t=e.length;for(let s=1;s<1<<t;s++){let n=0;for(let o=0;o<t;o++)s>>o&1&&(n+=e[o]);if(n===7)return!0}return!1}getState(){return{dice:[...this.dice],selectedIndices:[],score:this.score,gameOver:this.gameOver,rollCount:this.rollCount,message:this.message}}}class yr{constructor(){this.dice=[],this.held=[],this.rollsLeft=3,this.scoreCard={},this.turnOver=!1,this.reset()}reset(){this.dice=[0,0,0,0,0],this.held=[!1,!1,!1,!1,!1],this.rollsLeft=3,this.scoreCard={},this.turnOver=!1}roll(){if(this.turnOver)return{dice:this.dice,rollsLeft:this.rollsLeft};if(this.rollsLeft<=0)return{dice:this.dice,rollsLeft:this.rollsLeft};for(let e=0;e<this.dice.length;e++)this.held[e]||(this.dice[e]=Math.floor(Math.random()*6)+1);return this.rollsLeft--,this.rollsLeft===0&&(this.turnOver=!0),{dice:this.dice.slice(),rollsLeft:this.rollsLeft}}toggleHold(e){e<0||e>=this.held.length||this.turnOver||(this.held[e]=!this.held[e])}score(e){if(this.scoreCard[e]!==void 0)return null;const t=this.calculateCategoryPoints(e);return this.scoreCard[e]=t,this.turnOver=!0,t}calculateCategoryPoints(e){const t=new Array(7).fill(0);for(const s of this.dice)t[s]++;switch(e){case"ones":return t[1]*1;case"twos":return t[2]*2;case"threes":return t[3]*3;case"fours":return t[4]*4;case"fives":return t[5]*5;case"sixes":return t[6]*6;case"threeOfKind":return t.some(s=>s>=3)?this.dice.reduce((s,n)=>s+n,0):0;case"fourOfKind":return t.some(s=>s>=4)?this.dice.reduce((s,n)=>s+n,0):0;case"fullHouse":return t.includes(3)&&t.includes(2)?25:0;case"smallStraight":return t[1]&&t[2]&&t[3]&&t[4]||t[2]&&t[3]&&t[4]&&t[5]||t[3]&&t[4]&&t[5]&&t[6]?30:0;case"largeStraight":return t[1]&&t[2]&&t[3]&&t[4]&&t[5]||t[2]&&t[3]&&t[4]&&t[5]&&t[6]?40:0;case"yahtzee":return t.some(s=>s===5)?50:0;case"chance":return this.dice.reduce((s,n)=>s+n,0);default:return 0}}getState(){return{dice:this.dice.slice(),held:this.held.slice(),rollsLeft:this.rollsLeft,scoreCard:{...this.scoreCard},turnOver:this.turnOver}}}class Ir{constructor(){this.playerDice=[],this.computerDice=[],this.currentBid=null,this.playerTurn=!0,this.gameOver=!1,this.message="",this.reset()}reset(){this.playerDice=this.rollDiceSet(),this.computerDice=this.rollDiceSet(),this.currentBid=null,this.playerTurn=!0,this.gameOver=!1,this.message="Your turn â€“ place a bid."}rollDiceSet(){const e=[];for(let t=0;t<5;t++)e.push(Math.floor(Math.random()*6)+1);return e}playerBid(e){return!this.playerTurn||this.gameOver?!1:this.isValidBid(e)?(this.currentBid=e,this.message=`You bid ${e.count} x ${e.face}. Computer's turn.`,this.playerTurn=!1,!0):!1}playerCallLiar(){if(!this.playerTurn||this.gameOver)return null;const e=this.resolveLiarCall();return this.gameOver=!0,e}computerTurn(){if(this.playerTurn||this.gameOver)return;if(!this.currentBid){const n={count:1,face:Math.floor(Math.random()*6)+1};this.currentBid=n,this.message=`Computer bids ${n.count} x ${n.face}. Your turn.`,this.playerTurn=!0;return}const{count:e,face:t}=this.currentBid,s=this.computerDice.filter(n=>n===t).length+1;if(e<s){const n={count:e+1,face:t};this.currentBid=n,this.message=`Computer raises to ${n.count} x ${n.face}. Your turn.`,this.playerTurn=!0}else{const n=this.resolveLiarCall();this.gameOver=!0,this.message=n.result}}isValidBid(e){return e.count<1||e.count>10||e.face<1||e.face>6?!1:!this.currentBid||e.count>this.currentBid.count||e.count===this.currentBid.count&&e.face>this.currentBid.face}resolveLiarCall(){if(!this.currentBid)return{result:"No bid to challenge.",playerWon:!1};const e=this.playerDice.filter(l=>l===this.currentBid.face).length+this.computerDice.filter(l=>l===this.currentBid.face).length,s=e<this.currentBid.count?this.playerTurn:!this.playerTurn,n=s?"You":"Computer",o=`Bid was ${this.currentBid.count} x ${this.currentBid.face}. Actual count: ${e}.`;return{result:`${n} win! ${o}`,playerWon:s}}getState(){return{playerDice:this.playerDice.slice(),computerDice:this.computerDice.slice(),currentBid:this.currentBid?{...this.currentBid}:null,playerTurn:this.playerTurn,gameOver:this.gameOver,message:this.message}}}class Wr{constructor(){this.dice=[],this.kept=[],this.rollsLeft=3,this.finalScore=0,this.gameOver=!1,this.message="Roll to start!",this.reset()}reset(){this.dice=[0,0,0,0,0],this.kept=[!1,!1,!1,!1,!1],this.rollsLeft=3,this.finalScore=0,this.gameOver=!1,this.message="Roll to start!"}roll(){if(this.gameOver)return{dice:this.dice,rollsLeft:this.rollsLeft,message:this.message};for(let e=0;e<this.dice.length;e++)this.kept[e]||(this.dice[e]=Math.floor(Math.random()*6)+1);return this.rollsLeft--,this.rollsLeft===0?(this.gameOver=!0,this.finalScore=this.dice.reduce((e,t)=>e+t,0),this.message=`Game over! Score: ${this.finalScore}`):this.message="Roll again or keep dice.",{dice:this.dice.slice(),rollsLeft:this.rollsLeft,message:this.message}}toggleKeep(e){e<0||e>=this.kept.length||this.gameOver||(this.kept[e]=!this.kept[e])}getState(){return{dice:this.dice.slice(),kept:this.kept.slice(),rollsLeft:this.rollsLeft,finalScore:this.finalScore,gameOver:this.gameOver,message:this.message}}}class vr{constructor(){this.dice=[],this.locked=[],this.rollsLeft=3,this.finalScore=0,this.gameOver=!1,this.message="Roll to start!",this.reset()}reset(){this.dice=[0,0,0,0,0],this.locked=[!1,!1,!1,!1,!1],this.rollsLeft=3,this.finalScore=0,this.gameOver=!1,this.message="Roll to start!"}roll(){if(this.gameOver)return{dice:this.dice,rollsLeft:this.rollsLeft,message:this.message};for(let e=0;e<this.dice.length;e++)this.locked[e]||(this.dice[e]=Math.floor(Math.random()*6)+1);return this.rollsLeft--,this.rollsLeft===0?(this.gameOver=!0,this.finalScore=this.dice.reduce((e,t)=>e+t,0),this.message=`Game over! Score: ${this.finalScore}`):this.message="Roll again or lock dice.",{dice:this.dice.slice(),rollsLeft:this.rollsLeft,message:this.message}}toggleLock(e){e<0||e>=this.locked.length||this.gameOver||(this.locked[e]=!this.locked[e])}getState(){return{dice:this.dice.slice(),locked:this.locked.slice(),rollsLeft:this.rollsLeft,finalScore:this.finalScore,gameOver:this.gameOver,message:this.message}}}let E=[],m=null,T=[],I=[],Ee=!1,D=[],Y=[],V=0;const kt=2,nt=50,ot=25,Me={tutorial:"https://images.unsplash.com/photo-1541814120807-6577382d6215?auto=format&fit=crop&w=1200&q=80",kitchen:"https://images.unsplash.com/photo-1556910103-1c02745aae4d?auto=format&fit=crop&w=1200&q=80",forest:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&w=1200&q=80",ocean:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1200&q=80",space:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&w=1200&q=80",desert:"https://images.unsplash.com/photo-1473580044384-7ba9967e16a0?auto=format&fit=crop&w=1200&q=80",arctic:"https://images.unsplash.com/photo-1517783999520-f068d7431a60?auto=format&fit=crop&w=1200&q=80",mountain:"https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=1200&q=80",jungle:"https://images.unsplash.com/photo-1516026672322-bc52d61a55d5?auto=format&fit=crop&w=1200&q=80",city:"https://images.unsplash.com/photo-1514565131-fce0801e5785?auto=format&fit=crop&w=1200&q=80",meadow:"https://images.unsplash.com/photo-1500382017468-9049fed747ef?auto=format&fit=crop&w=1200&q=80",volcano:"https://images.unsplash.com/photo-1462331940025-496dfbfc7564?auto=format&fit=crop&w=1200&q=80",sky:"https://images.unsplash.com/photo-1534067783941-51c9c23ecefd?auto=format&fit=crop&w=1200&q=80",crystal:"https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1200&q=80",cyber:"https://images.unsplash.com/photo-1550745165-9bc0b252726f?auto=format&fit=crop&w=1200&q=80",ruins:"https://images.unsplash.com/photo-1541013369527-dc20399d985a?auto=format&fit=crop&w=1200&q=80",steam:"https://images.unsplash.com/photo-1534011613143-6c84c1f618fc?auto=format&fit=crop&w=1200&q=80",enchanted:"https://images.unsplash.com/photo-1518531933037-91b2f5f229cc?auto=format&fit=crop&w=1200&q=80",ghost:"https://images.unsplash.com/photo-1509248961158-e54f6934749c?auto=format&fit=crop&w=1200&q=80",sakura:"https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=1200&q=80",mars:"https://images.unsplash.com/photo-1614728894747-a83421e2b9c9?auto=format&fit=crop&w=1200&q=80",viking:"https://images.unsplash.com/photo-1533154683836-84ea7a0bc310?auto=format&fit=crop&w=1200&q=80",pirate:"https://images.unsplash.com/photo-1519114056088-b877fe073a5e?auto=format&fit=crop&w=1200&q=80",candy:"https://images.unsplash.com/photo-1533900298318-6b8da08a523e?auto=format&fit=crop&w=1200&q=80",underground:"https://images.unsplash.com/photo-1508197145814-0cc040ca392b?auto=format&fit=crop&w=1200&q=80",safari:"https://images.unsplash.com/photo-1547471080-7cc2032e3dbe?auto=format&fit=crop&w=1200&q=80",circus:"https://images.unsplash.com/photo-1502139214982-d0ad755818d8?auto=format&fit=crop&w=1200&q=80",medieval:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&w=1200&q=80",future:"https://images.unsplash.com/photo-1485827404703-89b55fcc595e?auto=format&fit=crop&w=1200&q=80",library:"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&w=1200&q=80",toybox:"https://images.unsplash.com/photo-1558060370-d644479cb6f7?auto=format&fit=crop&w=1200&q=80",farm:"https://images.unsplash.com/photo-1500937386664-56d1dfef3854?auto=format&fit=crop&w=1200&q=80",bamboo:"https://images.unsplash.com/photo-1516245842810-749e757d5a57?auto=format&fit=crop&w=1200&q=80",station:"https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?auto=format&fit=crop&w=1200&q=80"};let gs=0,u=100;const Dt=10;let p={soundEffectsEnabled:!0,musicEnabled:!0,adsRemoved:!1,purchasedThemes:["default"],currentThemeId:"default"};const g=new rr,ze=new nr;document.getElementById("app-container");const fs=document.getElementById("main-menu-screen"),pe=document.getElementById("level-selection-screen"),qe=document.getElementById("game-container");document.getElementById("main-settings-button");const Or=document.querySelectorAll(".game-mode-card");document.getElementById("main-menu-coins");const wt=document.getElementById("roadmap-main-content"),Ar=document.getElementById("roadmap-back-button"),Cr=document.getElementById("roadmap-settings-button"),Tr=document.getElementById("roadmap-achievements-button"),br=document.getElementById("roadmap-bonus-badge"),Rr=document.getElementById("roadmap-coins-value"),Br=document.getElementById("roadmap-shop-button"),mt=document.getElementById("wordle-container"),kr=document.getElementById("wordle-back-button"),Dr=document.getElementById("wordle-settings-button"),lt=document.getElementById("wordle-grid"),ps=document.getElementById("wordle-keyboard"),wr=document.getElementById("current-attempt"),de=document.getElementById("wordle-message");document.getElementById("wordle-coins-value");const gt=document.getElementById("spelling-bee-container"),Nr=document.getElementById("bee-back-button"),Mr=document.getElementById("bee-found-toggle"),Pr=document.getElementById("bee-rank"),Gr=document.getElementById("bee-score"),xr=document.getElementById("bee-score-fill"),Oe=document.getElementById("bee-message"),it=document.getElementById("bee-current-word"),at=document.getElementById("bee-cell-center"),ct=[document.getElementById("bee-cell-0"),document.getElementById("bee-cell-1"),document.getElementById("bee-cell-2"),document.getElementById("bee-cell-3"),document.getElementById("bee-cell-4"),document.getElementById("bee-cell-5")],Hr=document.getElementById("bee-delete"),Fr=document.getElementById("bee-shuffle"),Ur=document.getElementById("bee-enter"),Es=document.getElementById("bee-found-words-modal"),Kr=document.getElementById("bee-close-found"),$r=document.getElementById("bee-found-count"),Nt=document.getElementById("bee-found-list");document.getElementById("bee-coins-value");const Ls=document.getElementById("connections-container"),zr=document.getElementById("conn-back-button"),qr=document.getElementById("conn-help-button"),Mt=document.getElementById("conn-found-area"),Pt=document.getElementById("conn-grid"),Yr=document.getElementById("mistake-markers"),Vr=document.getElementById("conn-shuffle"),jr=document.getElementById("conn-deselect"),Ss=document.getElementById("conn-submit");document.getElementById("conn-coins-value");const ys=document.getElementById("strands-container"),_r=document.getElementById("strands-back-button"),Xr=document.getElementById("strands-theme-text"),Pe=document.getElementById("strands-grid"),Gt=document.getElementById("strands-current-guess"),xt=document.getElementById("strands-found-list"),Zr=document.getElementById("strands-hint-button");document.getElementById("strands-coins-value");const Is=document.getElementById("letter-boxed-container"),Jr=document.getElementById("boxed-back-button"),Ht=document.getElementById("boxed-found-list"),Qr=document.getElementById("boxed-current-word");document.getElementById("boxed-message");const en=document.getElementById("boxed-delete"),tn=document.getElementById("boxed-enter"),sn=document.getElementById("boxed-help-button");document.getElementById("boxed-coins-value");const rn=[document.getElementById("boxed-side-0"),document.getElementById("boxed-side-1"),document.getElementById("boxed-side-2"),document.getElementById("boxed-side-3")],Ws=document.getElementById("sudoku-container"),nn=document.getElementById("sudoku-back-button"),on=document.getElementById("sudoku-mistakes");document.getElementById("sudoku-difficulty");const Ft=document.getElementById("sudoku-grid"),ln=document.getElementById("sudoku-numpad"),an=document.getElementById("sudoku-settings-button");document.getElementById("sudoku-coins-value");const vs=document.getElementById("tiles-container"),cn=document.getElementById("tiles-back-button"),dn=document.getElementById("tiles-score"),un=document.getElementById("tiles-combo"),Ut=document.getElementById("tiles-grid");document.getElementById("tiles-coins-value");const Os=document.getElementById("pips-container"),hn=document.getElementById("pips-back-button"),mn=document.getElementById("pips-moves"),Kt=document.getElementById("pips-grid");document.getElementById("pips-coins-value");const As=document.getElementById("lrc-container"),gn=document.getElementById("lrc-back-button"),fn=document.getElementById("lrc-pot"),$t=document.getElementById("lrc-players"),ue=document.getElementById("lrc-dice-area"),pn=document.getElementById("lrc-log"),be=document.getElementById("lrc-roll-button"),Cs=document.getElementById("farkle-container"),En=document.getElementById("farkle-back-button"),Ln=document.getElementById("farkle-total"),Sn=document.getElementById("farkle-turn"),Qe=document.getElementById("farkle-message"),he=document.getElementById("farkle-dice-grid"),Re=document.getElementById("farkle-roll-button"),Be=document.getElementById("farkle-stop-button"),Ts=document.getElementById("sevens-container"),yn=document.getElementById("sevens-back-button"),In=document.getElementById("sevens-message"),me=document.getElementById("sevens-dice-grid"),ke=document.getElementById("sevens-roll-button"),ie=document.getElementById("sevens-confirm-button"),bs=document.getElementById("threes-container"),Wn=document.getElementById("threes-back-button"),vn=document.getElementById("threes-total"),le=document.getElementById("threes-kept"),ge=document.getElementById("threes-roll"),De=document.getElementById("threes-roll-button"),Rs=document.getElementById("solitaire-container"),On=document.getElementById("soli-back-button");document.getElementById("soli-stock");document.getElementById("soli-waste");document.getElementById("soli-tableau");document.getElementById("soli-f0"),document.getElementById("soli-f1"),document.getElementById("soli-f2"),document.getElementById("soli-f3");const An=document.getElementById("game-back-button"),Cn=document.getElementById("game-settings-button"),Tn=document.getElementById("level-name-display"),Ge=document.getElementById("word-grid-container"),te=document.getElementById("current-word"),et=document.getElementById("letter-wheel"),bn=document.getElementById("shuffle-button"),Rn=document.getElementById("hint-button"),Bn=document.getElementById("reveal-letter-button"),kn=document.getElementById("mic-button"),Dn=document.getElementById("hint-cost"),wn=document.getElementById("reveal-letter-cost"),Nn=document.getElementById("game-achievements-button"),Mn=document.getElementById("game-bonus-badge"),Pn=document.getElementById("game-coins-value"),Gn=document.getElementById("game-shop-button"),Ae=document.getElementById("confetti-container");let k=null,R=null,se="",y=null,b=null,x=[],Le=!1,H=null,K=null,re=null,ne=null,j=null,f=null,_=null,O=null,zt=null,P=[];const B=document.getElementById("feedback-popup"),xn=document.getElementById("feedback-message"),C=document.getElementById("feedback-ok-button"),J=document.getElementById("swipe-line-canvas"),M=J.getContext("2d"),ae=document.getElementById("bonus-words-modal"),Hn=document.getElementById("close-bonus-modal"),qt=document.getElementById("bonus-words-list"),ft=document.getElementById("bonus-words-tip"),Fn=document.getElementById("bonus-tip-ok-button"),Se=document.getElementById("shop-modal"),Un=document.getElementById("close-shop-modal"),xe=document.getElementById("shop-tabs"),Yt=document.getElementById("shop-tab-currency"),Vt=document.getElementById("shop-tab-bundles"),jt=document.getElementById("shop-tab-themes"),_t=document.getElementById("shop-tab-special"),Kn=document.getElementById("shop-current-coins"),X=document.getElementById("settings-modal"),$n=document.getElementById("close-settings-modal"),pt=document.getElementById("sound-toggle"),Et=document.getElementById("music-toggle"),zn=document.getElementById("reset-progress-button");function F(r,e,t,s="standard"){const n=document.createElement("div");n.className=`die-scene ${e?"selected":""}`,n.onclick=t;const o=document.createElement("div");o.className="cube-die";for(let c=1;c<=6;c++){const d=document.createElement("div");if(d.className=`die-face face-${c}`,s==="lrc")c===1?d.textContent="L":c===2?d.textContent="R":c===3?d.textContent="C":d.innerHTML='<div class="dot"></div>';else for(let S=0;S<c;S++){const oe=document.createElement("div");oe.className="dot",d.appendChild(oe)}o.appendChild(d)}let l=0,i=0;if(typeof r=="number")switch(r){case 1:l=0,i=0;break;case 2:l=0,i=-90;break;case 3:l=0,i=-180;break;case 4:l=0,i=90;break;case 5:l=-90,i=0;break;case 6:l=90,i=0;break}else r==="L"?(l=0,i=0):r==="R"?(l=0,i=-90):r==="C"&&(l=0,i=-180);return o.style.transform=`rotateX(${l}deg) rotateY(${i}deg)`,n.appendChild(o),n}let qn=!1;function ce(r){if(p!=null&&p.soundEffectsEnabled){if("vibrate"in navigator)switch(r){case"light":navigator.vibrate(20);break;case"success":navigator.vibrate([100,50,100]);break;case"error":navigator.vibrate(200);break}switch(r){case"light":g.playClick();break;case"success":g.playSuccess();break;case"error":g.playError();break}}}function U(){document.body.classList.add("shake"),setTimeout(()=>document.body.classList.remove("shake"),400)}function Yn(){if(Ae){Ae.innerHTML="";for(let r=0;r<50;r++){const e=document.createElement("div");e.classList.add("confetti"),e.style.left=Math.random()*100+"vw",e.style.animationDelay=Math.random()*.5+"s",e.style.backgroundColor=`hsl(${Math.random()*360}, 100%, 70%)`;const t=Math.random()*8+5;e.style.width=t+"px",e.style.height=t+"px",Ae.appendChild(e)}setTimeout(()=>Ae.innerHTML="",3500)}}function a(r,e,t=!1,s=0){xn.textContent=r,B.classList.remove("hidden","success","level-complete-popup"),e&&B.classList.add("success"),t&&B.classList.add("level-complete-popup");const n=getComputedStyle(document.documentElement).getPropertyValue(t?"--popup-success-bg":"--popup-button-bg").trim(),o=getComputedStyle(document.documentElement).getPropertyValue("--hint-badge-bg").trim();if(B.style.backgroundColor=e?n||"rgba(76, 175, 80, 0.9)":o||"rgba(244, 67, 54, 0.9)",t){Yn();const i=_s(m);i&&i.unlocked?(C.textContent="Next Level",C.nextAction=()=>Vs(i)):(C.textContent="Back to Map",C.nextAction=He)}else C.textContent="OK",C.nextAction=null;const l=B.timeoutId;l&&clearTimeout(l),s>0?B.timeoutId=setTimeout(()=>{B.classList.contains("hidden")||B.classList.add("hidden")},s):C.nextAction=C.nextAction||(()=>B.classList.add("hidden"))}function L(){[fs,pe,qe,mt,gt,Ls,ys,Is,Ws,vs,Os,As,Cs,bs,Rs,Ts,Fs,$s,zs,qs].forEach(r=>r==null?void 0:r.classList.add("hidden"))}function h(){L(),fs.classList.remove("hidden"),W()}function He(){console.log("showRoadmapScreen called"),Zo(),L(),pe.classList.remove("hidden"),W()}function Vn(){L(),qe.classList.remove("hidden"),vt(),Ze(),W()}function jn(){if(L(),mt.classList.remove("hidden"),!k){const r=ze.getAllWords();k=new or(r)}we(),W()}function we(){if(!k)return;lt.innerHTML="";const r=k.getState();for(let e=0;e<6;e++){const t=document.createElement("div");t.classList.add("wordle-row"),t.dataset.row=e.toString();for(let s=0;s<5;s++){const n=document.createElement("div");if(n.classList.add("wordle-tile"),n.dataset.col=s.toString(),e<r.guesses.length){const o=r.guesses[e];n.textContent=o[s],n.classList.add("filled")}else e===r.currentRow&&s<r.currentGuess.length&&(n.textContent=r.currentGuess[s],n.classList.add("filled"));t.appendChild(n)}lt.appendChild(t)}wr.textContent=(r.currentRow+1).toString(),_n()}function _n(){if(!k)return;const r=k.getState(),e=new Map;r.guesses.forEach((t,s)=>{const n=Xn(t,r.targetWord),o=lt.querySelector(`[data-row="${s}"]`);o&&n.forEach((l,i)=>{const c=o.querySelector(`[data-col="${i}"]`);if(c){c.classList.add(l.state);const d=e.get(l.letter);(!d||l.state==="correct"||l.state==="present"&&d!=="correct")&&e.set(l.letter,l.state)}})}),Zn(e)}function Xn(r,e){const t=[],s=e.split(""),n=r.split(""),o=new Array(5).fill(!1);for(let l=0;l<5;l++)n[l]===s[l]&&(t[l]={letter:n[l],state:"correct"},o[l]=!0);for(let l=0;l<5;l++){if(t[l])continue;const i=s.findIndex((c,d)=>c===n[l]&&!o[d]);i!==-1?(t[l]={letter:n[l],state:"present"},o[i]=!0):t[l]={letter:n[l],state:"absent"}}return t}function Zn(r){ps.querySelectorAll(".key-button:not(.key-special)").forEach(t=>{const s=t.getAttribute("data-key");if(s&&r.has(s)){const n=r.get(s);t.classList.remove("correct","present","absent"),t.classList.add(n)}})}function Ce(r){if(!k)return;const e=k.getState();if(!e.gameOver)if(r==="ENTER"){const t=k.submitGuess();t.success?(we(),t.message&&(de.textContent=t.message,e.won?(u+=50,W(),setTimeout(()=>a("You won! +50 coins",!0,!1,3e3),1e3)):e.gameOver&&setTimeout(()=>a(t.message,!1,!1,3e3),1e3))):(de.textContent=t.message||"",setTimeout(()=>{de.textContent=""},2e3))}else r==="BACKSPACE"?(k.deleteLetter(),we(),de.textContent=""):(k.addLetter(r),we(),de.textContent="")}function Jn(){L(),gt.classList.remove("hidden"),R||(R=new lr(ze.getAllWords())),Bs(),Ye()}function Bs(){if(!R)return;const r=R.getState();at.querySelector(".cell-content").textContent=r.centerLetter,r.outerLetters.forEach((e,t)=>{ct[t]&&(ct[t].querySelector(".cell-content").textContent=e)})}function Ye(){if(!R)return;const r=R.getState();Pr.textContent=r.rank,Gr.textContent=r.currentScore.toString();const e=r.currentScore/r.maxScore*100;xr.style.width=`${Math.min(100,e)}%`,it.textContent=se,W()}function tt(r){se+=r.toUpperCase(),Ye()}function Xt(){se=se.slice(0,-1),Ye()}function Zt(){R&&(R.shuffleOuterLetters(),Bs())}function Jt(){var e;if(!R||se.length===0)return;const r=R.submitWord(se);r.success?(Oe.textContent=r.message,se="",r.score&&(u+=r.score),Ye(),setTimeout(()=>{Oe.textContent=""},2e3)):(Oe.textContent=r.message,(e=it.parentElement)==null||e.classList.add("shake"),setTimeout(()=>{var t;Oe.textContent="",(t=it.parentElement)==null||t.classList.remove("shake")},2e3))}function Qn(){if(!R)return;const r=R.getState();$r.textContent=r.foundWords.length.toString(),Nt.innerHTML="",r.foundWords.forEach(e=>{const t=document.createElement("div");t.classList.add("found-word"),t.textContent=e,Nt.appendChild(t)}),Es.classList.remove("hidden")}function eo(){Es.classList.add("hidden")}function to(){L(),Ls.classList.remove("hidden"),y||(y=new ir),We(),ye()}function We(){if(!y)return;const r=y.getState();Mt.innerHTML="",r.foundCategories.forEach(e=>{const t=document.createElement("div");t.className=`conn-category-row level-${e.level}`,t.innerHTML=`
            <div class="conn-category-title">${e.description}</div>
            <div class="conn-category-words">${e.words.join(", ")}</div>
        `,Mt.appendChild(t)}),Pt.innerHTML="",r.grid.forEach(e=>{const t=document.createElement("div");t.className="conn-item",r.selectedWords.includes(e)&&t.classList.add("selected"),t.textContent=e,t.onclick=()=>so(e),Pt.appendChild(t)})}function ye(){if(!y)return;const r=y.getState();Yr.querySelectorAll(".dot").forEach((t,s)=>{s<r.mistakesRemaining?t.classList.add("filled"):t.classList.remove("filled")}),Ss.disabled=r.selectedWords.length!==4}function so(r){y&&(y.toggleWord(r),We(),ye())}function ro(){if(!y)return;y.getState().grid.sort(()=>Math.random()-.5),We()}function no(){if(!y)return;const r=y.getState();r.selectedWords=[],We(),ye()}function oo(){if(!y)return;const r=y.submitSelection();if(r.success){a(r.message,!0),u+=25,We(),ye();const e=y.getState();e.gameOver&&e.won&&setTimeout(()=>{a("Game Complete! ðŸŽ‰",!0),u+=100,h()},1e3)}else a(r.message,!1),ye(),y.getState().gameOver&&setTimeout(()=>{y.getSolution(),a("Game Over!",!1),h()},2e3)}function lo(){L(),ys.classList.remove("hidden"),b||(b=new ar),ks(),Ds()}function ks(){if(!b)return;const r=b.getState();Pe.innerHTML="",r.grid.forEach((e,t)=>{e.forEach((s,n)=>{const o=document.createElement("div");o.className="strands-cell",o.textContent=s.letter,o.dataset.row=t.toString(),o.dataset.col=n.toString(),s.found&&o.classList.add(s.isSpangram?"found-spangram":"found-theme"),o.onmousedown=()=>Qt(t,n),o.onmouseenter=()=>ws(t,n),o.ontouchstart=l=>{l.preventDefault(),Qt(t,n)},Pe.appendChild(o)})}),Xr.textContent=r.theme}function Ds(){if(!b)return;const r=b.getState();xt.innerHTML="",r.foundWords.forEach(e=>{const t=document.createElement("div");t.className="strands-word-chip",e.length>8&&t.classList.add("spangram"),t.textContent=e,xt.appendChild(t)}),W()}function Qt(r,e){b&&(Le=!0,x=[{r,c:e}],Lt())}function ws(r,e){if(!Le||!b)return;const t=x[x.length-1];Math.abs(t.r-r)<=1&&Math.abs(t.c-e)<=1&&(x.some(s=>s.r===r&&s.c===e)||(x.push({r,c:e}),Lt()))}function Ns(){if(!Le||!b)return;Le=!1;const r=b.checkWord(x.map(e=>[e.r,e.c]));r.success&&(a(r.isSpangram?"SPANGRAM! âœ¨":"Found!",!0),u+=r.isSpangram?100:25,ks(),Ds(),b.getState().gameOver&&setTimeout(()=>{a("Strands Complete! ðŸ§¶",!0),h()},1e3)),x=[],Lt()}function Lt(){Pe.querySelectorAll(".strands-cell").forEach(e=>e.classList.remove("selected")),x.forEach(e=>{const t=Pe.querySelector(`[data-row="${e.r}"][data-col="${e.c}"]`);t==null||t.classList.add("selected")}),x.length>0?Gt.textContent=x.map(e=>b.getState().grid[e.r][e.c].letter).join(""):Gt.textContent=""}document.addEventListener("mouseup",Ns);document.addEventListener("touchend",Ns);document.addEventListener("touchmove",r=>{if(!Le)return;const e=r.touches[0],t=document.elementFromPoint(e.clientX,e.clientY);if(t!=null&&t.classList.contains("strands-cell")){const s=parseInt(t.dataset.row),n=parseInt(t.dataset.col);ws(s,n)}},{passive:!1});function io(){L(),Is.classList.remove("hidden"),H||(H=new cr(ze.getAllWords())),Ve()}function Ve(){if(!H)return;const r=H.getState();r.sides.forEach((e,t)=>{const s=rn[t],n=s.querySelectorAll(".boxed-letter"),o=s.querySelectorAll(".boxed-dot");e.forEach((l,i)=>{n[i].textContent=l;const c=o[i];r.usedLetters.has(l)?c.classList.add("used"):c.classList.remove("used"),c.onclick=()=>{const d=H.addLetter(l);d.success?Ve():a(d.message,!1)}})}),Qr.textContent=r.currentWord,Ht.innerHTML="",r.foundWords.forEach(e=>{const t=document.createElement("div");t.className="strands-word-chip",t.textContent=e,Ht.appendChild(t)}),W()}function ao(){if(!H)return;const r=H.submitWord();r.success?(a(r.message,!0),u+=50,Ve(),H.getState().gameOver&&setTimeout(()=>{a("Box Completed! ðŸ“¦",!0),h()},1e3)):a(r.message,!1)}function co(){H&&(H.deleteLetter(),Ve())}function uo(){L(),Ws.classList.remove("hidden"),K||(K=new dr("easy")),St(),Ms()}function St(){if(!K)return;const r=K.getState();Ft.innerHTML="",r.grid.forEach((e,t)=>{e.forEach((s,n)=>{var l,i;const o=document.createElement("div");o.className="sudoku-cell",r.initialGrid[t][n]&&o.classList.add("initial"),((l=r.selectedCell)==null?void 0:l.r)===t&&((i=r.selectedCell)==null?void 0:i.c)===n&&o.classList.add("selected"),o.textContent=s!==0?s.toString():"",o.onclick=()=>{K.selectCell(t,n),St()},Ft.appendChild(o)})})}function Ms(){if(!K)return;const r=K.getState();on.textContent=`Mistakes: ${r.mistakes}/3`,W()}function ho(r){if(!K)return;const e=K.setCellValue(r);e.success?(St(),e.won&&(a("Sudoku Solved! ðŸ§©",!0),u+=200,setTimeout(h,2e3))):e.mistake&&(a("Mistake!",!1),Ms(),e.gameOver&&(a("Game Over! Too many mistakes.",!1),setTimeout(h,2e3)))}function mo(){L(),vs.classList.remove("hidden"),re||(re=new ur),Ps(),Gs()}function Ps(){if(!re)return;const r=re.getState();Ut.innerHTML="",r.grid.forEach((e,t)=>{e.forEach((s,n)=>{var l,i;const o=document.createElement("div");if(o.className="tile-cell",((l=r.selectedTile)==null?void 0:l.r)===t&&((i=r.selectedTile)==null?void 0:i.c)===n&&o.classList.add("selected"),s){const c=document.createElement("div");c.className=`tile-icon ${s.shape} ${s.color}`,o.appendChild(c)}o.onclick=()=>{re.selectTile(t,n).match&&(a("Match! âœ¨",!0),u+=5),Ps(),Gs()},Ut.appendChild(o)})})}function Gs(){if(!re)return;const r=re.getState();dn.textContent=r.score.toString(),un.textContent=`Combo: ${r.combo}x`,W()}function go(){L(),Os.classList.remove("hidden"),ne||(ne=new hr),xs(),Hs()}function xs(){if(!ne)return;const r=ne.getState();Kt.innerHTML="",r.grid.forEach((e,t)=>{e.forEach((s,n)=>{var l,i;const o=document.createElement("div");if(o.className="die-cell",s!=null&&s.removed&&o.classList.add("removed"),((l=r.selectedDie)==null?void 0:l.r)===t&&((i=r.selectedDie)==null?void 0:i.c)===n&&o.classList.add("selected"),s&&!s.removed){o.classList.add(`val-${s.val}`);const c=document.createElement("div");c.className="die-face";for(let d=0;d<9;d++){const S=document.createElement("div");S.className="die-pip",c.appendChild(S)}o.appendChild(c)}o.onclick=()=>{const c=ne.selectDie(t,n);c.match&&(a("7! ðŸŽ²",!0),u+=10,c.won&&(a("All Cleared! ðŸ†",!0),u+=100,setTimeout(h,2e3))),xs(),Hs()},Kt.appendChild(o)})})}function Hs(){if(!ne)return;const r=ne.getState();mn.textContent=`Moves: ${r.moves}`,W()}function fo(){L(),As.classList.remove("hidden"),j||(j=new mr),yt(!0)}function yt(r=!1){if(!j)return;const e=j.getState();fn.textContent=`Pot: ${e.pot}`,$t.innerHTML="",e.players.forEach((t,s)=>{var o;const n=document.createElement("div");n.className=`lrc-player-card ${e.currentPlayerIndex===s?"active":""}`,t.isEliminated&&t.chips===0&&n.classList.add("eliminated"),n.innerHTML=`
            <div class="player-name">${t.name}</div>
            <div class="player-chips">
                <span class="material-symbols-outlined">circle</span>
                <span>${t.chips}</span>
            </div>
            ${((o=e.winner)==null?void 0:o.id)===t.id?'<div class="winner-badge">WINNER</div>':""}
        `,$t.appendChild(n)}),ue.classList.contains("dice-container-3d")||(ue.className="dice-container-3d",ue.style.display="flex"),ue.innerHTML="",e.lastRoll.length>0&&e.lastRoll.forEach(t=>{const s=F(t,!1,()=>{},"lrc");if(r){const n=s.querySelector(".cube-die");n&&(n.classList.add("rolling"),g.playDiceRoll(),setTimeout(()=>{n.classList.remove("rolling")},500+Math.random()*300))}ue.appendChild(s)}),pn.innerHTML=e.log.map(t=>`<div class="log-entry">${t}</div>`).join(""),be.disabled=e.gameOver,be.textContent=e.gameOver?"Game Over":"Roll Dice",be.onclick=()=>{j&&(j.roll(),yt(!0))}}let A=[];function es(){L(),Cs.classList.remove("hidden"),f=new gr,A=[],f.roll(),G(!0)}function G(r=!1){if(!f)return;const e=f.getState();Ln.textContent=e.totalScore.toString(),Sn.textContent=e.turnScore.toString();let t="";if(A.length>0){const s=f.calculatePotentialScore(A.map(n=>e.lastRoll[n]));s.score>0&&(t=` (+${s.score})`)}Qe.textContent=e.farkled?"FARKLE! ðŸ’¥":e.turnScore>0||A.length>0?`Turn: ${e.turnScore}${t}`:"Select scoring dice!",e.farkled?Qe.classList.add("farkle-alert"):Qe.classList.remove("farkle-alert"),he.classList.contains("dice-container-3d")||(he.className="dice-container-3d",he.style.display="flex"),he.innerHTML="",e.lastRoll.forEach((s,n)=>{const o=F(s,A.includes(n),()=>po(n));if(r){const l=o.querySelector(".cube-die");l&&(l.classList.add("rolling"),g.playDiceRoll(),setTimeout(()=>l.classList.remove("rolling"),500+Math.random()*300))}he.appendChild(o)}),Re.disabled=e.gameOver||e.farkled,Be.disabled=e.gameOver||e.farkled||e.turnScore===0&&A.length===0,A.length>0?(Re.textContent="Bank & Roll",Be.textContent="Bank & Stop"):(Re.textContent="Roll",Be.textContent="Stop & Score")}function po(r){if(!f)return;const e=f;e.selectedIndices||(e.selectedIndices=[]),e.selectedIndices.includes(r)?e.selectedIndices=e.selectedIndices.filter(s=>s!==r):e.selectedIndices.push(r),f.holdDice([r]).valid?(e.selectedIndices=[],G()):(f.holdDice(e.selectedIndices).valid&&(e.selectedIndices=[]),G())}function Eo(){L(),bs.classList.remove("hidden"),O||(O=new fr),O.getState().gameOver&&O.reset(),O.getState().currentRoll.length===0&&O.roll(),Fe(!0)}function Fe(r=!1){if(!O)return;const e=O.getState();vn.textContent=e.totalScore.toString(),le.innerHTML="",le.classList.contains("dice-container-3d")||(le.className="dice-container-3d",le.style.display="flex",le.style.transform="scale(0.8)"),e.keptDice.forEach(t=>{var n;const s=F(t,!1,()=>{});t===3&&((n=s.querySelector(".cube-die"))==null||n.classList.add("is-three")),le.appendChild(s)}),ge.classList.contains("dice-container-3d")||(ge.className="dice-container-3d",ge.style.display="flex"),ge.innerHTML="",e.currentRoll.forEach((t,s)=>{const n=F(t,!1,()=>{O.keepDie(s),Fe(!1)});if(r){const o=n.querySelector(".cube-die");o&&(o.classList.add("rolling"),g.playDiceRoll(),setTimeout(()=>o.classList.remove("rolling"),500+Math.random()*300))}ge.appendChild(n)}),De.disabled=!1,e.gameOver?De.textContent="Play Again":De.textContent="Roll Dice"}let v=null;const Fs=document.getElementById("yahtzee-container"),ts=document.getElementById("yahtzee-dice-grid"),Lo=document.getElementById("yahtzee-message");var ds;const So=(ds=document.getElementById("yahtzee-rolls-left"))==null?void 0:ds.querySelector("span");var us;const yo=(us=document.getElementById("yahtzee-total-score-display"))==null?void 0:us.querySelector("span"),Us=document.getElementById("yahtzee-roll-button"),Ks=document.getElementById("yahtzee-score-button"),Io=document.getElementById("yahtzee-back-button"),It=document.getElementById("yahtzee-scorecard-modal"),ss=document.getElementById("yahtzee-score-grid"),Wo=document.getElementById("close-yahtzee-scorecard");function vo(){L(),Fs.classList.remove("hidden"),v||(v=new yr),je(!1)}function je(r=!1){if(!v)return;const e=v.getState();Lo.textContent=e.turnOver?"Turn over â€“ choose a category":"Roll the dice",So.textContent=e.rollsLeft.toString();const t=Object.values(e.scoreCard).reduce((s,n)=>s+(n||0),0);yo.textContent=t.toString(),ts.innerHTML="",e.dice.forEach((s,n)=>{const o=F(s,e.held[n],()=>{v.toggleHold(n),je(!1)});if(e.held[n]&&o.classList.add("die-keep"),r){const l=o.querySelector(".cube-die");l&&(l.classList.add("rolling"),g.playDiceRoll(),setTimeout(()=>l.classList.remove("rolling"),500+Math.random()*300))}ts.appendChild(o)}),Us.disabled=e.turnOver||e.rollsLeft<=0,Ks.disabled=e.dice[0]===0}function Oo(){if(!v)return;const r=v.getState();ss.innerHTML="",[{key:"ones",name:"Ones"},{key:"twos",name:"Twos"},{key:"threes",name:"Threes"},{key:"fours",name:"Fours"},{key:"fives",name:"Fives"},{key:"sixes",name:"Sixes"},{key:"threeOfKind",name:"3 of a Kind"},{key:"fourOfKind",name:"4 of a Kind"},{key:"fullHouse",name:"Full House"},{key:"smallStraight",name:"Sm Straight"},{key:"largeStraight",name:"Lg Straight"},{key:"yahtzee",name:"YAHTZEE"},{key:"chance",name:"Chance"}].forEach(t=>{const s=document.createElement("div");s.className="scorecard-item";const n=r.scoreCard[t.key]!==void 0;n&&s.classList.add("scored","disabled");const o=v.calculateCategoryPoints(t.key);s.innerHTML=`
            <span class="category-name">${t.name}</span>
            <span class="potential-score">${n?r.scoreCard[t.key]:o}</span>
        `,n||(s.onclick=()=>{if(v.score(t.key),It.classList.add("hidden"),a(`Scored ${o} in ${t.name}!`,!0),Object.keys(r.scoreCard).length+1>=13){const l=Object.values(r.scoreCard).reduce((i,c)=>i+(c||0),0)+o;a(`Game Over! Final Score: ${l}`,!0,!0),u+=Math.floor(l/10),W(),setTimeout(h,3e3)}else v.rollsLeft=3,v.dice=[0,0,0,0,0],v.held=[!1,!1,!1,!1,!1],v.turnOver=!1,je(!1)}),ss.appendChild(s)})}Us.addEventListener("click",()=>{v&&(v.roll(),je(!0))});Ks.addEventListener("click",()=>{Oo(),It.classList.remove("hidden")});Wo.addEventListener("click",()=>{It.classList.add("hidden")});Io.addEventListener("click",h);let w=null;const $s=document.getElementById("liar-dice-container"),st=document.getElementById("liar-dice-player-dice"),rt=document.getElementById("liar-dice-computer-dice"),Ao=document.getElementById("liar-dice-message"),fe=document.getElementById("liar-dice-bid-button"),Ne=document.getElementById("liar-dice-call-button"),Co=document.getElementById("liar-dice-back-button"),Wt=document.getElementById("liar-dice-bid-modal"),To=document.getElementById("close-liar-bid"),bo=document.getElementById("bid-qty-minus"),Ro=document.getElementById("bid-qty-plus"),Bo=document.getElementById("bid-qty-value"),ko=document.getElementById("bid-face-minus"),Do=document.getElementById("bid-face-plus"),wo=document.getElementById("bid-face-value"),No=document.getElementById("liar-dice-confirm-bid");let Q=1,ee=1;function Mo(){L(),$s.classList.remove("hidden"),w||(w=new Ir),Ie(!1)}function Ie(r=!1){if(!w)return;const e=w.getState();Ao.textContent=e.message,st.innerHTML="",e.playerDice.forEach(t=>{const s=F(t,!1,()=>{});st.appendChild(s)}),rt.innerHTML="",e.computerDice.forEach(t=>{const s=F(e.gameOver?t:"?",!1,()=>{});rt.appendChild(s)}),r&&(g.playDiceRoll(),[st,rt].forEach(t=>{t.classList.add("rolling"),setTimeout(()=>t.classList.remove("rolling"),600)}),ce("light")),e.gameOver?(fe.textContent="Play Again",fe.disabled=!1,Ne.style.display="none"):(fe.textContent="Place Bid",fe.disabled=!e.playerTurn,Ne.style.display="block",Ne.disabled=!e.playerTurn||!e.currentBid)}function ve(){Bo.textContent=Q.toString(),wo.textContent=ee.toString()}fe.addEventListener("click",()=>{if(!w)return;const r=w.getState();if(r.gameOver){w.reset(),Ie(!0);return}r.currentBid?(Q=r.currentBid.count,ee=r.currentBid.face):(Q=1,ee=1),ve(),Wt.classList.remove("hidden")});bo.addEventListener("click",()=>{Q>1&&(Q--,ve(),g.playClick())});Ro.addEventListener("click",()=>{Q<10&&(Q++,ve(),g.playClick())});ko.addEventListener("click",()=>{ee>1&&(ee--,ve(),g.playClick())});Do.addEventListener("click",()=>{ee<6&&(ee++,ve(),g.playClick())});No.addEventListener("click",()=>{w.playerBid({count:Q,face:ee})?(Wt.classList.add("hidden"),Ie(!0),setTimeout(()=>{w.computerTurn(),Ie(!0),ce("light")},1500)):(a("Bid must be higher than current bid!",!1),U())});To.addEventListener("click",()=>{Wt.classList.add("hidden")});Ne.addEventListener("click",()=>{if(!w)return;const r=w.playerCallLiar();r&&(Ie(!1),a(r.result,r.playerWon,!0,4e3),r.playerWon?(u+=50,W(),g.playSuccess()):(g.playError(),U()))});Co.addEventListener("click",h);let Z=null;const zs=document.getElementById("zanzibar-container"),rs=document.getElementById("zanzibar-dice-grid"),Po=document.getElementById("zanzibar-message");var hs;const Go=(hs=document.getElementById("zanzibar-rolls-left"))==null?void 0:hs.querySelector("span"),xo=document.getElementById("zanzibar-roll-button"),Ho=document.getElementById("zanzibar-keep-button"),Fo=document.getElementById("zanzibar-back-button");function Uo(){L(),zs.classList.remove("hidden"),Z||(Z=new Wr),_e(!1)}function _e(r=!1){if(!Z)return;const e=Z.getState();Po.textContent=e.message,Go.textContent=e.rollsLeft.toString(),rs.innerHTML="",e.dice.forEach((t,s)=>{const n=F(t,e.kept[s],()=>{Z.toggleKeep(s),_e(!1)});if(e.kept[s]&&n.classList.add("die-keep"),r){const o=n.querySelector(".cube-die");o&&(o.classList.add("rolling"),g.playDiceRoll(),setTimeout(()=>o.classList.remove("rolling"),500+Math.random()*300))}rs.appendChild(n)})}xo.addEventListener("click",()=>{Z&&(Z.roll(),_e(!0))});Ho.addEventListener("click",()=>{a("Turn ended!",!0),Z.reset(),_e(!0)});Fo.addEventListener("click",h);let $=null;const qs=document.getElementById("lockin-container"),ns=document.getElementById("lockin-dice-grid"),Ko=document.getElementById("lockin-message");var ms;const $o=(ms=document.getElementById("lockin-rolls-left"))==null?void 0:ms.querySelector("span"),zo=document.getElementById("lockin-roll-button"),qo=document.getElementById("lockin-lock-button"),Yo=document.getElementById("lockin-back-button");function Vo(){L(),qs.classList.remove("hidden"),$||($=new vr),Xe(!1)}function Xe(r=!1){if(!$)return;const e=$.getState();Ko.textContent=e.message,$o.textContent=e.rollsLeft.toString(),ns.innerHTML="",e.dice.forEach((t,s)=>{const n=F(t,e.locked[s],()=>{$.toggleLock(s),Xe(!1)});if(e.locked[s]&&n.classList.add("die-locked"),r){const o=n.querySelector(".cube-die");o&&(o.classList.add("rolling"),g.playDiceRoll(),setTimeout(()=>o.classList.remove("rolling"),500+Math.random()*300))}ns.appendChild(n)})}zo.addEventListener("click",()=>{$&&($.roll(),Xe(!0))});qo.addEventListener("click",()=>{const r=$.getState().locked.findIndex(e=>!e);r!==-1&&$.toggleLock(r),Xe(!1)});Yo.addEventListener("click",h);function Ys(){L(),Ts.classList.remove("hidden"),_||(_=new Sr),Ue(!0)}function Ue(r=!1){if(!_)return;const e=_.getState();if(In.textContent=e.message,me.classList.contains("dice-container-3d")||(me.className="dice-container-3d",me.style.display="flex"),me.innerHTML="",e.dice.forEach((t,s)=>{const n=F(t,P.includes(s),()=>{P.includes(s)?P=P.filter(o=>o!==s):P.push(s),Ue(!1)});if(r){const o=n.querySelector(".cube-die");o&&(o.classList.add("rolling"),g.playDiceRoll(),setTimeout(()=>{o.classList.remove("rolling")},500+Math.random()*300))}me.appendChild(n)}),P.length>0){const t=P.reduce((s,n)=>s+e.dice[n],0);ie.textContent=`Remove ${t} (Target: 7)`,ie.disabled=t!==7}else ie.textContent="Remove Selected",ie.disabled=!0;e.gameOver?(ke.textContent="Play Again",ke.onclick=()=>Ys(),ie.disabled=!0):ke.textContent="Roll Dice"}function jo(){L(),Rs.classList.remove("hidden"),zt||(zt=new Lr)}function _o(){a("Cribbage is still in development! ðŸ“Œ",!1)}function Xo(r,e){const t=document.createElement("button");t.classList.add("level-gem"),t.setAttribute("aria-label",`${e} - ${r.displayName}${r.completed?" (Completed)":r.unlocked?" (Unlocked)":" (Locked)"}`);const n=document.createElement("span");n.classList.add("material-symbols-outlined","level-gem-icon");const o=document.createElement("span");return o.classList.add("level-gem-number"),o.textContent=String(r.levelInWorld),r.completed?(t.classList.add("completed"),n.textContent="check_circle",t.appendChild(n)):r.unlocked?(t.classList.add("unlocked"),t.appendChild(o),t.addEventListener("click",()=>Vs(r))):(t.classList.add("locked"),n.textContent="lock",t.appendChild(n),t.disabled=!0),t}function Zo(){console.log("renderRoadmap called. gameRoadmap length:",E.length),wt.innerHTML="",E.forEach(r=>{const e=document.createElement("div");e.classList.add("world-section"),e.id=`world-${r.id}`;const t=getComputedStyle(document.documentElement).getPropertyValue(`--world-${r.id}-bg`).trim()||"var(--primary)";e.style.setProperty("--world-color",t),Me[r.id]&&(e.style.backgroundImage=`linear-gradient(rgba(15, 23, 42, 0.7), rgba(15, 23, 42, 0.7)), url(${Me[r.id]})`,e.style.backgroundSize="cover");const s=document.createElement("div");s.classList.add("world-info");const n=document.createElement("h2");n.classList.add("world-name-vertical"),n.textContent=r.name,s.appendChild(n);const o=r.levels.filter(c=>c.completed).length,l=document.createElement("p");l.classList.add("world-progress"),l.textContent=`${o}/${r.levels.length}`,s.appendChild(l),e.appendChild(s);const i=document.createElement("div");i.classList.add("levels-grid"),r.levels.forEach(c=>{const d=Xo(c,r.name);i.appendChild(d)}),e.appendChild(i),wt.appendChild(e)}),console.log("renderRoadmap complete. Worlds rendered:",E.length),W()}function Vs(r){m=r,T=[...r.letters],D=[],gs=0;const e=document.getElementById("app-container");e&&Me[r.worldId]&&e.style.setProperty("--bg-image",`url(${Me[r.worldId]})`),Vn(),Jo()}function Jo(){m&&(Tn.textContent=`${m.worldId.toUpperCase().replace("GEN-WORLD-","GEN ").replace(/-/g," ")} ${m.levelInWorld}`,vt(),Ze(),Je(),z(),q(),te.textContent="",Dn.textContent=String(nt),wn.textContent=String(ot))}function vt(){const r=document.getElementById("letter-input-container");r&&r.offsetParent!==null&&(J.width=r.offsetWidth,J.height=r.offsetHeight)}function Ze(){if(!qe.classList.contains("hidden")){et.innerHTML="";const r=et.getBoundingClientRect();if(r.width===0||r.height===0)return;const e=r.width/2*.75,t=r.width/2,s=r.height/2;T.forEach((n,o)=>{const l=o/T.length*2*Math.PI-Math.PI/2,i=document.createElement("button");i.classList.add("letter-button"),i.textContent=n,i.dataset.letter=n,i.dataset.originalIndex=String(o),i.setAttribute("aria-label",`Letter ${n}`),et.appendChild(i);const c=parseFloat(getComputedStyle(i).width),d=parseFloat(getComputedStyle(i).height),S=t+e*Math.cos(l)-c/2,oe=s+e*Math.sin(l)-d/2;i.style.left=`${S}px`,i.style.top=`${oe}px`;const bt=J.getBoundingClientRect();i.canvasCenterX=(i.getBoundingClientRect().left+i.getBoundingClientRect().right)/2-bt.left,i.canvasCenterY=(i.getBoundingClientRect().top+i.getBoundingClientRect().bottom)/2-bt.top,i.addEventListener("pointerdown",sr=>Qo(sr,n,o,i))})}}function Je(){if(!m)return;Ge.innerHTML="",[...m.targetWords].sort((e,t)=>e.length!==t.length?e.length-t.length:e.localeCompare(t)).forEach(e=>{const t=document.createElement("div");t.classList.add("word-row"),t.setAttribute("aria-label",`Word to find: ${e.length} letters`);for(let s=0;s<e.length;s++){const n=document.createElement("div");n.classList.add("letter-tile"),D.includes(e)?(n.textContent=e[s],n.classList.add("filled"),n.setAttribute("aria-label",`Letter ${e[s]}, part of found word ${e}`)):(n.classList.add("empty"),n.setAttribute("aria-label",`Empty letter tile, position ${s+1} of ${e.length}`)),t.appendChild(n)}Ge.appendChild(t)})}function Ke(){te.textContent=I.map(r=>r.letter).join("")}function z(){const r=String(u);Pn.textContent=r,Rr.textContent=r,Kn.textContent=r}function W(){z(),At(V>0&&!ae.classList.contains("hidden")?0:V),Ot()}function Qo(r,e,t,s){r.preventDefault(),!(Ee||qn)&&(Ee=!0,s.classList.add("swiped"),I=[{letter:e,originalIndex:t,element:s,centerX:s.canvasCenterX,centerY:s.canvasCenterY}],Ke(),dt(),document.addEventListener("pointermove",js),document.addEventListener("pointerup",$e),document.addEventListener("pointercancel",$e))}function js(r){if(!Ee)return;r.preventDefault();const e=document.elementFromPoint(r.clientX,r.clientY);if(e&&e.classList.contains("letter-button")&&!e.classList.contains("swiped")){const t=e.dataset.letter,s=parseInt(e.dataset.originalIndex,10);e.classList.add("swiped"),I.push({letter:t,originalIndex:s,element:e,centerX:e.canvasCenterX,centerY:e.canvasCenterY}),ce("light"),g.playConnect(),Ke(),dt()}else if(e&&e.classList.contains("letter-button")&&e.classList.contains("swiped")&&I.length>1&&I[I.length-2].element===e){const t=I.pop();t&&t.element.classList.remove("swiped"),Ke(),dt()}}function $e(r){if(!Ee)return;r.preventDefault(),Ee=!1,document.removeEventListener("pointermove",js),document.removeEventListener("pointerup",$e),document.removeEventListener("pointercancel",$e);const e=I.map(t=>t.letter).join("");el(e),q()}function dt(){if(M.clearRect(0,0,J.width,J.height),!(I.length<2)){M.beginPath(),M.moveTo(I[0].centerX,I[0].centerY);for(let r=1;r<I.length;r++)M.lineTo(I[r].centerX,I[r].centerY);M.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--letter-button-swiped-bg")||"rgba(255, 160, 0, 0.7)",M.lineWidth=10,M.lineCap="round",M.lineJoin="round",M.stroke()}}function q(){I.forEach(r=>r.element.classList.remove("swiped")),I=[],Ke(),M.clearRect(0,0,J.width,J.height)}function ut(r,e){const t=[...e];for(const s of r){const n=t.indexOf(s);if(n===-1)return!1;t.splice(n,1)}return!0}function el(r){if(!m)return;const e=r.toUpperCase();if(e.length<(m.letters.length>=3?2:3)&&e.length>0&&m.letters.length>=3&&!(e.length<2&&m.letters.length>=2)){if(e.length<3){a("Word too short (min 3 letters for most puzzles).",!1,!1,1500),U(),q(),te.textContent="";return}}if(e.length===0){q(),te.textContent="";return}if(!ut(e,T)){e.length>=(m.letters.length>=3?2:3)&&(a(`"${e}" uses letters not on the wheel.`,!1,!1,1500),U()),q(),te.textContent="";return}if(m.targetWords.includes(e)&&!D.includes(e))D.push(e),gs+=e.length*10,u+=e.length,a(`Correct! "${e}" added.`,!0),ce("success"),Je(),z(),N(),m.targetWords.every(s=>D.includes(s))&&(m.completed=!0,Xs(m),N(),a("Level Complete! All words found.",!0,!0),g.playLevelComplete());else if(D.includes(e))a(`"${e}" already found.`,!1,!1,1500),U();else if(ut(e,T)&&!Y.includes(e)&&!m.targetWords.includes(e)&&e.length>=(m.letters.length>=4?3:2)){if(!ze.isValid(e)){a(`"${e}" is not a valid word.`,!1,!1,1500),U(),q(),te.textContent="";return}Y.push(e),u+=kt,z(),Ot(),At(V+1),a(`Bonus word: "${e}"! +${kt} coin.`,!0,!1,2e3),ce("success"),g.playBonus(),Y.length===1&&localStorage.getItem("bonusTipShown")!=="true"&&ol(),N()}else Y.includes(e)?(a(`Bonus "${e}" already found.`,!1,!1,1500),U()):e.length>=(m.letters.length>=4?3:2)&&(a(`"${e}" is not a target word.`,!1,!1,1500),U());te.textContent="",q()}function tl(){if(u<Dt){a("Not enough coins to shuffle!",!1),U();return}u-=Dt,z(),N(),g.playSelect();for(let r=T.length-1;r>0;r--){const e=Math.floor(Math.random()*(r+1));[T[r],T[e]]=[T[e],T[r]]}q(),Ze(),a("Letters shuffled!",!0,!1,1e3),ce("light")}function sl(){if(!m)return;if(u<nt){a("Not enough coins for a hint!",!1);return}const r=m.targetWords.filter(n=>!D.includes(n));if(r.length===0){a("No more hints available for this level.",!1,!1,2e3);return}r.sort((n,o)=>n.length-o.length||n.localeCompare(o));const e=r[0];if(!ut(e,T)){a(`Cannot provide hint for "${e}" - letters unavailable. (Data issue)`,!1,!1,3e3),console.error(`Hint failed: Word "${e}" from targetWords is not formable with letters: ${T.join(",")}`);return}u-=nt,z(),D.push(e),Je(),Ge.querySelectorAll(".word-row").forEach(n=>{const o=Array.from(n.querySelectorAll(".letter-tile"));if(o.map(l=>l.dataset.letterContent||"").join(""),o.length===e.length){let l=!0;for(let i=0;i<o.length;i++)if(!o[i].classList.contains("empty")&&o[i].textContent!==e[i]){l=!1;break}l&&D.includes(e)&&o.forEach((i,c)=>{i.textContent===e[c]&&(i.classList.add("hinted-reveal"),setTimeout(()=>i.classList.remove("hinted-reveal"),600))})}}),a(`Hint: "${e}" added!`,!0,!1,2500),N(),m.targetWords.every(n=>D.includes(n))&&(m.completed=!0,Xs(m),N(),a("Level Complete! All words found.",!0,!0))}function rl(){if(!m)return;if(u<ot){a("Not enough coins to reveal a letter!",!1);return}const r=m.targetWords.filter(o=>!D.includes(o));if(r.length===0){a("All words found, no letters to reveal.",!1,!1,2e3);return}const e=[],t=Ge.querySelectorAll(".word-row"),s={};if(r.forEach(o=>{s[o.length]||(s[o.length]=[]),s[o.length].push(o)}),t.forEach(o=>{const l=Array.from(o.querySelectorAll(".letter-tile"));s[l.length]&&s[l.length].forEach(c=>{let d=!0;for(let S=0;S<l.length;S++)if(!l[S].classList.contains("empty")&&l[S].textContent!==c[S]){d=!1;break}d&&l.forEach((S,oe)=>{S.classList.contains("empty")&&e.push({tile:S,letter:c[oe]})})})}),e.length===0){a("No more letters to reveal in the current words.",!1,!1,2e3);return}const n=e[Math.floor(Math.random()*e.length)];u-=ot,z(),N(),n.tile.textContent=n.letter,n.tile.classList.remove("empty"),n.tile.classList.add("filled","hinted-reveal"),setTimeout(()=>n.tile.classList.remove("hinted-reveal"),600),a("A letter has been revealed!",!0,!1,2e3)}function nl(){{a("Speech recognition not initialized.",!1);return}}function Ot(){qt.innerHTML="",[...Y].sort().forEach(e=>{const t=document.createElement("div");t.classList.add("bonus-word-entry"),t.innerHTML=`<span class="material-symbols-outlined">paid</span> ${e}`,qt.appendChild(t)})}function os(){Ot(),ae.classList.remove("hidden"),At(0)}function ls(){ae.classList.add("hidden")}function At(r){r>0?V=r:V=0,[Mn,br].forEach(t=>{V>0?(t.textContent=String(V),t.classList.remove("hidden")):t.classList.add("hidden")})}function ol(){localStorage.getItem("bonusTipShown")!=="true"&&ft.classList.remove("hidden")}function ll(){ft.classList.add("hidden"),localStorage.setItem("bonusTipShown","true")}function _s(r){if(!r)return null;const e=E.find(s=>s.id===r.worldId);if(!e)return null;const t=e.levels.findIndex(s=>s.id===r.id);if(t!==-1&&t<e.levels.length-1)return e.levels[t+1];{const s=E.findIndex(n=>n.id===e.id);if(s!==-1&&s<E.length-1){const n=E[s+1];if(n.levels.length>0)return n.levels[0]}}return null}function Xs(r){const e=_s(r);e&&(e.unlocked=!0)}function N(){const r={coins:u,bonusWordsFound:Y,gameRoadmap:E,settings:p};localStorage.setItem("wordFinderDeluxeProgress",JSON.stringify(r))}function Zs(){const e=[{id:"tutorial",name:"Tutorial",levels:[{letters:["A","T"],targetWords:["AT"]},{letters:["C","A","T"],targetWords:["CAT","ACT"]},{letters:["D","O","G"],targetWords:["DOG","GOD"]},{letters:["S","U","N"],targetWords:["SUN"]},{letters:["P","E","N"],targetWords:["PEN"]}]},{id:"kitchen",name:"Culinary Chaos",levels:[{letters:["E","G","G","S"],targetWords:["EGGS","EGG"]},{letters:["P","A","N","S"],targetWords:["PANS","PAN","NAP","SNAP"]},{letters:["C","O","O","K"],targetWords:["COOK"]},{letters:["F","O","R","K"],targetWords:["FORK"]},{letters:["D","I","S","H"],targetWords:["DISH"]},{letters:["M","E","A","L"],targetWords:["MEAL","MALE"]},{letters:["B","A","K","E"],targetWords:["BAKE"]},{letters:["S","O","U","P"],targetWords:["SOUP"]}]},{id:"forest",name:"Whispering Woods",levels:[{letters:["T","R","E","E"],targetWords:["TREE","TEE"]},{letters:["L","E","A","F"],targetWords:["LEAF","ALE","ELF"]},{letters:["W","O","O","D"],targetWords:["WOOD"]},{letters:["B","I","R","D"],targetWords:["BIRD","RID"]},{letters:["D","E","E","R"],targetWords:["DEER","REED"]},{letters:["B","E","A","R"],targetWords:["BEAR","ARE","BAR"]},{letters:["L","A","K","E"],targetWords:["LAKE"]},{letters:["F","R","O","G"],targetWords:["FROG"]}]},{id:"ocean",name:"Deep Blue",levels:[{letters:["F","I","S","H"],targetWords:["FISH"]},{letters:["W","A","V","E"],targetWords:["WAVE","AVE"]},{letters:["B","O","A","T"],targetWords:["BOAT"]},{letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"]},{letters:["S","H","I","P"],targetWords:["SHIP","HIP","SIP"]},{letters:["S","E","A","L"],targetWords:["SEAL","SEA","ALE"]},{letters:["D","I","V","E"],targetWords:["DIVE"]},{letters:["S","W","I","M"],targetWords:["SWIM"]}]},{id:"space",name:"Cosmic Voyage",levels:[{letters:["S","T","A","R"],targetWords:["STAR","RAT","ART","TAR"]},{letters:["M","O","O","N"],targetWords:["MOON","MOO"]},{letters:["M","A","R","S"],targetWords:["MARS","ARM","RAM"]},{letters:["S","U","N","S"],targetWords:["SUNS","SUN"]},{letters:["V","O","I","D"],targetWords:["VOID"]},{letters:["N","O","V","A"],targetWords:["NOVA"]},{letters:["A","T","O","M"],targetWords:["ATOM"]},{letters:["G","L","O","W"],targetWords:["GLOW","LOW","OWL"]}]},{id:"desert",name:"Desert Heat",levels:[{letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"]},{letters:["D","U","N","E"],targetWords:["DUNE","DUE"]},{letters:["H","E","A","T"],targetWords:["HEAT","HAT","EAT"]},{letters:["C","A","M","E","L"],targetWords:["CAMEL","MEAL","MALE"]},{letters:["O","A","S","I","S"],targetWords:["OASIS"]},{letters:["P","A","L","M"],targetWords:["PALM","MAP","LAP"]},{letters:["D","U","S","T"],targetWords:["DUST"]},{letters:["W","A","N","D"],targetWords:["WAND"]}]},{id:"arctic",name:"Frozen Tundra",levels:[{letters:["I","C","E","S"],targetWords:["ICES","ICE"]},{letters:["S","N","O","W"],targetWords:["SNOW","NOW","OWN","WON"]},{letters:["C","O","L","D"],targetWords:["COLD","OLD","COD"]},{letters:["S","E","A","L"],targetWords:["SEAL","SEA","ALE"]},{letters:["P","O","L","E"],targetWords:["POLE"]},{letters:["B","E","A","R"],targetWords:["BEAR","ARE","BAR"]},{letters:["F","R","O","S","T"],targetWords:["FROST","SOFT","ROTS"]},{letters:["H","A","I","L"],targetWords:["HAIL"]}]},{id:"mountain",name:"Mystic Peaks",levels:[{letters:["P","E","A","K"],targetWords:["PEAK","APE","KEA"]},{letters:["H","I","K","E"],targetWords:["HIKE"]},{letters:["S","N","O","W"],targetWords:["SNOW","SOW","WON"]},{letters:["C","L","I","M","B"],targetWords:["CLIMB","LIMB"]},{letters:["M","O","S","S"],targetWords:["MOSS"]},{letters:["R","O","C","K"],targetWords:["ROCK"]},{letters:["C","O","L","D"],targetWords:["COLD","OLD"]},{letters:["V","I","E","W"],targetWords:["VIEW"]}]},{id:"jungle",name:"Rainforest",levels:[{letters:["A","P","E","S"],targetWords:["APES","APE","SEA"]},{letters:["V","I","N","E"],targetWords:["VINE","VIE"]},{letters:["R","A","I","N"],targetWords:["RAIN","RAN","AIR"]},{letters:["F","R","O","G"],targetWords:["FROG"]},{letters:["T","I","G","E","R"],targetWords:["TIGER","TIER","GRIT"]},{letters:["L","E","A","F"],targetWords:["LEAF","ALE"]},{letters:["W","I","L","D"],targetWords:["WILD"]},{letters:["F","E","L","L"],targetWords:["FELL"]}]},{id:"city",name:"Neon City",levels:[{letters:["C","A","R","S"],targetWords:["CARS","CAR","ARC"]},{letters:["B","I","K","E"],targetWords:["BIKE"]},{letters:["T","A","X","I"],targetWords:["TAXI"]},{letters:["R","O","A","D"],targetWords:["ROAD"]},{letters:["P","A","R","K"],targetWords:["PARK"]},{letters:["W","A","L","K"],targetWords:["WALK"]},{letters:["S","T","O","P"],targetWords:["STOP","TOP","POT"]},{letters:["M","E","T","R","O"],targetWords:["METRO","MORE","ROME"]}]},{id:"underground",name:"Deep Earth",levels:[{letters:["C","A","V","E"],targetWords:["CAVE"]},{letters:["D","A","R","K"],targetWords:["DARK"]},{letters:["C","O","A","L"],targetWords:["COAL"]},{letters:["G","O","L","D"],targetWords:["GOLD"]},{letters:["R","O","C","K"],targetWords:["ROCK"]},{letters:["I","R","O","N"],targetWords:["IRON"]},{letters:["D","I","R","T"],targetWords:["DIRT"]},{letters:["M","O","L","E"],targetWords:["MOLE"]}]},{id:"garden",name:"Floral Fantasy",levels:[{letters:["R","O","S","E"],targetWords:["ROSE"]},{letters:["S","E","E","D"],targetWords:["SEED"]},{letters:["G","R","O","W"],targetWords:["GROW"]},{letters:["L","E","A","F"],targetWords:["LEAF"]},{letters:["B","E","R","R","Y"],targetWords:["BERRY"]},{letters:["D","I","R","T"],targetWords:["DIRT"]},{letters:["P","O","T","S"],targetWords:["POTS"]},{letters:["W","A","T","E","R"],targetWords:["WATER"]}]},{id:"library",name:"Scholar's Sanctum",levels:[{letters:["B","O","O","K"],targetWords:["BOOK"]},{letters:["R","E","A","D"],targetWords:["READ"]},{letters:["P","A","G","E"],targetWords:["PAGE"]},{letters:["T","A","L","E"],targetWords:["TALE"]},{letters:["I","N","K","S"],targetWords:["INKS"]},{letters:["P","O","E","M"],targetWords:["POEM"]},{letters:["W","O","R","D"],targetWords:["WORD"]},{letters:["H","I","S","T","O","R","Y"],targetWords:["HISTORY","STORY","TOYS"]}]},{id:"meadow",name:"Blossom Meadow",levels:[{letters:["B","E","E","S"],targetWords:["BEES","BEE","SEE"]},{letters:["F","L","O","W"],targetWords:["FLOW","LOW","OWL"]},{letters:["L","I","L","Y"],targetWords:["LILY"]},{letters:["P","I","N","K"],targetWords:["PINK"]},{letters:["R","O","S","E"],targetWords:["ROSE","SORE"]},{letters:["L","A","W","N"],targetWords:["LAWN"]},{letters:["W","E","E","D"],targetWords:["WEED"]},{letters:["F","L","U","S","H"],targetWords:["FLUSH"]}]},{id:"volcano",name:"Volcanic Vent",levels:[{letters:["A","S","H"],targetWords:["ASH","HAS"]},{letters:["L","A","V","A"],targetWords:["LAVA"]},{letters:["F","I","R","E"],targetWords:["FIRE","IRE"]},{letters:["H","E","A","T"],targetWords:["HEAT","HAT","EAT"]},{letters:["L","A","V","A","S"],targetWords:["LAVAS","LAVA"]},{letters:["C","O","R","E"],targetWords:["CORE"]},{letters:["R","O","K","S"],targetWords:["ROKS"]},{letters:["F","L","A","M","E"],targetWords:["FLAME","MEAL","MALE","LAME"]}]},{id:"sky",name:"Sky Fortress",levels:[{letters:["A","I","R"],targetWords:["AIR"]},{letters:["B","I","R","D"],targetWords:["BIRD","RID"]},{letters:["W","I","N","D"],targetWords:["WIND","WIN","DIN"]},{letters:["C","L","O","U","D"],targetWords:["CLOUD","LOUD","COLD"]},{letters:["S","T","O","R","M"],targetWords:["STORM","MOST","SORT"]},{letters:["H","I","G","H"],targetWords:["HIGH"]},{letters:["B","L","U","E"],targetWords:["BLUE"]},{letters:["W","I","N","G"],targetWords:["WING"]}]},{id:"crystal",name:"Crystal Caverns",levels:[{letters:["G","E","M","S"],targetWords:["GEMS","GEM"]},{letters:["G","O","L","D"],targetWords:["GOLD","OLD","GOD"]},{letters:["M","I","N","E"],targetWords:["MINE"]},{letters:["O","R","E"],targetWords:["ORE","ROE"]},{letters:["C","A","V","E"],targetWords:["CAVE"]},{letters:["G","L","O","W","S"],targetWords:["GLOWS","GLOW","LOWS","SLOW"]},{letters:["P","R","I","Z","E"],targetWords:["PRIZE"]},{letters:["R","A","R","E"],targetWords:["RARE","REAR","ERA"]},{letters:["R","O","C","K","S"],targetWords:["ROCKS","ROCK","CORK"]}]},{id:"cyber",name:"Cyber City",levels:[{letters:["D","A","T","A"],targetWords:["DATA"]},{letters:["B","I","T","S"],targetWords:["BITS","BIT","ITS"]},{letters:["C","O","D","E"],targetWords:["CODE","DOC","DOE"]},{letters:["H","A","C","K"],targetWords:["HACK"]},{letters:["C","H","I","P"],targetWords:["CHIP","HIP","SIP","PIC"]},{letters:["B","Y","T","E"],targetWords:["BYTE","YEB"]},{letters:["S","C","A","N"],targetWords:["SCAN","CAN","SAN"]},{letters:["U","S","E","R"],targetWords:["USER","SUE","USE"]},{letters:["L","I","N","K"],targetWords:["LINK","NIL","KIN"]},{letters:["W","A","T","C","H"],targetWords:["WATCH","HAT","CAT"]}]},{id:"ruins",name:"Ancient Ruins",levels:[{letters:["O","L","D"],targetWords:["OLD"]},{letters:["D","U","S","T"],targetWords:["DUST"]},{letters:["R","O","C","K"],targetWords:["ROCK"]},{letters:["G","O","L","D"],targetWords:["GOLD","OLD","GOD"]},{letters:["L","O","S","T"],targetWords:["LOST","SLOT","LOT"]},{letters:["P","A","T","H"],targetWords:["PATH","HAT","PAT"]},{letters:["G","A","T","E"],targetWords:["GATE","ATE","TEA"]},{letters:["T","O","M","B"],targetWords:["TOMB"]},{letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"]},{letters:["S","T","O","N","E"],targetWords:["STONE","TONE","NET","TEN"]}]},{id:"steam",name:"Steam Haven",levels:[{letters:["G","E","A","R"],targetWords:["GEAR","ARE","AGE"]},{letters:["C","O","G","S"],targetWords:["COGS","COG"]},{letters:["I","R","O","N"],targetWords:["IRON","NOR","ION"]},{letters:["P","I","P","E"],targetWords:["PIPE"]},{letters:["R","U","S","T"],targetWords:["RUST","RUT"]},{letters:["V","A","L","V","E"],targetWords:["VALVE"]},{letters:["S","T","E","A","M"],targetWords:["STEAM","TEAM","MET","EAT"]},{letters:["B","E","L","T"],targetWords:["BELT","LET","BET"]},{letters:["W","H","E","E","L"],targetWords:["WHEEL","HEL","LEE"]},{letters:["S","M","O","K","E"],targetWords:["SMOKE","SOME"]}]},{id:"enchanted",name:"Enchanted Garden",levels:[{letters:["F","A","E"],targetWords:["FAE"]},{letters:["W","I","S","P"],targetWords:["WISP"]},{letters:["L","U","M","A"],targetWords:["LUMA"]},{letters:["M","A","G","I","C"],targetWords:["MAGIC","MIG","AIM"]},{letters:["P","E","T","A","L"],targetWords:["PETAL","PLATE","PALE","TEAL"]},{letters:["F","L","O","R","A"],targetWords:["FLORA","OAR","FOR"]},{letters:["V","I","N","E"],targetWords:["VINE","VIE"]},{letters:["W","A","N","D"],targetWords:["WAND"]},{letters:["G","L","O","W"],targetWords:["GLOW","LOW","OWL"]},{letters:["M","O","O","N"],targetWords:["MOON","MOO"]}]},{id:"ghost",name:"Ghostly Grotto",levels:[{letters:["B","O","O"],targetWords:["BOO"]},{letters:["F","O","G"],targetWords:["FOG"]},{letters:["D","A","R","K"],targetWords:["DARK","ARK","RAD"]},{letters:["G","H","O","S","T"],targetWords:["GHOST","HOS","GOT"]},{letters:["B","O","N","E"],targetWords:["BONE","ONE","BEN"]},{letters:["S","C","A","R","Y"],targetWords:["SCARY","SAY","RAY","CAR"]},{letters:["M","I","S","T"],targetWords:["MIST","ITS","SIT"]},{letters:["H","A","U","N","T"],targetWords:["HAUNT","AUT","TAN"]},{letters:["C","O","L","D"],targetWords:["COLD","OLD"]},{letters:["N","I","G","H","T"],targetWords:["NIGHT","GIN","HIT","TIN"]}]},{id:"sakura",name:"Sakura Peak",levels:[{letters:["Z","E","N"],targetWords:["ZEN"]},{letters:["S","U","N"],targetWords:["SUN"]},{letters:["M","O","U","N","T"],targetWords:["MOUNT","NUT","OUT","NOT"]},{letters:["P","E","A","K"],targetWords:["PEAK","KEA","APE"]},{letters:["L","E","A","F"],targetWords:["LEAF","ALE","ELF"]},{letters:["T","R","E","E"],targetWords:["TREE","TEE"]},{letters:["C","O","L","D"],targetWords:["COLD","OLD","COD"]},{letters:["V","I","E","W"],targetWords:["VIEW"]},{letters:["R","I","C","E"],targetWords:["RICE","ICE"]},{letters:["S","N","O","W"],targetWords:["SNOW","NOW","OWN","WON"]}]},{id:"mars",name:"Mars Colony",levels:[{letters:["R","E","D"],targetWords:["RED"]},{letters:["M","A","R","S"],targetWords:["MARS","ARM","RAM"]},{letters:["D","U","S","T"],targetWords:["DUST","RUT"]},{letters:["B","A","S","E"],targetWords:["BASE","SEA","ABS"]},{letters:["R","O","V","E","R"],targetWords:["ROVER","OVER","ROE"]},{letters:["R","O","C","K"],targetWords:["ROCK","CORK"]},{letters:["L","I","F","E"],targetWords:["LIFE","LIE","FIL"]},{letters:["V","O","I","D"],targetWords:["VOID"]},{letters:["O","X","Y","G","E","N"],targetWords:["OXYGEN","YEN","ONE","EGO"]},{letters:["S","P","R","I","N","T"],targetWords:["SPRINT","PIN","TIN","SIN"]}]},{id:"viking",name:"Viking Fjord",levels:[{letters:["S","E","A"],targetWords:["SEA"]},{letters:["I","C","E"],targetWords:["ICE"]},{letters:["A","X","E"],targetWords:["AXE"]},{letters:["S","H","I","P"],targetWords:["SHIP","HIP","SIP"]},{letters:["S","N","O","W"],targetWords:["SNOW","NOW","OWN"]},{letters:["F","J","O","R","D"],targetWords:["FJORD","FOR","ROD"]},{letters:["K","I","N","G"],targetWords:["KING","GIN","INK"]},{letters:["H","O","L","D"],targetWords:["HOLD","OLD","LOD"]},{letters:["W","A","R"],targetWords:["WAR","RAW"]},{letters:["N","O","R","S","E"],targetWords:["NORSE","ROSE","ROE","ONE","SON"]}]},{id:"pirate",name:"Pirate Cove",levels:[{letters:["B","A","Y"],targetWords:["BAY"]},{letters:["S","E","A"],targetWords:["SEA","AES"]},{letters:["G","O","L","D"],targetWords:["GOLD","OLD","GOD"]},{letters:["S","H","I","I","P"],targetWords:["SHIP","HIP","SIP"]},{letters:["C","R","E","W"],targetWords:["CREW","ARE","EWE"]},{letters:["M","A","P","S"],targetWords:["MAPS","MAP","ASP","PAM"]},{letters:["I","S","L","E"],targetWords:["ISLE","LIE","LES"]},{letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"]},{letters:["C","A","V","E"],targetWords:["CAVE"]},{letters:["C","O","I","N"],targetWords:["COIN","ION","CON"]}]},{id:"candy",name:"Candy Kingdom",levels:[{letters:["G","U","M"],targetWords:["GUM"]},{letters:["P","O","P"],targetWords:["POP"]},{letters:["S","W","E","E","T"],targetWords:["SWEET","TEE","SET","WET"]},{letters:["L","O","L","L","Y"],targetWords:["LOLLY"]},{letters:["C","A","K","E"],targetWords:["CAKE"]},{letters:["M","I","L","K"],targetWords:["MILK"]},{letters:["P","I","N","K"],targetWords:["PINK"]},{letters:["S","O","F","T"],targetWords:["SOFT"]},{letters:["M","I","N","T"],targetWords:["MINT","TIN","NIT"]},{letters:["S","U","G","A","R"],targetWords:["SUGAR","RAG","GAS","SUE"]}]},{id:"underground",name:"The Deep",levels:[{letters:["D","I","G"],targetWords:["DIG"]},{letters:["D","I","R","T"],targetWords:["DIRT","RID"]},{letters:["M","U","D"],targetWords:["MUD"]},{letters:["C","A","V","E"],targetWords:["CAVE"]},{letters:["S","O","I","L"],targetWords:["SOIL","OIL"]},{letters:["M","I","N","E"],targetWords:["MINE"]},{letters:["R","O","C","K"],targetWords:["ROCK"]},{letters:["D","E","E","P"],targetWords:["DEEP"]},{letters:["W","O","R","M"],targetWords:["WORM"]},{letters:["D","A","R","K"],targetWords:["DARK"]}]},{id:"safari",name:"Wild Safari",levels:[{letters:["L","I","O","N"],targetWords:["LION","NIL","ION"]},{letters:["W","I","L","D"],targetWords:["WILD","LID"]},{letters:["P","L","A","I","N"],targetWords:["PLAIN","PLAN","NAP","PAN","PIN"]},{letters:["Z","E","B","R","A"],targetWords:["ZEBRA","ARE","BAR"]},{letters:["C","A","M","P"],targetWords:["CAMP","MAP","CAP"]},{letters:["B","I","R","D"],targetWords:["BIRD"]},{letters:["T","R","E","E"],targetWords:["TREE"]},{letters:["H","U","N","T"],targetWords:["HUNT"]},{letters:["R","O","A","R"],targetWords:["ROAR"]},{letters:["S","A","V","A","N","A"],targetWords:["SAVANA","VAN","SAN"]}]},{id:"circus",name:"Grand Circus",levels:[{letters:["F","U","N"],targetWords:["FUN"]},{letters:["T","E","N","T"],targetWords:["TENT","TEN","NET"]},{letters:["L","I","O","N"],targetWords:["LION"]},{letters:["B","A","L","L"],targetWords:["BALL","ALL"]},{letters:["S","H","O","W"],targetWords:["SHOW","WHO","SOW"]},{letters:["R","I","N","G"],targetWords:["RING"]},{letters:["H","O","O","P"],targetWords:["HOOP"]},{letters:["A","C","R","O"],targetWords:["ACRO","ARC","CAR"]},{letters:["J","U","M","P"],targetWords:["JUMP"]},{letters:["C","L","O","W","N"],targetWords:["CLOWN","LOW","OWN"]}]},{id:"medieval",name:"Knight's Tale",levels:[{letters:["S","W","O","R","D"],targetWords:["SWORD","WORD","ROD"]},{letters:["K","I","N","G"],targetWords:["KING"]},{letters:["C","A","S","T","L","E"],targetWords:["CASTLE","LAST","SALT","SALE"]},{letters:["F","O","R","T"],targetWords:["FORT"]},{letters:["H","E","R","O"],targetWords:["HERO","ROE"]},{letters:["L","A","N","D"],targetWords:["LAND","AND"]},{letters:["R","U","L","E"],targetWords:["RULE"]},{letters:["N","O","B","L","E"],targetWords:["NOBLE","ONE","BEL"]},{letters:["G","U","A","R","D"],targetWords:["GUARD","RAD","RAG"]},{letters:["K","N","I","G","H","T"],targetWords:["KNIGHT","THIN","NIGHT","TIN","GIN"]}]},{id:"future",name:"Neo Era",levels:[{letters:["T","E","C","H"],targetWords:["TECH"]},{letters:["B","O","T"],targetWords:["BOT"]},{letters:["W","O","R","L","D"],targetWords:["WORLD","ROD","OLD"]},{letters:["C","I","T","Y"],targetWords:["CITY"]},{letters:["S","P","A","C","E"],targetWords:["SPACE","ACE","SEA","APE"]},{letters:["S","T","A","R"],targetWords:["STAR"]},{letters:["G","L","O","W"],targetWords:["GLOW"]},{letters:["B","E","A","M"],targetWords:["BEAM"]},{letters:["V","I","E","W"],targetWords:["VIEW"]},{letters:["C","Y","B","E","R"],targetWords:["CYBER","BYE","BEER"]}]},{id:"library",name:"Ancient Library",levels:[{letters:["B","O","O","K"],targetWords:["BOOK"]},{letters:["R","E","A","D"],targetWords:["READ","ERA","RED"]},{letters:["P","A","P","E","R"],targetWords:["PAPER","APE","PER","ARE"]},{letters:["I","N","K"],targetWords:["INK"]},{letters:["P","E","N"],targetWords:["PEN"]},{letters:["S","H","E","L","F"],targetWords:["SHELF","SELF","SHE"]},{letters:["P","A","G","E"],targetWords:["PAGE","AGE"]},{letters:["T","A","L","E"],targetWords:["TALE","ATE","LET"]},{letters:["K","N","O","W"],targetWords:["KNOW","NOW","OWN"]},{letters:["L","E","A","R","N"],targetWords:["LEARN","NEAR","REAL","EAR","ERA"]}]},{id:"toybox",name:"Block Land",levels:[{letters:["B","L","O","C","K"],targetWords:["BLOCK"]},{letters:["T","O","Y"],targetWords:["TOY"]},{letters:["P","L","A","Y"],targetWords:["PLAY","PAY","LAP"]},{letters:["C","A","R"],targetWords:["CAR"]},{letters:["B","A","B","Y"],targetWords:["BABY","BAY"]},{letters:["D","O","L","L"],targetWords:["DOLL"]},{letters:["K","I","T","E"],targetWords:["KITE"]},{letters:["G","A","M","E"],targetWords:["GAME","AGE","GEM"]},{letters:["B","E","A","R"],targetWords:["BEAR"]},{letters:["F","L","A","G"],targetWords:["FLAG","LAG","GAL"]}]},{id:"farm",name:"Quiet Farm",levels:[{letters:["C","O","W"],targetWords:["COW"]},{letters:["P","I","G"],targetWords:["PIG"]},{letters:["H","E","N"],targetWords:["HEN"]},{letters:["D","O","G"],targetWords:["DOG"]},{letters:["C","A","T"],targetWords:["CAT"]},{letters:["C","O","R","N"],targetWords:["CORN","NOR","CON"]},{letters:["B","A","R","N"],targetWords:["BARN","BAN","RAN"]},{letters:["P","L","O","W"],targetWords:["PLOW","LOW","OWL"]},{letters:["S","E","E","D"],targetWords:["SEED","SEE"]},{letters:["F","I","E","L","D"],targetWords:["FIELD","FILE","DIE","ELD"]}]},{id:"bamboo",name:"Bamboo Forest",levels:[{letters:["Z","E","N"],targetWords:["ZEN"]},{letters:["P","A","N","D","A"],targetWords:["PANDA","AND","NAP","PAN"]},{letters:["L","E","A","F"],targetWords:["LEAF","ALE","ELF"]},{letters:["T","R","E","E"],targetWords:["TREE"]},{letters:["B","A","M","B","O","O"],targetWords:["BAMBOO","BOO","MOB"]},{letters:["G","L","O","W"],targetWords:["GLOW"]},{letters:["M","I","S","T"],targetWords:["MIST"]},{letters:["W","I","L","D"],targetWords:["WILD"]},{letters:["F","E","E","D"],targetWords:["FEED"]},{letters:["S","I","L","E","N","T"],targetWords:["SILENT","LINE","LENT","SENT","TEN"]}]},{id:"station",name:"Star Station",levels:[{letters:["S","T","A","R"],targetWords:["STAR","RAT","ART"]},{letters:["S","H","I","P"],targetWords:["SHIP","HIP","SIP"]},{letters:["M","O","O","N"],targetWords:["MOON","MOO"]},{letters:["V","O","I","D"],targetWords:["VOID"]},{letters:["A","T","O","M"],targetWords:["ATOM"]},{letters:["C","O","M","E","T"],targetWords:["COMET","MET","COT"]},{letters:["S","O","L","A","R"],targetWords:["SOLAR","OAR"]},{letters:["P","L","A","N","E","T"],targetWords:["PLANET","PLANE","PANT","TEN"]},{letters:["O","R","B","I","T"],targetWords:["ORBIT","BIT","ROT"]},{letters:["G","A","L","A","X","Y"],targetWords:["GALAXY","GAY","LAY"]}]}].map(t=>({id:t.id,name:t.name,themeColorVar:`--world-${t.id}-bg`,isGenerated:!1,levels:t.levels.map((s,n)=>({id:`${t.id}-${n+1}`,worldId:t.id,levelInWorld:n+1,displayName:`Level ${n+1}`,letters:s.letters,targetWords:s.targetWords,unlocked:!1,completed:!1}))}));return e.length>0&&e[0].levels.length>0&&(e[0].levels[0].unlocked=!0),e}function Js(){var s;const r=localStorage.getItem("wordFinderDeluxeProgress");let e=Zs();const t={soundEffectsEnabled:!0,musicEnabled:!0,adsRemoved:!1,purchasedThemes:["default"],currentThemeId:"default"};if(r)try{const n=JSON.parse(r);if(u=n.coins||100,Y=n.bonusWordsFound||[],p={...t,...n.settings||{}},n.gameRoadmap&&Array.isArray(n.gameRoadmap)){const o=n.gameRoadmap,l=new Map;o.forEach(i=>i.levels.forEach(c=>l.set(c.id,{unlocked:c.unlocked,completed:c.completed}))),e.forEach(i=>{i.levels.forEach(c=>{const d=l.get(c.id);d&&(c.unlocked=d.unlocked,c.completed=d.completed)})})}E=e}catch{E=e}else E=e,p=t;E.length>0&&E[0].levels.length>0&&(E.some(n=>n.levels.some(o=>o.unlocked))||(E[0].levels[0].unlocked=!0)),console.log("loadProgress complete. gameRoadmap length:",E.length),console.log("First world:",(s=E[0])==null?void 0:s.name),W(),tr(),Tt(p.currentThemeId)}const il=[{id:"coins_240",type:"currency",name:"Small Coin Pack",description:"A handful of coins",coins:240,price:.99,priceDisplay:"$0.99",image:"https://api.iconify.design/solar:coins-bold-duotone.svg?color=%23f39c12"},{id:"coins_720",type:"currency",name:"Medium Coin Pack",description:"A good stack of coins",coins:720,price:2.99,priceDisplay:"$2.99",image:"https://api.iconify.design/solar:banknote-2-bold-duotone.svg?color=%23f39c12"},{id:"coins_1340",type:"currency",name:"Large Coin Pack",bonus:"10% Bonus!",coins:1340,price:4.99,priceDisplay:"$4.99",image:"https://api.iconify.design/solar:safe-2-bold-duotone.svg?color=%23f39c12"},{id:"coins_2940",type:"currency",name:"Huge Coin Pack",bonus:"20% Bonus!",coins:2940,price:9.99,priceDisplay:"$9.99",image:"https://api.iconify.design/solar:treasure-chest-bold-duotone.svg?color=%23f39c12"},{id:"bundle_super",type:"bundle",name:"Super Bundle",items:[{name:"Coins",quantity:1340},{name:"Hints",quantity:2},{name:"Shuffles",quantity:2}],price:5.99,priceDisplay:"$5.99",image:"https://api.iconify.design/fluent-emoji-flat:wrapped-gift.svg"},{id:"bundle_mega",type:"bundle",name:"Mega Bundle",items:[{name:"Coins",quantity:2940},{name:"Hints",quantity:5},{name:"Shuffles",quantity:5}],price:12.99,priceDisplay:"$12.99",image:"https://api.iconify.design/fluent-emoji-flat:party-popper.svg"},{id:"remove_ads",type:"special",name:"Remove Ads",description:"Enjoy an ad-free experience!",price:5.99,priceDisplay:"$5.99",image:"https://api.iconify.design/solar:videocamera-record-bold-duotone.svg?color=%23e74c3c&rotate=15deg&flip=horizontal",action:()=>{p.adsRemoved=!0,N(),a("Ads Removed! Enjoy the game.",!0)}},{id:"theme_dark",type:"theme",name:"Midnight Mode",description:"Sleek dark theme",price:1.99,priceDisplay:"$1.99",image:"https://api.iconify.design/solar:moon-bold-duotone.svg?color=%239b59b6",themeId:"dark"},{id:"theme_nature",type:"theme",name:"Forest Vibes",description:"Relaxing green theme",price:1.99,priceDisplay:"$1.99",image:"https://api.iconify.design/solar:leaf-bold-duotone.svg?color=%232ecc71",themeId:"nature"},{id:"theme_ocean",type:"theme",name:"Deep Ocean",description:"Calming blue theme",price:1.99,priceDisplay:"$1.99",image:"https://api.iconify.design/solar:waterdrops-bold-duotone.svg?color=%233498db",themeId:"ocean"}];function Ct(){Yt.innerHTML="",Vt.innerHTML="",jt.innerHTML="",_t.innerHTML="";const r=document.createElement("div");r.className="shop-item-grid",Yt.appendChild(r);const e=document.createElement("div");e.className="shop-item-grid",Vt.appendChild(e);const t=document.createElement("div");t.className="shop-item-grid",_t.appendChild(t);const s=document.createElement("div");s.className="shop-item-grid",jt.appendChild(s),il.forEach(n=>{const o=document.createElement("div");o.className="shop-item",o.innerHTML=`
            <div class="shop-item-image-container">
                <img src="${n.image}" alt="${n.name}" class="shop-item-image">
            </div>
            <div class="shop-item-details">
                <h4 class="shop-item-name">${n.name}</h4>
                ${n.description?`<p class="shop-item-description">${n.description}</p>`:""}
                ${n.bonus?`<p class="shop-item-bonus">${n.bonus}</p>`:""}
                ${n.items?`<div class="shop-item-bundle-contents">${n.items.map(i=>`<span>${i.quantity} ${i.name}</span>`).join("")}</div>`:""}
            </div>
            <div class="shop-item-action">
                ${n.type==="theme"&&p.purchasedThemes.includes(n.themeId)?p.currentThemeId===n.themeId?'<button class="shop-price-button" disabled>Active</button>':`<button class="shop-price-button apply-theme-btn" data-theme-id="${n.themeId}">Apply</button>`:`<button class="shop-price-button" data-item-id="${n.id}">${n.priceDisplay}</button>`}
            </div>
        `;const l=o.querySelector(".shop-price-button");l.classList.contains("apply-theme-btn")?l.addEventListener("click",()=>{Tt(n.themeId),N(),Ct()}):l.disabled||l.addEventListener("click",()=>al(n)),n.type==="currency"?r.appendChild(o):n.type==="bundle"?e.appendChild(o):n.type==="theme"?s.appendChild(o):n.type==="special"&&t.appendChild(o)})}function al(r){r.coins&&(u+=r.coins,a(`${r.coins} coins added!`,!0,!1,2e3)),r.items&&(r.items.forEach(e=>{e.name.toLowerCase()==="coins"&&e.quantity&&(u+=e.quantity)}),a(`${r.name} purchased! Items added.`,!0,!1,2e3)),r.action&&r.action(),r.type==="theme"&&r.themeId&&(p.purchasedThemes.includes(r.themeId)||(p.purchasedThemes.push(r.themeId),a(`${r.name} Unlocked!`,!0),Tt(r.themeId))),z(),N(),Ct()}function Tt(r){p.currentThemeId=r;const e=document.documentElement;r==="default"?(e.style.setProperty("--background-gradient-start","#72c2ff"),e.style.setProperty("--background-gradient-end","#3a7bd5"),e.style.setProperty("--letter-button-bg","#f39c12"),e.style.setProperty("--letter-button-border","#e67e22"),document.body.style.backgroundImage="url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1200&q=80')"):r==="dark"?(e.style.setProperty("--background-gradient-start","#2c3e50"),e.style.setProperty("--background-gradient-end","#000000"),e.style.setProperty("--letter-button-bg","#8e44ad"),e.style.setProperty("--letter-button-border","#5b2c6f"),document.body.style.backgroundImage="url('https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?auto=format&fit=crop&w=1200&q=80')"):r==="nature"?(e.style.setProperty("--background-gradient-start","#2ecc71"),e.style.setProperty("--background-gradient-end","#27ae60"),e.style.setProperty("--letter-button-bg","#d35400"),e.style.setProperty("--letter-button-border","#a04000"),document.body.style.backgroundImage="url('https://images.unsplash.com/photo-1448375240586-dfd8f3793371?auto=format&fit=crop&w=1200&q=80')"):r==="ocean"&&(e.style.setProperty("--background-gradient-start","#3498db"),e.style.setProperty("--background-gradient-end","#2980b9"),e.style.setProperty("--letter-button-bg","#e74c3c"),e.style.setProperty("--letter-button-border","#c0392b"),document.body.style.backgroundImage="url('https://images.unsplash.com/photo-1505118380757-91f5f5632de0?auto=format&fit=crop&w=1200&q=80')")}function is(){Ct(),z(),Se.classList.remove("hidden");const r=xe.querySelector(".shop-tab-button");r&&Qs(r.dataset.tab||"currency")}function as(){Se.classList.add("hidden")}function Qs(r){var e,t;xe.querySelectorAll(".shop-tab-button").forEach(s=>s.classList.remove("active")),document.querySelectorAll(".shop-tab-content").forEach(s=>s.classList.remove("active")),(e=xe.querySelector(`.shop-tab-button[data-tab="${r}"]`))==null||e.classList.add("active"),(t=document.getElementById(`shop-tab-${r}`))==null||t.classList.add("active")}function Te(){er(),X.classList.remove("hidden")}function ht(){X.classList.add("hidden")}function er(){pt.checked=p.soundEffectsEnabled,Et.checked=p.musicEnabled}function tr(){er(),g.setEnabled(p.soundEffectsEnabled)}function cs(){p.soundEffectsEnabled=pt.checked,p.musicEnabled=Et.checked,g.setEnabled(p.soundEffectsEnabled),console.log("Settings saved:",p),N(),tr()}function cl(){confirm("Are you sure you want to reset all your progress? This cannot be undone!")&&(localStorage.removeItem("wordFinderDeluxeProgress"),u=100,Y=[],E=Zs(),p={soundEffectsEnabled:!0,musicEnabled:!0,adsRemoved:!1,purchasedThemes:["default"],currentThemeId:"default"},V=0,Js(),He(),ht(),a("Progress has been reset.",!0,!1,2500))}function dl(){Or.forEach(t=>{t.addEventListener("click",()=>{var n;const s=t.getAttribute("data-game");if(s==="wordslide")He();else if(s==="wordle")jn();else if(s==="spelling-bee")Jn();else if(s==="connections")to();else if(s==="strands")lo();else if(s==="letter-boxed")io();else if(s==="sudoku")uo();else if(s==="tiles")mo();else switch(s){case"yahtzee":vo();break;case"liar-dice":Mo();break;case"zanzibar":Uo();break;case"lockin":Vo();break;case"pips":go();break;case"lrc":fo();break;case"farkle":es();break;case"sevens":Ys();break;case"threes":Eo();break;case"solitaire":jo();break;case"cribbage":_o();break;default:a(`${(n=t.querySelector(".game-title"))==null?void 0:n.textContent} - Coming Soon!`,!1,!1,2e3)}})}),bn.addEventListener("click",tl),Rn.addEventListener("click",sl),Bn.addEventListener("click",rl),kn.addEventListener("click",nl),An.addEventListener("click",He),Cn.addEventListener("click",Te),Nn.addEventListener("click",os),Gn.addEventListener("click",is),kr.addEventListener("click",h),Dr.addEventListener("click",Te),Nr.addEventListener("click",h),Mr.addEventListener("click",Qn),Kr.addEventListener("click",eo),Hr.addEventListener("click",Xt),Fr.addEventListener("click",Zt),Ur.addEventListener("click",Jt),zr.addEventListener("click",h),Vr.addEventListener("click",ro),jr.addEventListener("click",no),Ss.addEventListener("click",oo),qr.addEventListener("click",()=>a("Select 4 related words and press Submit!",!0)),_r.addEventListener("click",h),Zr.addEventListener("click",()=>{u>=50?(u-=50,W(),a("Hint: Focus on the theme!",!0)):a("Not enough coins! (50 required)",!1)}),Jr.addEventListener("click",h),en.addEventListener("click",co),tn.addEventListener("click",ao),sn.addEventListener("click",()=>a("Connect letters on different sides to make words! Use all letters to win.",!0)),nn.addEventListener("click",h),an.addEventListener("click",Te),cn.addEventListener("click",h),hn.addEventListener("click",h),gn.addEventListener("click",h),be.addEventListener("click",()=>{j&&(j.roll(),yt(!0))}),En.addEventListener("click",h),Re.addEventListener("click",()=>{if(f){const t=f.getState();if(t.farkled){es();return}A.length>0?f.holdDice(A).valid?(A=[],f.roll().farkle?(G(),a("FARKLE! ðŸ’¥",!1,!1,2e3)):G()):(a("Selection doesn't score!",!1),G()):t.turnScore>0?(f.roll().farkle&&a("FARKLE! ðŸ’¥",!1,!1,2e3),G()):a("Select dice to score first.",!1)}}),Be.addEventListener("click",()=>{if(f)if(A.length>0)if(f.holdDice(A).valid){A=[];const s=f.stop();a(`Banked ${s} points!`,!0),f.roll().farkle&&a("FARKLE! (On new turn)",!1,!1,2e3),G()}else a("Selection doesn't score!",!1);else if(f.getState().turnScore>0){const s=f.stop();a(`Banked ${s} points!`,!0),f.roll(),G()}else a("No points to bank!",!1)}),yn.addEventListener("click",h),ke.addEventListener("click",()=>{_&&(_.roll(),Ue())}),ie.addEventListener("click",()=>{if(_){if(P.length===0){a("Select dice summing to 7 first!",!1);return}const t=_.removeDice(P);t.success?(P=[],Ue()):a(t.message||"Invalid move",!1)}}),Wn.addEventListener("click",h),De.addEventListener("click",()=>{if(O)if(O.getState().gameOver)O.reset(),O.roll(),Fe();else{const s=O.roll();!s.success&&s.message&&a(s.message,!1),Fe()}}),On.addEventListener("click",h),ln.querySelectorAll(".numpad-btn").forEach(t=>{t.addEventListener("click",()=>{const s=parseInt(t.getAttribute("data-val"));ho(s)})}),at.addEventListener("click",()=>tt(at.querySelector(".cell-content").textContent)),ct.forEach(t=>{t.addEventListener("click",()=>tt(t.querySelector(".cell-content").textContent))}),ps.querySelectorAll(".key-button").forEach(t=>{t.addEventListener("click",()=>{const s=t.getAttribute("data-key");s&&Ce(s)})}),document.addEventListener("keydown",t=>{mt.classList.contains("hidden")?gt.classList.contains("hidden")||(t.key==="Enter"?Jt():t.key==="Backspace"?Xt():t.key===" "?Zt():t.key.length===1&&/[a-zA-Z]/.test(t.key)&&tt(t.key)):t.key==="Enter"?Ce("ENTER"):t.key==="Backspace"?Ce("BACKSPACE"):t.key.length===1&&/[a-zA-Z]/.test(t.key)&&Ce(t.key.toUpperCase())}),Ar.addEventListener("click",()=>{a("Welcome to the Roadmap!",!0,!1,1500)}),Cr.addEventListener("click",Te),Tr.addEventListener("click",os),Br.addEventListener("click",is),C.addEventListener("click",()=>{const t=B.timeoutId;t&&clearTimeout(t),B.classList.add("hidden"),C.nextAction&&(C.nextAction(),C.nextAction=null)}),Hn.addEventListener("click",ls),ae.addEventListener("click",t=>{t.target===ae&&ls()}),Fn.addEventListener("click",ll),Un.addEventListener("click",as),Se.addEventListener("click",t=>{t.target===Se&&as()}),xe.querySelectorAll(".shop-tab-button").forEach(t=>{t.addEventListener("click",s=>Qs(s.currentTarget.dataset.tab))}),$n.addEventListener("click",ht),X.addEventListener("click",t=>{t.target===X&&ht()}),pt.addEventListener("change",cs),Et.addEventListener("change",cs),zn.addEventListener("click",cl),window.addEventListener("resize",()=>{qe.classList.contains("hidden")||(vt(),Ze(),Je())})}function ul(){try{console.log("Main function starting..."),console.log("levelSelectionScreen:",pe),console.log("settingsModal:",X),X.classList.add("hidden"),ae.classList.add("hidden"),Se.classList.add("hidden"),console.log("Modals hidden"),console.log("Loading progress..."),Js(),console.log("Attaching event listeners..."),dl(),console.log("Showing roadmap screen..."),h(),localStorage.getItem("bonusTipShown")==="true"&&ft.classList.add("hidden"),console.log("Main function complete!"),console.log("levelSelectionScreen classes:",pe.className),console.log("settingsModal classes:",X.className),console.log("gameRoadmap length:",E.length);const r=document.createElement("div");r.style.cssText="position:fixed;top:10px;right:10px;background:rgba(0,0,0,0.8);color:lime;padding:10px;z-index:9999;font-family:monospace;font-size:12px;",r.innerHTML=`
            <div>Roadmap Length: ${E.length}</div>
            <div>Level Screen Hidden: ${pe.classList.contains("hidden")}</div>
            <div>Settings Hidden: ${X.classList.contains("hidden")}</div>
        `,document.body.appendChild(r)}catch(r){console.error("Error in main():",r),document.body.innerHTML=`<div style="color: white; padding: 2rem; text-align: center;">
            <h1>Error Loading Game</h1>
            <p>${r}</p>
            <p>Please check the console for details.</p>
        </div>`}}document.addEventListener("DOMContentLoaded",ul);
