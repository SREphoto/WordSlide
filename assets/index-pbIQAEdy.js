(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();class Yt{constructor(){this.audioContext=null,this.enabled=!0;try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch{console.error("Web Audio API not supported")}}setEnabled(e){var t;this.enabled=e,e&&((t=this.audioContext)==null?void 0:t.state)==="suspended"&&this.audioContext.resume()}playTone(e,t,r,n=0,o=.1){if(!this.enabled||!this.audioContext)return;this.audioContext.state==="suspended"&&this.audioContext.resume().catch(l=>console.error("Audio resume failed",l));const a=this.audioContext.createOscillator(),d=this.audioContext.createGain();a.type=t,a.frequency.setValueAtTime(e,this.audioContext.currentTime+n),d.gain.setValueAtTime(o,this.audioContext.currentTime+n),d.gain.exponentialRampToValueAtTime(.001,this.audioContext.currentTime+n+r),a.connect(d),d.connect(this.audioContext.destination),a.start(this.audioContext.currentTime+n),a.stop(this.audioContext.currentTime+n+r)}playClick(){this.playTone(400,"sine",.1,0,.05)}playSelect(){this.playTone(600,"sine",.1,0,.05)}playConnect(){this.playTone(800,"sine",.08,0,.05)}playSuccess(){!this.enabled||!this.audioContext||(this.playTone(523.25,"sine",.1,0,.1),this.playTone(659.25,"sine",.3,.1,.1))}playBonus(){!this.enabled||!this.audioContext||(this.playTone(880,"sine",.1,0,.1),this.playTone(1100,"sine",.2,.1,.1))}playError(){!this.enabled||!this.audioContext||this.playTone(150,"sawtooth",.2,0,.08)}playLevelComplete(){!this.enabled||!this.audioContext||(this.playTone(523.25,"sine",.2,0,.1),this.playTone(659.25,"sine",.2,.15,.1),this.playTone(783.99,"sine",.2,.3,.1),this.playTone(1046.5,"sine",.6,.45,.1))}}class zt{constructor(){this.words=new Set,this.isLoaded=!1,this.loadDictionary()}async loadDictionary(){try{const e=await fetch("https://raw.githubusercontent.com/first20hours/google-10000-english/master/20k.txt");if(!e.ok)throw new Error("Failed to load dictionary");(await e.text()).split(`
`).forEach(r=>{const n=r.trim().toUpperCase();n.length>=2&&this.words.add(n)}),this.isLoaded=!0,console.log(`Dictionary loaded with ${this.words.size} words.`)}catch(e){console.error("Error loading dictionary:",e),this.addFallbackWords(),this.isLoaded=!0}}addFallbackWords(){["THE","AND","FOR","ARE","BUT","NOT","YOU","ALL","ANY","CAN","HAD","HAS","HIM","HIS","HOW","INK","MAN","NEW","NOW","OLD","ONE","OUT","PUT","RUN","SAY","SHE","SIT","SON","TOO","USE","WAS","WAY","WHO","WHY","WIN","YES","YET","ZOO"].forEach(t=>this.words.add(t))}isValid(e){return this.isLoaded?this.words.has(e.toUpperCase()):!0}get isReady(){return this.isLoaded}getAllWords(){return Array.from(this.words)}}class _t{constructor(e){this.validWords=new Set(e.map(t=>t.toUpperCase())),this.state=this.initializeGame()}initializeGame(){const e=Array.from(this.validWords).filter(r=>r.length===5);return{targetWord:e[Math.floor(Math.random()*e.length)],currentRow:0,currentGuess:"",guesses:[],gameOver:!1,won:!1}}addLetter(e){return this.state.gameOver||this.state.currentGuess.length>=5?!1:(this.state.currentGuess+=e.toUpperCase(),!0)}deleteLetter(){return this.state.gameOver||this.state.currentGuess.length===0?!1:(this.state.currentGuess=this.state.currentGuess.slice(0,-1),!0)}submitGuess(){if(this.state.gameOver)return{success:!1,message:"Game is over!"};if(this.state.currentGuess.length!==5)return{success:!1,message:"Word must be 5 letters!"};if(!this.validWords.has(this.state.currentGuess))return{success:!1,message:"Not a valid word!"};const e=this.evaluateGuess(this.state.currentGuess,this.state.targetWord);this.state.guesses.push(this.state.currentGuess);const t=this.state.currentGuess===this.state.targetWord,r=this.state.currentRow>=5&&!t;return(t||r)&&(this.state.gameOver=!0,this.state.won=t),this.state.currentRow++,this.state.currentGuess="",{success:!0,result:e,message:t?"Correct! ðŸŽ‰":r?`Game Over! Word was: ${this.state.targetWord}`:void 0}}evaluateGuess(e,t){const r=[],n=t.split(""),o=e.split(""),a=new Array(5).fill(!1);for(let d=0;d<5;d++)o[d]===n[d]&&(r[d]={letter:o[d],state:"correct"},a[d]=!0);for(let d=0;d<5;d++){if(r[d])continue;const l=n.findIndex((m,L)=>m===o[d]&&!a[L]);l!==-1?(r[d]={letter:o[d],state:"present"},a[l]=!0):r[d]={letter:o[d],state:"absent"}}return r}getState(){return{...this.state}}reset(){this.state=this.initializeGame()}}class Xt{constructor(e){this.centerLetter="",this.outerLetters=[],this.allValidWords=new Set,this.foundWords=new Set,this.dictionary=new Set(e.map(t=>t.toUpperCase())),this.initializeGame()}initializeGame(){const e=Array.from(this.dictionary).filter(t=>new Set(t.split("")).size===7&&t.length>=7);if(e.length===0){const t="HONEYED".split("");this.setupLetters(t)}else{const t=e[Math.floor(Math.random()*e.length)],r=Array.from(new Set(t.split("")));this.setupLetters(r)}}setupLetters(e){const t=e.sort(()=>Math.random()-.5);this.centerLetter=t[0],this.outerLetters=t.slice(1),this.allValidWords.clear(),this.dictionary.forEach(r=>{this.isValidForSet(r)&&this.allValidWords.add(r)})}isValidForSet(e){if(e.length<4||!e.includes(this.centerLetter))return!1;const t=new Set([this.centerLetter,...this.outerLetters]);for(const r of e)if(!t.has(r))return!1;return!0}submitWord(e){const t=e.toUpperCase();if(t.length<4)return{success:!1,message:"Too short"};if(!t.includes(this.centerLetter))return{success:!1,message:"Missing center letter"};if(this.foundWords.has(t))return{success:!1,message:"Already found"};if(!this.allValidWords.has(t))return{success:!1,message:"Not in word list"};this.foundWords.add(t);const r=this.calculateWordScore(t);let n="Nice!";return new Set(t.split("")).size===7&&(n="Pangram! ðŸ"),{success:!0,message:n,score:r}}calculateWordScore(e){if(e.length===4)return 1;let t=e.length;return new Set(e.split("")).size===7&&(t+=7),t}getState(){const e=Array.from(this.foundWords).reduce((r,n)=>r+this.calculateWordScore(n),0),t=Array.from(this.allValidWords).reduce((r,n)=>r+this.calculateWordScore(n),0);return{centerLetter:this.centerLetter,outerLetters:this.outerLetters,foundWords:Array.from(this.foundWords).sort(),totalWords:this.allValidWords.size,maxScore:t,currentScore:e,rank:this.getRank(e,t)}}getRank(e,t){const r=e/t;return r===0?"Beginner":r<.05?"Good Start":r<.1?"Moving Up":r<.2?"Good":r<.3?"Solid":r<.4?"Nice":r<.5?"Great":r<.7?"Amazing":r<.9?"Genius":"Queen Bee"}shuffleOuterLetters(){this.outerLetters.sort(()=>Math.random()-.5)}}const ze=[[{id:"c1",description:"WET WEATHER",words:["RAIN","MIST","DEW","FOG"],level:0},{id:"c2",description:"TYPES OF SHOES",words:["BOOT","PUMP","SNEAKER","MULE"],level:1},{id:"c3",description:"UNITS OF MEASURE",words:["INCH","OUNCE","PINT","FOOT"],level:2},{id:"c4",description:"___ OF THE WORLD",words:["END","TOP","REST","WAY"],level:3}],[{id:"d1",description:"PARTS OF A TREE",words:["ROOT","LEAF","BRANCH","TRUNK"],level:0},{id:"d2",description:"CHESS PIECES",words:["KING","QUEEN","ROOK","BISHOP"],level:1},{id:"d3",description:"CLEANING TOOLS",words:["MOP","BROOM","SPONGE","DUSTER"],level:2},{id:"d4",description:"R-WORDS IN MUSIC",words:["RAP","ROCK","REEL","RAG"],level:3}]];class jt{constructor(){this.grid=[],this.selectedWords=[],this.foundCategories=[],this.mistakesRemaining=4,this.gameOver=!1,this.won=!1;const e=ze[Math.floor(Math.random()*ze.length)];this.categories=e,this.initializeGrid()}initializeGrid(){this.grid=this.categories.flatMap(e=>e.words).sort(()=>Math.random()-.5)}toggleWord(e){if(this.gameOver)return!1;const t=this.selectedWords.indexOf(e);if(t>-1)this.selectedWords.splice(t,1);else if(this.selectedWords.length<4)this.selectedWords.push(e);else return!1;return!0}submitSelection(){if(this.selectedWords.length!==4)return{success:!1,message:"Select 4 words"};const e=this.categories.find(t=>this.selectedWords.every(r=>t.words.includes(r)));if(e)return this.foundCategories.push(e),this.grid=this.grid.filter(t=>!this.selectedWords.includes(t)),this.selectedWords=[],this.foundCategories.length===4&&(this.gameOver=!0,this.won=!0),{success:!0,match:e,message:"Perfect!"};{let t=0;return this.categories.forEach(r=>{if(this.foundCategories.includes(r))return;const n=r.words.filter(o=>this.selectedWords.includes(o)).length;n>t&&(t=n)}),this.mistakesRemaining--,this.mistakesRemaining===0&&(this.gameOver=!0),{success:!1,message:t===3?"One away...":"Next time!",isOneAway:t===3}}}getState(){return{grid:this.grid,selectedWords:[...this.selectedWords],foundCategories:[...this.foundCategories],mistakesRemaining:this.mistakesRemaining,gameOver:this.gameOver,won:this.won}}getSolution(){return this.categories}}const _e=[{theme:"WET WEATHER",gridLetters:[["R","A","I","N","Y","D"],["S","T","O","R","M","E"],["F","O","G","G","Y","W"],["M","I","S","T","Y","C"],["L","O","U","D","S","O"],["P","R","E","C","I","L"],["P","I","T","A","T","D"],["I","O","N","S","U","N"]],words:[{word:"RAINY",cells:[[0,0],[0,1],[0,2],[0,3],[0,4]]},{word:"STORM",cells:[[1,0],[1,1],[1,2],[1,3],[1,4]]},{word:"FOGGY",cells:[[2,0],[2,1],[2,2],[2,3],[2,4]]},{word:"MISTY",cells:[[3,0],[3,1],[3,2],[3,3],[3,4]]},{word:"CLOUDS",cells:[[3,5],[4,5],[4,4],[4,3],[4,2],[4,1]]},{word:"PRECIPITATION",cells:[[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[4,5],[3,5],[2,5],[1,5],[0,5],[1,5],[2,5]],isSpangram:!0}]}];class Zt{constructor(){this.foundWords=[],this.spangramFound=!1,this.gameOver=!1;const e=_e[Math.floor(Math.random()*_e.length)];this.theme=e.theme,this.puzzleWords=e.words,this.grid=e.gridLetters.map((t,r)=>t.map((n,o)=>({letter:n,row:r,col:o,isThemeWord:!1,isSpangram:!1,found:!1})))}checkWord(e){if(this.gameOver)return{success:!1};const t=e.map(([n,o])=>this.grid[n][o].letter).join(""),r=this.puzzleWords.find(n=>n.word===t&&!this.foundWords.includes(t));return r?(this.foundWords.push(r.word),r.cells.forEach(([n,o])=>{this.grid[n][o].found=!0,r.isSpangram?(this.grid[n][o].isSpangram=!0,this.spangramFound=!0):this.grid[n][o].isThemeWord=!0}),this.foundWords.length===this.puzzleWords.length&&(this.gameOver=!0),{success:!0,word:r.word,isSpangram:r.isSpangram}):{success:!1}}getState(){return{grid:this.grid,theme:this.theme,foundWords:[...this.foundWords],spangramFound:this.spangramFound,gameOver:this.gameOver}}}class Jt{constructor(e){this.foundWords=[],this.usedLetters=new Set,this.allLetters=new Set,this.currentWord="",this.lastLetter="",this.sides=[["A","B","C"],["D","E","F"],["G","H","I"],["J","K","L"]],this.sides=[["N","I","V"],["E","T","L"],["U","O","Y"],["A","S","G"]],this.sides.forEach(t=>t.forEach(r=>this.allLetters.add(r))),this.dictionary=new Set(e)}addLetter(e){if(e=e.toUpperCase(),!this.allLetters.has(e))return{success:!1,message:"Not in box"};const t=this.sides.findIndex(r=>r.includes(e));if(this.currentWord.length>0){const r=this.currentWord[this.currentWord.length-1],n=this.sides.findIndex(o=>o.includes(r));if(t===n)return{success:!1,message:"Same side"}}else if(this.lastLetter&&e!==this.lastLetter)return{success:!1,message:`Must start with ${this.lastLetter}`};return this.currentWord+=e,{success:!0}}submitWord(){if(this.currentWord.length<3)return{success:!1,message:"Too short"};const e=this.currentWord.toLowerCase();return this.dictionary.has(e)?(this.foundWords.push(this.currentWord),[...this.currentWord].forEach(t=>this.usedLetters.add(t)),this.lastLetter=this.currentWord[this.currentWord.length-1],this.currentWord="",this.usedLetters.size===this.allLetters.size?{success:!0,message:"You used all letters!"}:{success:!0,message:"Nice!"}):{success:!1,message:"Not a word"}}deleteLetter(){this.currentWord.length>0&&(this.currentWord=this.currentWord.slice(0,-1))}getState(){return{sides:this.sides,foundWords:[...this.foundWords],usedLetters:new Set(this.usedLetters),allLetters:new Set(this.allLetters),currentWord:this.currentWord,lastLetter:this.lastLetter,gameOver:this.usedLetters.size===this.allLetters.size}}}class Qt{constructor(e="easy"){this.selectedCell=null,this.mistakes=0,this.gameOver=!1,this.won=!1;const{puzzle:t,solution:r}=this.generatePuzzle(e);this.grid=t,this.solution=r,this.initialGrid=t.map(n=>n.map(o=>o!==0))}generatePuzzle(e){const t=[[5,3,4,6,7,8,9,1,2],[6,7,2,1,9,5,3,4,8],[1,9,8,3,4,2,5,6,7],[8,5,9,7,6,1,4,2,3],[4,2,6,8,5,3,7,9,1],[7,1,3,9,2,4,8,5,6],[9,6,1,5,3,7,2,8,4],[2,8,7,4,1,9,6,3,5],[3,4,5,2,8,6,1,7,9]],r=t.map(a=>[...a]),n=e==="easy"?30:e==="medium"?45:55;let o=0;for(;o<n;){const a=Math.floor(Math.random()*9),d=Math.floor(Math.random()*9);r[a][d]!==0&&(r[a][d]=0,o++)}return{puzzle:r,solution:t}}selectCell(e,t){this.selectedCell={r:e,c:t}}setCellValue(e){if(!this.selectedCell||this.gameOver)return{success:!1};const{r:t,c:r}=this.selectedCell;return this.initialGrid[t][r]?{success:!1}:this.solution[t][r]===e?(this.grid[t][r]=e,this.grid.every(o=>o.every(a=>a!==0))?(this.gameOver=!0,this.won=!0,{success:!0,won:!0}):{success:!0}):(this.mistakes++,this.mistakes>=3?(this.gameOver=!0,{success:!1,mistake:!0,gameOver:!0}):{success:!1,mistake:!0})}getState(){return{grid:this.grid.map(e=>[...e]),initialGrid:this.initialGrid.map(e=>[...e]),solution:this.solution,selectedCell:this.selectedCell?{...this.selectedCell}:null,mistakes:this.mistakes,gameOver:this.gameOver,won:this.won}}}class es{constructor(e=4,t=4){this.selectedTile=null,this.score=0,this.combo=0,this.gameOver=!1,this.grid=Array(e).fill(null).map(()=>Array(t).fill(null).map(()=>this.generateRandomTile()))}generateRandomTile(){const e=["circle","square","triangle","star"],t=["red","blue","green","yellow"];return{shape:e[Math.floor(Math.random()*e.length)],color:t[Math.floor(Math.random()*t.length)],id:Math.random()}}selectTile(e,t){if(this.gameOver||!this.grid[e][t])return{match:!1};if(!this.selectedTile)return this.selectedTile={r:e,c:t},{match:!1};const r=this.grid[this.selectedTile.r][this.selectedTile.c],n=this.grid[e][t];return this.selectedTile.r===e&&this.selectedTile.c===t?(this.selectedTile=null,{match:!1}):r.shape===n.shape||r.color===n.color?(this.grid[this.selectedTile.r][this.selectedTile.c]=this.generateRandomTile(),this.grid[e][t]=this.generateRandomTile(),this.score+=10*(this.combo+1),this.combo++,this.selectedTile=null,{match:!0}):(this.combo=0,this.selectedTile={r:e,c:t},{match:!1})}getState(){return{grid:this.grid.map(e=>[...e]),layers:1,score:this.score,combo:this.combo,selectedTile:this.selectedTile?{...this.selectedTile}:null,gameOver:this.gameOver}}}class ts{constructor(e=4,t=4){this.selectedDie=null,this.moves=0,this.gameOver=!1,this.won=!1,this.grid=Array(e).fill(null).map(()=>Array(t).fill(null).map(()=>({val:Math.floor(Math.random()*6)+1,id:Math.random(),removed:!1})))}selectDie(e,t){if(this.gameOver||!this.grid[e][t]||this.grid[e][t].removed)return{match:!1};if(!this.selectedDie)return this.selectedDie={r:e,c:t},{match:!1};const r=this.grid[this.selectedDie.r][this.selectedDie.c],n=this.grid[e][t];return this.selectedDie.r===e&&this.selectedDie.c===t?(this.selectedDie=null,{match:!1}):r.val+n.val===7?(r.removed=!0,n.removed=!0,this.moves++,this.selectedDie=null,this.grid.every(a=>a.every(d=>!d||d.removed))?(this.gameOver=!0,this.won=!0,{match:!0,won:!0}):{match:!0}):(this.selectedDie={r:e,c:t},{match:!1})}getState(){return{grid:this.grid.map(e=>e.map(t=>t?{...t}:null)),selectedDie:this.selectedDie?{...this.selectedDie}:null,moves:this.moves,gameOver:this.gameOver,won:this.won}}}let g=[],c=null,I=[],E=[],J=!1,T=[],H=[],F=0;const Xe=2,Ce=50,be=25,le={tutorial:"https://images.unsplash.com/photo-1541814120807-6577382d6215?auto=format&fit=crop&w=1200&q=80",kitchen:"https://images.unsplash.com/photo-1556910103-1c02745aae4d?auto=format&fit=crop&w=1200&q=80",forest:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&w=1200&q=80",ocean:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1200&q=80",space:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&w=1200&q=80",desert:"https://images.unsplash.com/photo-1473580044384-7ba9967e16a0?auto=format&fit=crop&w=1200&q=80",arctic:"https://images.unsplash.com/photo-1517783999520-f068d7431a60?auto=format&fit=crop&w=1200&q=80",mountain:"https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=1200&q=80",jungle:"https://images.unsplash.com/photo-1516026672322-bc52d61a55d5?auto=format&fit=crop&w=1200&q=80",city:"https://images.unsplash.com/photo-1514565131-fce0801e5785?auto=format&fit=crop&w=1200&q=80",meadow:"https://images.unsplash.com/photo-1500382017468-9049fed747ef?auto=format&fit=crop&w=1200&q=80",volcano:"https://images.unsplash.com/photo-1462331940025-496dfbfc7564?auto=format&fit=crop&w=1200&q=80",sky:"https://images.unsplash.com/photo-1534067783941-51c9c23ecefd?auto=format&fit=crop&w=1200&q=80",crystal:"https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1200&q=80",cyber:"https://images.unsplash.com/photo-1550745165-9bc0b252726f?auto=format&fit=crop&w=1200&q=80",ruins:"https://images.unsplash.com/photo-1541013369527-dc20399d985a?auto=format&fit=crop&w=1200&q=80",steam:"https://images.unsplash.com/photo-1534011613143-6c84c1f618fc?auto=format&fit=crop&w=1200&q=80",enchanted:"https://images.unsplash.com/photo-1518531933037-91b2f5f229cc?auto=format&fit=crop&w=1200&q=80",ghost:"https://images.unsplash.com/photo-1509248961158-e54f6934749c?auto=format&fit=crop&w=1200&q=80",sakura:"https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=1200&q=80",mars:"https://images.unsplash.com/photo-1614728894747-a83421e2b9c9?auto=format&fit=crop&w=1200&q=80",viking:"https://images.unsplash.com/photo-1533154683836-84ea7a0bc310?auto=format&fit=crop&w=1200&q=80",pirate:"https://images.unsplash.com/photo-1519114056088-b877fe073a5e?auto=format&fit=crop&w=1200&q=80",candy:"https://images.unsplash.com/photo-1533900298318-6b8da08a523e?auto=format&fit=crop&w=1200&q=80",underground:"https://images.unsplash.com/photo-1508197145814-0cc040ca392b?auto=format&fit=crop&w=1200&q=80",safari:"https://images.unsplash.com/photo-1547471080-7cc2032e3dbe?auto=format&fit=crop&w=1200&q=80",circus:"https://images.unsplash.com/photo-1502139214982-d0ad755818d8?auto=format&fit=crop&w=1200&q=80",medieval:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&w=1200&q=80",future:"https://images.unsplash.com/photo-1485827404703-89b55fcc595e?auto=format&fit=crop&w=1200&q=80",library:"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&w=1200&q=80",toybox:"https://images.unsplash.com/photo-1558060370-d644479cb6f7?auto=format&fit=crop&w=1200&q=80",farm:"https://images.unsplash.com/photo-1500937386664-56d1dfef3854?auto=format&fit=crop&w=1200&q=80",bamboo:"https://images.unsplash.com/photo-1516245842810-749e757d5a57?auto=format&fit=crop&w=1200&q=80",station:"https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?auto=format&fit=crop&w=1200&q=80"};let At=0,u=100;const je=10;let h={soundEffectsEnabled:!0,musicEnabled:!0,adsRemoved:!1,purchasedThemes:["default"],currentThemeId:"default"};const k=new Yt,pe=new zt;document.getElementById("app-container");const R=document.getElementById("main-menu-screen"),S=document.getElementById("level-selection-screen"),W=document.getElementById("game-container");document.getElementById("main-settings-button");const ss=document.querySelectorAll(".game-mode-card");document.getElementById("main-menu-coins");const Ze=document.getElementById("roadmap-main-content"),rs=document.getElementById("roadmap-back-button"),ns=document.getElementById("roadmap-settings-button"),os=document.getElementById("roadmap-achievements-button"),as=document.getElementById("roadmap-bonus-badge"),ds=document.getElementById("roadmap-coins-value"),is=document.getElementById("roadmap-shop-button"),G=document.getElementById("wordle-container"),ls=document.getElementById("wordle-back-button"),cs=document.getElementById("wordle-settings-button"),Te=document.getElementById("wordle-grid"),yt=document.getElementById("wordle-keyboard"),us=document.getElementById("current-attempt"),Z=document.getElementById("wordle-message");document.getElementById("wordle-coins-value");const $=document.getElementById("spelling-bee-container"),ms=document.getElementById("bee-back-button"),gs=document.getElementById("bee-found-toggle"),hs=document.getElementById("bee-rank"),fs=document.getElementById("bee-score"),ps=document.getElementById("bee-score-fill"),oe=document.getElementById("bee-message"),Be=document.getElementById("bee-current-word"),Re=document.getElementById("bee-cell-center"),Ne=[document.getElementById("bee-cell-0"),document.getElementById("bee-cell-1"),document.getElementById("bee-cell-2"),document.getElementById("bee-cell-3"),document.getElementById("bee-cell-4"),document.getElementById("bee-cell-5")],Es=document.getElementById("bee-delete"),Ls=document.getElementById("bee-shuffle"),Ws=document.getElementById("bee-enter"),It=document.getElementById("bee-found-words-modal"),Ss=document.getElementById("bee-close-found"),As=document.getElementById("bee-found-count"),Je=document.getElementById("bee-found-list");document.getElementById("bee-coins-value");const j=document.getElementById("connections-container"),ys=document.getElementById("conn-back-button"),Is=document.getElementById("conn-help-button"),Qe=document.getElementById("conn-found-area"),et=document.getElementById("conn-grid"),Os=document.getElementById("mistake-markers"),vs=document.getElementById("conn-shuffle"),Cs=document.getElementById("conn-deselect"),Ot=document.getElementById("conn-submit");document.getElementById("conn-coins-value");const re=document.getElementById("strands-container"),bs=document.getElementById("strands-back-button"),Ts=document.getElementById("strands-theme-text"),ce=document.getElementById("strands-grid"),tt=document.getElementById("strands-current-guess"),st=document.getElementById("strands-found-list"),Bs=document.getElementById("strands-hint-button");document.getElementById("strands-coins-value");const Ee=document.getElementById("letter-boxed-container"),Rs=document.getElementById("boxed-back-button"),rt=document.getElementById("boxed-found-list"),Ns=document.getElementById("boxed-current-word");document.getElementById("boxed-message");const ws=document.getElementById("boxed-delete"),Ds=document.getElementById("boxed-enter"),ks=document.getElementById("boxed-help-button");document.getElementById("boxed-coins-value");const Ms=[document.getElementById("boxed-side-0"),document.getElementById("boxed-side-1"),document.getElementById("boxed-side-2"),document.getElementById("boxed-side-3")],Me=document.getElementById("sudoku-container"),Ps=document.getElementById("sudoku-back-button"),Gs=document.getElementById("sudoku-mistakes");document.getElementById("sudoku-difficulty");const nt=document.getElementById("sudoku-grid"),xs=document.getElementById("sudoku-numpad"),Hs=document.getElementById("sudoku-settings-button");document.getElementById("sudoku-coins-value");const vt=document.getElementById("tiles-container"),Fs=document.getElementById("tiles-back-button"),Us=document.getElementById("tiles-score"),Ks=document.getElementById("tiles-combo"),ot=document.getElementById("tiles-grid");document.getElementById("tiles-coins-value");const $s=document.getElementById("pips-container"),qs=document.getElementById("pips-back-button"),Vs=document.getElementById("pips-moves"),at=document.getElementById("pips-grid");document.getElementById("pips-coins-value");const Ys=document.getElementById("game-back-button"),zs=document.getElementById("game-settings-button"),_s=document.getElementById("level-name-display"),ue=document.getElementById("word-grid-container"),V=document.getElementById("current-word"),Ie=document.getElementById("letter-wheel"),Xs=document.getElementById("shuffle-button"),js=document.getElementById("hint-button"),Zs=document.getElementById("reveal-letter-button"),Js=document.getElementById("mic-button"),Qs=document.getElementById("hint-cost"),er=document.getElementById("reveal-letter-cost"),tr=document.getElementById("game-achievements-button"),sr=document.getElementById("game-bonus-badge"),rr=document.getElementById("game-coins-value"),nr=document.getElementById("game-shop-button"),Oe=document.getElementById("confetti-container");let b=null,v=null,Y="",f=null,O=null,w=[],Q=!1,D=null,M=null,z=null,_=null;const C=document.getElementById("feedback-popup"),or=document.getElementById("feedback-message"),y=document.getElementById("feedback-ok-button"),K=document.getElementById("swipe-line-canvas"),N=K.getContext("2d"),X=document.getElementById("bonus-words-modal"),ar=document.getElementById("close-bonus-modal"),dt=document.getElementById("bonus-words-list"),Pe=document.getElementById("bonus-words-tip"),dr=document.getElementById("bonus-tip-ok-button"),ee=document.getElementById("shop-modal"),ir=document.getElementById("close-shop-modal"),me=document.getElementById("shop-tabs"),it=document.getElementById("shop-tab-currency"),lt=document.getElementById("shop-tab-bundles"),ct=document.getElementById("shop-tab-themes"),ut=document.getElementById("shop-tab-special"),lr=document.getElementById("shop-current-coins"),U=document.getElementById("settings-modal"),cr=document.getElementById("close-settings-modal"),Ge=document.getElementById("sound-toggle"),xe=document.getElementById("music-toggle"),ur=document.getElementById("reset-progress-button");let mr=!1;function i(s,e,t=!1,r=0){or.textContent=s,C.classList.remove("hidden","success","level-complete-popup"),e&&C.classList.add("success"),t&&C.classList.add("level-complete-popup");const n=getComputedStyle(document.documentElement).getPropertyValue(t?"--popup-success-bg":"--popup-button-bg").trim(),o=getComputedStyle(document.documentElement).getPropertyValue("--hint-badge-bg").trim();if(C.style.backgroundColor=e?n||"rgba(76, 175, 80, 0.9)":o||"rgba(244, 67, 54, 0.9)",t){gr();const d=xt(c);d&&d.unlocked?(y.textContent="Next Level",y.nextAction=()=>Pt(d)):(y.textContent="Back to Map",y.nextAction=ge)}else y.textContent="OK",y.nextAction=null;const a=C.timeoutId;a&&clearTimeout(a),r>0?C.timeoutId=setTimeout(()=>{C.classList.contains("hidden")||C.classList.add("hidden")},r):y.nextAction=y.nextAction||(()=>C.classList.add("hidden"))}function gr(){Oe.innerHTML="";for(let s=0;s<50;s++){const e=document.createElement("div");e.classList.add("confetti"),e.style.left=Math.random()*100+"vw",e.style.animationDelay=Math.random()*.5+"s",e.style.backgroundColor=`hsl(${Math.random()*360}, 100%, 70%)`;const t=Math.random()*8+5;e.style.width=t+"px",e.style.height=t+"px",Oe.appendChild(e)}setTimeout(()=>Oe.innerHTML="",3500)}function te(s){if(h.soundEffectsEnabled){if("vibrate"in navigator)switch(s){case"light":navigator.vibrate(20);break;case"success":navigator.vibrate([100,50,100]);break;case"error":navigator.vibrate(200);break}switch(s){case"light":k.playClick();break;case"success":k.playSuccess();break;case"error":k.playError();break}}}function p(){R.classList.remove("hidden"),S.classList.add("hidden"),W.classList.add("hidden"),A()}function ge(){console.log("showRoadmapScreen called. gameRoadmap length:",g.length),Pr(),R.classList.add("hidden"),S.classList.remove("hidden"),W.classList.add("hidden"),A()}function hr(){R.classList.add("hidden"),S.classList.add("hidden"),W.classList.remove("hidden"),Ue(),Se(),A()}function fr(){if(R.classList.add("hidden"),S.classList.add("hidden"),W.classList.add("hidden"),G.classList.remove("hidden"),!b){const s=pe.getAllWords();b=new _t(s)}ie(),A()}function ie(){if(!b)return;Te.innerHTML="";const s=b.getState();for(let e=0;e<6;e++){const t=document.createElement("div");t.classList.add("wordle-row"),t.dataset.row=e.toString();for(let r=0;r<5;r++){const n=document.createElement("div");if(n.classList.add("wordle-tile"),n.dataset.col=r.toString(),e<s.guesses.length){const o=s.guesses[e];n.textContent=o[r],n.classList.add("filled")}else e===s.currentRow&&r<s.currentGuess.length&&(n.textContent=s.currentGuess[r],n.classList.add("filled"));t.appendChild(n)}Te.appendChild(t)}us.textContent=(s.currentRow+1).toString(),pr()}function pr(){if(!b)return;const s=b.getState(),e=new Map;s.guesses.forEach((t,r)=>{const n=Er(t,s.targetWord),o=Te.querySelector(`[data-row="${r}"]`);o&&n.forEach((a,d)=>{const l=o.querySelector(`[data-col="${d}"]`);if(l){l.classList.add(a.state);const m=e.get(a.letter);(!m||a.state==="correct"||a.state==="present"&&m!=="correct")&&e.set(a.letter,a.state)}})}),Lr(e)}function Er(s,e){const t=[],r=e.split(""),n=s.split(""),o=new Array(5).fill(!1);for(let a=0;a<5;a++)n[a]===r[a]&&(t[a]={letter:n[a],state:"correct"},o[a]=!0);for(let a=0;a<5;a++){if(t[a])continue;const d=r.findIndex((l,m)=>l===n[a]&&!o[m]);d!==-1?(t[a]={letter:n[a],state:"present"},o[d]=!0):t[a]={letter:n[a],state:"absent"}}return t}function Lr(s){yt.querySelectorAll(".key-button:not(.key-special)").forEach(t=>{const r=t.getAttribute("data-key");if(r&&s.has(r)){const n=s.get(r);t.classList.remove("correct","present","absent"),t.classList.add(n)}})}function ae(s){if(!b)return;const e=b.getState();if(!e.gameOver)if(s==="ENTER"){const t=b.submitGuess();t.success?(ie(),t.message&&(Z.textContent=t.message,e.won?(u+=50,A(),setTimeout(()=>i("You won! +50 coins",!0,!1,3e3),1e3)):e.gameOver&&setTimeout(()=>i(t.message,!1,!1,3e3),1e3))):(Z.textContent=t.message||"",setTimeout(()=>{Z.textContent=""},2e3))}else s==="BACKSPACE"?(b.deleteLetter(),ie(),Z.textContent=""):(b.addLetter(s),ie(),Z.textContent="")}function Wr(){R.classList.add("hidden"),S.classList.add("hidden"),W.classList.add("hidden"),G.classList.add("hidden"),$.classList.remove("hidden"),v||(v=new Xt(pe.getAllWords())),Ct(),Le()}function Ct(){if(!v)return;const s=v.getState();Re.querySelector(".cell-content").textContent=s.centerLetter,s.outerLetters.forEach((e,t)=>{Ne[t]&&(Ne[t].querySelector(".cell-content").textContent=e)})}function Le(){if(!v)return;const s=v.getState();hs.textContent=s.rank,fs.textContent=s.currentScore.toString();const e=s.currentScore/s.maxScore*100;ps.style.width=`${Math.min(100,e)}%`,Be.textContent=Y,A()}function ve(s){Y+=s.toUpperCase(),Le()}function mt(){Y=Y.slice(0,-1),Le()}function gt(){v&&(v.shuffleOuterLetters(),Ct())}function ht(){var e;if(!v||Y.length===0)return;const s=v.submitWord(Y);s.success?(oe.textContent=s.message,Y="",s.score&&(u+=s.score),Le(),setTimeout(()=>{oe.textContent=""},2e3)):(oe.textContent=s.message,(e=Be.parentElement)==null||e.classList.add("shake"),setTimeout(()=>{var t;oe.textContent="",(t=Be.parentElement)==null||t.classList.remove("shake")},2e3))}function Sr(){if(!v)return;const s=v.getState();As.textContent=s.foundWords.length.toString(),Je.innerHTML="",s.foundWords.forEach(e=>{const t=document.createElement("div");t.classList.add("found-word"),t.textContent=e,Je.appendChild(t)}),It.classList.remove("hidden")}function Ar(){It.classList.add("hidden")}function yr(){R.classList.add("hidden"),S.classList.add("hidden"),W.classList.add("hidden"),G.classList.add("hidden"),$.classList.add("hidden"),j.classList.remove("hidden"),f||(f=new jt),ne(),se()}function ne(){if(!f)return;const s=f.getState();Qe.innerHTML="",s.foundCategories.forEach(e=>{const t=document.createElement("div");t.className=`conn-category-row level-${e.level}`,t.innerHTML=`
            <div class="conn-category-title">${e.description}</div>
            <div class="conn-category-words">${e.words.join(", ")}</div>
        `,Qe.appendChild(t)}),et.innerHTML="",s.grid.forEach(e=>{const t=document.createElement("div");t.className="conn-item",s.selectedWords.includes(e)&&t.classList.add("selected"),t.textContent=e,t.onclick=()=>Ir(e),et.appendChild(t)})}function se(){if(!f)return;const s=f.getState();Os.querySelectorAll(".dot").forEach((t,r)=>{r<s.mistakesRemaining?t.classList.add("filled"):t.classList.remove("filled")}),Ot.disabled=s.selectedWords.length!==4}function Ir(s){f&&(f.toggleWord(s),ne(),se())}function Or(){if(!f)return;f.getState().grid.sort(()=>Math.random()-.5),ne()}function vr(){if(!f)return;const s=f.getState();s.selectedWords=[],ne(),se()}function Cr(){if(!f)return;const s=f.submitSelection();if(s.success){i(s.message,!0),u+=25,ne(),se();const e=f.getState();e.gameOver&&e.won&&setTimeout(()=>{i("Game Complete! ðŸŽ‰",!0),u+=100,p()},1e3)}else i(s.message,!1),se(),f.getState().gameOver&&setTimeout(()=>{f.getSolution(),i("Game Over!",!1),p()},2e3)}function br(){R.classList.add("hidden"),S.classList.add("hidden"),W.classList.add("hidden"),G.classList.add("hidden"),$.classList.add("hidden"),j.classList.add("hidden"),re.classList.remove("hidden"),O||(O=new Zt),bt(),Tt()}function bt(){if(!O)return;const s=O.getState();ce.innerHTML="",s.grid.forEach((e,t)=>{e.forEach((r,n)=>{const o=document.createElement("div");o.className="strands-cell",o.textContent=r.letter,o.dataset.row=t.toString(),o.dataset.col=n.toString(),r.found&&o.classList.add(r.isSpangram?"found-spangram":"found-theme"),o.onmousedown=()=>ft(t,n),o.onmouseenter=()=>Bt(t,n),o.ontouchstart=a=>{a.preventDefault(),ft(t,n)},ce.appendChild(o)})}),Ts.textContent=s.theme}function Tt(){if(!O)return;const s=O.getState();st.innerHTML="",s.foundWords.forEach(e=>{const t=document.createElement("div");t.className="strands-word-chip",e.length>8&&t.classList.add("spangram"),t.textContent=e,st.appendChild(t)}),A()}function ft(s,e){O&&(Q=!0,w=[{r:s,c:e}],He())}function Bt(s,e){if(!Q||!O)return;const t=w[w.length-1];Math.abs(t.r-s)<=1&&Math.abs(t.c-e)<=1&&(w.some(r=>r.r===s&&r.c===e)||(w.push({r:s,c:e}),He()))}function Rt(){if(!Q||!O)return;Q=!1;const s=O.checkWord(w.map(e=>[e.r,e.c]));s.success&&(i(s.isSpangram?"SPANGRAM! âœ¨":"Found!",!0),u+=s.isSpangram?100:25,bt(),Tt(),O.getState().gameOver&&setTimeout(()=>{i("Strands Complete! ðŸ§¶",!0),p()},1e3)),w=[],He()}function He(){ce.querySelectorAll(".strands-cell").forEach(e=>e.classList.remove("selected")),w.forEach(e=>{const t=ce.querySelector(`[data-row="${e.r}"][data-col="${e.c}"]`);t==null||t.classList.add("selected")}),w.length>0?tt.textContent=w.map(e=>O.getState().grid[e.r][e.c].letter).join(""):tt.textContent=""}document.addEventListener("mouseup",Rt);document.addEventListener("touchend",Rt);document.addEventListener("touchmove",s=>{if(!Q)return;const e=s.touches[0],t=document.elementFromPoint(e.clientX,e.clientY);if(t!=null&&t.classList.contains("strands-cell")){const r=parseInt(t.dataset.row),n=parseInt(t.dataset.col);Bt(r,n)}},{passive:!1});function Tr(){R.classList.add("hidden"),S.classList.add("hidden"),W.classList.add("hidden"),G.classList.add("hidden"),$.classList.add("hidden"),j.classList.add("hidden"),re.classList.add("hidden"),Ee.classList.remove("hidden"),D||(D=new Jt(pe.getAllWords())),We()}function We(){if(!D)return;const s=D.getState();s.sides.forEach((e,t)=>{const r=Ms[t],n=r.querySelectorAll(".boxed-letter"),o=r.querySelectorAll(".boxed-dot");e.forEach((a,d)=>{n[d].textContent=a;const l=o[d];s.usedLetters.has(a)?l.classList.add("used"):l.classList.remove("used"),l.onclick=()=>{const m=D.addLetter(a);m.success?We():i(m.message,!1)}})}),Ns.textContent=s.currentWord,rt.innerHTML="",s.foundWords.forEach(e=>{const t=document.createElement("div");t.className="strands-word-chip",t.textContent=e,rt.appendChild(t)}),A()}function Br(){if(!D)return;const s=D.submitWord();s.success?(i(s.message,!0),u+=50,We(),D.getState().gameOver&&setTimeout(()=>{i("Box Completed! ðŸ“¦",!0),p()},1e3)):i(s.message,!1)}function Rr(){D&&(D.deleteLetter(),We())}function Nr(){R.classList.add("hidden"),S.classList.add("hidden"),W.classList.add("hidden"),G.classList.add("hidden"),$.classList.add("hidden"),j.classList.add("hidden"),re.classList.add("hidden"),Ee.classList.add("hidden"),Me.classList.remove("hidden"),M||(M=new Qt("easy")),Fe(),Nt()}function Fe(){if(!M)return;const s=M.getState();nt.innerHTML="",s.grid.forEach((e,t)=>{e.forEach((r,n)=>{var a,d;const o=document.createElement("div");o.className="sudoku-cell",s.initialGrid[t][n]&&o.classList.add("initial"),((a=s.selectedCell)==null?void 0:a.r)===t&&((d=s.selectedCell)==null?void 0:d.c)===n&&o.classList.add("selected"),o.textContent=r!==0?r.toString():"",o.onclick=()=>{M.selectCell(t,n),Fe()},nt.appendChild(o)})})}function Nt(){if(!M)return;const s=M.getState();Gs.textContent=`Mistakes: ${s.mistakes}/3`,A()}function wr(s){if(!M)return;const e=M.setCellValue(s);e.success?(Fe(),e.won&&(i("Sudoku Solved! ðŸ§©",!0),u+=200,setTimeout(p,2e3))):e.mistake&&(i("Mistake!",!1),Nt(),e.gameOver&&(i("Game Over! Too many mistakes.",!1),setTimeout(p,2e3)))}function Dr(){R.classList.add("hidden"),S.classList.add("hidden"),W.classList.add("hidden"),G.classList.add("hidden"),$.classList.add("hidden"),j.classList.add("hidden"),re.classList.add("hidden"),Ee.classList.add("hidden"),Me.classList.add("hidden"),vt.classList.remove("hidden"),z||(z=new es),wt(),Dt()}function wt(){if(!z)return;const s=z.getState();ot.innerHTML="",s.grid.forEach((e,t)=>{e.forEach((r,n)=>{var a,d;const o=document.createElement("div");if(o.className="tile-cell",((a=s.selectedTile)==null?void 0:a.r)===t&&((d=s.selectedTile)==null?void 0:d.c)===n&&o.classList.add("selected"),r){const l=document.createElement("div");l.className=`tile-icon ${r.shape} ${r.color}`,o.appendChild(l)}o.onclick=()=>{z.selectTile(t,n).match&&(i("Match! âœ¨",!0),u+=5),wt(),Dt()},ot.appendChild(o)})})}function Dt(){if(!z)return;const s=z.getState();Us.textContent=s.score.toString(),Ks.textContent=`Combo: ${s.combo}x`,A()}function kr(){R.classList.add("hidden"),S.classList.add("hidden"),W.classList.add("hidden"),G.classList.add("hidden"),$.classList.add("hidden"),j.classList.add("hidden"),re.classList.add("hidden"),Ee.classList.add("hidden"),Me.classList.add("hidden"),vt.classList.add("hidden"),$s.classList.remove("hidden"),_||(_=new ts),kt(),Mt()}function kt(){if(!_)return;const s=_.getState();at.innerHTML="",s.grid.forEach((e,t)=>{e.forEach((r,n)=>{var a,d;const o=document.createElement("div");if(o.className="die-cell",r!=null&&r.removed&&o.classList.add("removed"),((a=s.selectedDie)==null?void 0:a.r)===t&&((d=s.selectedDie)==null?void 0:d.c)===n&&o.classList.add("selected"),r&&!r.removed){o.classList.add(`val-${r.val}`);const l=document.createElement("div");l.className="die-face";for(let m=0;m<9;m++){const L=document.createElement("div");L.className="die-pip",l.appendChild(L)}o.appendChild(l)}o.onclick=()=>{const l=_.selectDie(t,n);l.match&&(i("7! ðŸŽ²",!0),u+=10,l.won&&(i("All Cleared! ðŸ†",!0),u+=100,setTimeout(p,2e3))),kt(),Mt()},at.appendChild(o)})})}function Mt(){if(!_)return;const s=_.getState();Vs.textContent=`Moves: ${s.moves}`,A()}function Mr(s,e){const t=document.createElement("button");t.classList.add("level-gem"),t.setAttribute("aria-label",`${e} - ${s.displayName}${s.completed?" (Completed)":s.unlocked?" (Unlocked)":" (Locked)"}`);const n=document.createElement("span");n.classList.add("material-symbols-outlined","level-gem-icon");const o=document.createElement("span");return o.classList.add("level-gem-number"),o.textContent=String(s.levelInWorld),s.completed?(t.classList.add("completed"),n.textContent="check_circle",t.appendChild(n)):s.unlocked?(t.classList.add("unlocked"),t.appendChild(o),t.addEventListener("click",()=>Pt(s))):(t.classList.add("locked"),n.textContent="lock",t.appendChild(n),t.disabled=!0),t}function Pr(){console.log("renderRoadmap called. gameRoadmap length:",g.length),Ze.innerHTML="",g.forEach(s=>{const e=document.createElement("div");e.classList.add("world-section"),e.id=`world-${s.id}`;const t=getComputedStyle(document.documentElement).getPropertyValue(`--world-${s.id}-bg`).trim()||"var(--primary)";e.style.setProperty("--world-color",t),le[s.id]&&(e.style.backgroundImage=`linear-gradient(rgba(15, 23, 42, 0.7), rgba(15, 23, 42, 0.7)), url(${le[s.id]})`,e.style.backgroundSize="cover");const r=document.createElement("div");r.classList.add("world-info");const n=document.createElement("h2");n.classList.add("world-name-vertical"),n.textContent=s.name,r.appendChild(n);const o=s.levels.filter(l=>l.completed).length,a=document.createElement("p");a.classList.add("world-progress"),a.textContent=`${o}/${s.levels.length}`,r.appendChild(a),e.appendChild(r);const d=document.createElement("div");d.classList.add("levels-grid"),s.levels.forEach(l=>{const m=Mr(l,s.name);d.appendChild(m)}),e.appendChild(d),Ze.appendChild(e)}),console.log("renderRoadmap complete. Worlds rendered:",g.length),A()}function Pt(s){c=s,I=[...s.letters],T=[],At=0;const e=document.getElementById("app-container");e&&le[s.worldId]&&e.style.setProperty("--bg-image",`url(${le[s.worldId]})`),hr(),Gr()}function Gr(){c&&(_s.textContent=`${c.worldId.toUpperCase().replace("GEN-WORLD-","GEN ").replace(/-/g," ")} ${c.levelInWorld}`,Ue(),Se(),Ae(),P(),x(),V.textContent="",Qs.textContent=String(Ce),er.textContent=String(be))}function Ue(){const s=document.getElementById("letter-input-container");s&&s.offsetParent!==null&&(K.width=s.offsetWidth,K.height=s.offsetHeight)}function Se(){if(!W.classList.contains("hidden")){Ie.innerHTML="";const s=Ie.getBoundingClientRect();if(s.width===0||s.height===0)return;const e=s.width/2*.75,t=s.width/2,r=s.height/2;I.forEach((n,o)=>{const a=o/I.length*2*Math.PI-Math.PI/2,d=document.createElement("button");d.classList.add("letter-button"),d.textContent=n,d.dataset.letter=n,d.dataset.originalIndex=String(o),d.setAttribute("aria-label",`Letter ${n}`),Ie.appendChild(d);const l=parseFloat(getComputedStyle(d).width),m=parseFloat(getComputedStyle(d).height),L=t+e*Math.cos(a)-l/2,ye=r+e*Math.sin(a)-m/2;d.style.left=`${L}px`,d.style.top=`${ye}px`;const Ye=K.getBoundingClientRect();d.canvasCenterX=(d.getBoundingClientRect().left+d.getBoundingClientRect().right)/2-Ye.left,d.canvasCenterY=(d.getBoundingClientRect().top+d.getBoundingClientRect().bottom)/2-Ye.top,d.addEventListener("pointerdown",Vt=>xr(Vt,n,o,d))})}}function Ae(){if(!c)return;ue.innerHTML="",[...c.targetWords].sort((e,t)=>e.length!==t.length?e.length-t.length:e.localeCompare(t)).forEach(e=>{const t=document.createElement("div");t.classList.add("word-row"),t.setAttribute("aria-label",`Word to find: ${e.length} letters`);for(let r=0;r<e.length;r++){const n=document.createElement("div");n.classList.add("letter-tile"),T.includes(e)?(n.textContent=e[r],n.classList.add("filled"),n.setAttribute("aria-label",`Letter ${e[r]}, part of found word ${e}`)):(n.classList.add("empty"),n.setAttribute("aria-label",`Empty letter tile, position ${r+1} of ${e.length}`)),t.appendChild(n)}ue.appendChild(t)})}function he(){V.textContent=E.map(s=>s.letter).join("")}function P(){const s=String(u);rr.textContent=s,ds.textContent=s,lr.textContent=s}function A(){P(),$e(F>0&&!X.classList.contains("hidden")?0:F),Ke()}function xr(s,e,t,r){s.preventDefault(),!(J||mr)&&(J=!0,r.classList.add("swiped"),E=[{letter:e,originalIndex:t,element:r,centerX:r.canvasCenterX,centerY:r.canvasCenterY}],he(),we(),document.addEventListener("pointermove",Gt),document.addEventListener("pointerup",fe),document.addEventListener("pointercancel",fe))}function Gt(s){if(!J)return;s.preventDefault();const e=document.elementFromPoint(s.clientX,s.clientY);if(e&&e.classList.contains("letter-button")&&!e.classList.contains("swiped")){const t=e.dataset.letter,r=parseInt(e.dataset.originalIndex,10);e.classList.add("swiped"),E.push({letter:t,originalIndex:r,element:e,centerX:e.canvasCenterX,centerY:e.canvasCenterY}),te("light"),k.playConnect(),he(),we()}else if(e&&e.classList.contains("letter-button")&&e.classList.contains("swiped")&&E.length>1&&E[E.length-2].element===e){const t=E.pop();t&&t.element.classList.remove("swiped"),he(),we()}}function fe(s){if(!J)return;s.preventDefault(),J=!1,document.removeEventListener("pointermove",Gt),document.removeEventListener("pointerup",fe),document.removeEventListener("pointercancel",fe);const e=E.map(t=>t.letter).join("");Hr(e),x()}function we(){if(N.clearRect(0,0,K.width,K.height),!(E.length<2)){N.beginPath(),N.moveTo(E[0].centerX,E[0].centerY);for(let s=1;s<E.length;s++)N.lineTo(E[s].centerX,E[s].centerY);N.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--letter-button-swiped-bg")||"rgba(255, 160, 0, 0.7)",N.lineWidth=10,N.lineCap="round",N.lineJoin="round",N.stroke()}}function x(){E.forEach(s=>s.element.classList.remove("swiped")),E=[],he(),N.clearRect(0,0,K.width,K.height)}function De(s,e){const t=[...e];for(const r of s){const n=t.indexOf(r);if(n===-1)return!1;t.splice(n,1)}return!0}function Hr(s){if(!c)return;const e=s.toUpperCase();if(e.length<(c.letters.length>=3?2:3)&&e.length>0&&c.letters.length>=3&&!(e.length<2&&c.letters.length>=2)){if(e.length<3){i("Word too short (min 3 letters for most puzzles).",!1,!1,1500),q(),x(),V.textContent="";return}}if(e.length===0){x(),V.textContent="";return}if(!De(e,I)){e.length>=(c.letters.length>=3?2:3)&&(i(`"${e}" uses letters not on the wheel.`,!1,!1,1500),q()),x(),V.textContent="";return}if(c.targetWords.includes(e)&&!T.includes(e))T.push(e),At+=e.length*10,u+=e.length,i(`Correct! "${e}" added.`,!0),te("success"),Ae(),P(),B(),c.targetWords.every(r=>T.includes(r))&&(c.completed=!0,Ht(c),B(),i("Level Complete! All words found.",!0,!0),k.playLevelComplete());else if(T.includes(e))i(`"${e}" already found.`,!1,!1,1500),q();else if(De(e,I)&&!H.includes(e)&&!c.targetWords.includes(e)&&e.length>=(c.letters.length>=4?3:2)){if(!pe.isValid(e)){i(`"${e}" is not a valid word.`,!1,!1,1500),q(),x(),V.textContent="";return}H.push(e),u+=Xe,P(),Ke(),$e(F+1),i(`Bonus word: "${e}"! +${Xe} coin.`,!0,!1,2e3),te("success"),k.playBonus(),H.length===1&&localStorage.getItem("bonusTipShown")!=="true"&&qr(),B()}else H.includes(e)?(i(`Bonus "${e}" already found.`,!1,!1,1500),q()):e.length>=(c.letters.length>=4?3:2)&&(i(`"${e}" is not a target word.`,!1,!1,1500),q());V.textContent="",x()}function q(){W.classList.add("screen-shake"),te("error"),setTimeout(()=>W.classList.remove("screen-shake"),300)}function Fr(){if(u<je){i("Not enough coins to shuffle!",!1),q();return}u-=je,P(),B(),k.playSelect();for(let s=I.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[I[s],I[e]]=[I[e],I[s]]}x(),Se(),i("Letters shuffled!",!0,!1,1e3),te("light")}function Ur(){if(!c)return;if(u<Ce){i("Not enough coins for a hint!",!1);return}const s=c.targetWords.filter(n=>!T.includes(n));if(s.length===0){i("No more hints available for this level.",!1,!1,2e3);return}s.sort((n,o)=>n.length-o.length||n.localeCompare(o));const e=s[0];if(!De(e,I)){i(`Cannot provide hint for "${e}" - letters unavailable. (Data issue)`,!1,!1,3e3),console.error(`Hint failed: Word "${e}" from targetWords is not formable with letters: ${I.join(",")}`);return}u-=Ce,P(),T.push(e),Ae(),ue.querySelectorAll(".word-row").forEach(n=>{const o=Array.from(n.querySelectorAll(".letter-tile"));if(o.map(a=>a.dataset.letterContent||"").join(""),o.length===e.length){let a=!0;for(let d=0;d<o.length;d++)if(!o[d].classList.contains("empty")&&o[d].textContent!==e[d]){a=!1;break}a&&T.includes(e)&&o.forEach((d,l)=>{d.textContent===e[l]&&(d.classList.add("hinted-reveal"),setTimeout(()=>d.classList.remove("hinted-reveal"),600))})}}),i(`Hint: "${e}" added!`,!0,!1,2500),B(),c.targetWords.every(n=>T.includes(n))&&(c.completed=!0,Ht(c),B(),i("Level Complete! All words found.",!0,!0))}function Kr(){if(!c)return;if(u<be){i("Not enough coins to reveal a letter!",!1);return}const s=c.targetWords.filter(o=>!T.includes(o));if(s.length===0){i("All words found, no letters to reveal.",!1,!1,2e3);return}const e=[],t=ue.querySelectorAll(".word-row"),r={};if(s.forEach(o=>{r[o.length]||(r[o.length]=[]),r[o.length].push(o)}),t.forEach(o=>{const a=Array.from(o.querySelectorAll(".letter-tile"));r[a.length]&&r[a.length].forEach(l=>{let m=!0;for(let L=0;L<a.length;L++)if(!a[L].classList.contains("empty")&&a[L].textContent!==l[L]){m=!1;break}m&&a.forEach((L,ye)=>{L.classList.contains("empty")&&e.push({tile:L,letter:l[ye]})})})}),e.length===0){i("No more letters to reveal in the current words.",!1,!1,2e3);return}const n=e[Math.floor(Math.random()*e.length)];u-=be,P(),B(),n.tile.textContent=n.letter,n.tile.classList.remove("empty"),n.tile.classList.add("filled","hinted-reveal"),setTimeout(()=>n.tile.classList.remove("hinted-reveal"),600),i("A letter has been revealed!",!0,!1,2e3)}function $r(){{i("Speech recognition not initialized.",!1);return}}function Ke(){dt.innerHTML="",[...H].sort().forEach(e=>{const t=document.createElement("div");t.classList.add("bonus-word-entry"),t.innerHTML=`<span class="material-symbols-outlined">paid</span> ${e}`,dt.appendChild(t)})}function pt(){Ke(),X.classList.remove("hidden"),$e(0)}function Et(){X.classList.add("hidden")}function $e(s){s>0?F=s:F=0,[sr,as].forEach(t=>{F>0?(t.textContent=String(F),t.classList.remove("hidden")):t.classList.add("hidden")})}function qr(){localStorage.getItem("bonusTipShown")!=="true"&&Pe.classList.remove("hidden")}function Vr(){Pe.classList.add("hidden"),localStorage.setItem("bonusTipShown","true")}function xt(s){if(!s)return null;const e=g.find(r=>r.id===s.worldId);if(!e)return null;const t=e.levels.findIndex(r=>r.id===s.id);if(t!==-1&&t<e.levels.length-1)return e.levels[t+1];{const r=g.findIndex(n=>n.id===e.id);if(r!==-1&&r<g.length-1){const n=g[r+1];if(n.levels.length>0)return n.levels[0]}}return null}function Ht(s){const e=xt(s);e&&(e.unlocked=!0)}function B(){const s={coins:u,bonusWordsFound:H,gameRoadmap:g,settings:h};localStorage.setItem("wordFinderDeluxeProgress",JSON.stringify(s))}function Ft(){const e=[{id:"tutorial",name:"Tutorial",levels:[{letters:["A","T"],targetWords:["AT"]},{letters:["C","A","T"],targetWords:["CAT","ACT"]},{letters:["D","O","G"],targetWords:["DOG","GOD"]},{letters:["S","U","N"],targetWords:["SUN"]},{letters:["P","E","N"],targetWords:["PEN"]}]},{id:"kitchen",name:"Culinary Chaos",levels:[{letters:["E","G","G","S"],targetWords:["EGGS","EGG"]},{letters:["P","A","N","S"],targetWords:["PANS","PAN","NAP","SNAP"]},{letters:["C","O","O","K"],targetWords:["COOK"]},{letters:["F","O","R","K"],targetWords:["FORK"]},{letters:["D","I","S","H"],targetWords:["DISH"]},{letters:["M","E","A","L"],targetWords:["MEAL","MALE"]},{letters:["B","A","K","E"],targetWords:["BAKE"]},{letters:["S","O","U","P"],targetWords:["SOUP"]}]},{id:"forest",name:"Whispering Woods",levels:[{letters:["T","R","E","E"],targetWords:["TREE","TEE"]},{letters:["L","E","A","F"],targetWords:["LEAF","ALE","ELF"]},{letters:["W","O","O","D"],targetWords:["WOOD"]},{letters:["B","I","R","D"],targetWords:["BIRD","RID"]},{letters:["D","E","E","R"],targetWords:["DEER","REED"]},{letters:["B","E","A","R"],targetWords:["BEAR","ARE","BAR"]},{letters:["L","A","K","E"],targetWords:["LAKE"]},{letters:["F","R","O","G"],targetWords:["FROG"]}]},{id:"ocean",name:"Deep Blue",levels:[{letters:["F","I","S","H"],targetWords:["FISH"]},{letters:["W","A","V","E"],targetWords:["WAVE","AVE"]},{letters:["B","O","A","T"],targetWords:["BOAT"]},{letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"]},{letters:["S","H","I","P"],targetWords:["SHIP","HIP","SIP"]},{letters:["S","E","A","L"],targetWords:["SEAL","SEA","ALE"]},{letters:["D","I","V","E"],targetWords:["DIVE"]},{letters:["S","W","I","M"],targetWords:["SWIM"]}]},{id:"space",name:"Cosmic Voyage",levels:[{letters:["S","T","A","R"],targetWords:["STAR","RAT","ART","TAR"]},{letters:["M","O","O","N"],targetWords:["MOON","MOO"]},{letters:["M","A","R","S"],targetWords:["MARS","ARM","RAM"]},{letters:["S","U","N","S"],targetWords:["SUNS","SUN"]},{letters:["V","O","I","D"],targetWords:["VOID"]},{letters:["N","O","V","A"],targetWords:["NOVA"]},{letters:["A","T","O","M"],targetWords:["ATOM"]},{letters:["G","L","O","W"],targetWords:["GLOW","LOW","OWL"]}]},{id:"desert",name:"Desert Heat",levels:[{letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"]},{letters:["D","U","N","E"],targetWords:["DUNE","DUE"]},{letters:["H","E","A","T"],targetWords:["HEAT","HAT","EAT"]},{letters:["C","A","M","E","L"],targetWords:["CAMEL","MEAL","MALE"]},{letters:["O","A","S","I","S"],targetWords:["OASIS"]},{letters:["P","A","L","M"],targetWords:["PALM","MAP","LAP"]},{letters:["D","U","S","T"],targetWords:["DUST"]},{letters:["W","A","N","D"],targetWords:["WAND"]}]},{id:"arctic",name:"Frozen Tundra",levels:[{letters:["I","C","E","S"],targetWords:["ICES","ICE"]},{letters:["S","N","O","W"],targetWords:["SNOW","NOW","OWN","WON"]},{letters:["C","O","L","D"],targetWords:["COLD","OLD","COD"]},{letters:["S","E","A","L"],targetWords:["SEAL","SEA","ALE"]},{letters:["P","O","L","E"],targetWords:["POLE"]},{letters:["B","E","A","R"],targetWords:["BEAR","ARE","BAR"]},{letters:["F","R","O","S","T"],targetWords:["FROST","SOFT","ROTS"]},{letters:["H","A","I","L"],targetWords:["HAIL"]}]},{id:"mountain",name:"Mystic Peaks",levels:[{letters:["P","E","A","K"],targetWords:["PEAK","APE","KEA"]},{letters:["H","I","K","E"],targetWords:["HIKE"]},{letters:["S","N","O","W"],targetWords:["SNOW","SOW","WON"]},{letters:["C","L","I","M","B"],targetWords:["CLIMB","LIMB"]},{letters:["M","O","S","S"],targetWords:["MOSS"]},{letters:["R","O","C","K"],targetWords:["ROCK"]},{letters:["C","O","L","D"],targetWords:["COLD","OLD"]},{letters:["V","I","E","W"],targetWords:["VIEW"]}]},{id:"jungle",name:"Rainforest",levels:[{letters:["A","P","E","S"],targetWords:["APES","APE","SEA"]},{letters:["V","I","N","E"],targetWords:["VINE","VIE"]},{letters:["R","A","I","N"],targetWords:["RAIN","RAN","AIR"]},{letters:["F","R","O","G"],targetWords:["FROG"]},{letters:["T","I","G","E","R"],targetWords:["TIGER","TIER","GRIT"]},{letters:["L","E","A","F"],targetWords:["LEAF","ALE"]},{letters:["W","I","L","D"],targetWords:["WILD"]},{letters:["F","E","L","L"],targetWords:["FELL"]}]},{id:"city",name:"Neon City",levels:[{letters:["C","A","R","S"],targetWords:["CARS","CAR","ARC"]},{letters:["B","I","K","E"],targetWords:["BIKE"]},{letters:["T","A","X","I"],targetWords:["TAXI"]},{letters:["R","O","A","D"],targetWords:["ROAD"]},{letters:["P","A","R","K"],targetWords:["PARK","RAPA"]},{letters:["W","A","L","K"],targetWords:["WALK"]},{letters:["S","T","O","P"],targetWords:["STOP","TOP","POT"]},{letters:["M","E","T","R","O"],targetWords:["METRO","MORE","ROME"]}]},{id:"meadow",name:"Blossom Meadow",levels:[{letters:["B","E","E","S"],targetWords:["BEES","BEE","SEE"]},{letters:["F","L","O","W"],targetWords:["FLOW","LOW","OWL"]},{letters:["L","I","L","Y"],targetWords:["LILY"]},{letters:["P","I","N","K"],targetWords:["PINK"]},{letters:["R","O","S","E"],targetWords:["ROSE","SORE"]},{letters:["L","A","W","N"],targetWords:["LAWN"]},{letters:["W","E","E","D"],targetWords:["WEED"]},{letters:["F","L","U","S","H"],targetWords:["FLUSH"]}]},{id:"volcano",name:"Volcanic Vent",levels:[{letters:["A","S","H"],targetWords:["ASH","HAS"]},{letters:["L","A","V","A"],targetWords:["LAVA"]},{letters:["F","I","R","E"],targetWords:["FIRE","IRE"]},{letters:["H","E","A","T"],targetWords:["HEAT","HAT","EAT"]},{letters:["L","A","V","A","S"],targetWords:["LAVAS","LAVA"]},{letters:["C","O","R","E"],targetWords:["CORE"]},{letters:["R","O","K","S"],targetWords:["ROKS"]},{letters:["F","L","A","M","E"],targetWords:["FLAME","MEAL","MALE","LAME"]}]},{id:"sky",name:"Sky Fortress",levels:[{letters:["A","I","R"],targetWords:["AIR"]},{letters:["B","I","R","D"],targetWords:["BIRD","RID"]},{letters:["W","I","N","D"],targetWords:["WIND","WIN","DIN"]},{letters:["C","L","O","U","D"],targetWords:["CLOUD","LOUD","COLD"]},{letters:["S","T","O","R","M"],targetWords:["STORM","MOST","SORT"]},{letters:["H","I","G","H"],targetWords:["HIGH"]},{letters:["B","L","U","E"],targetWords:["BLUE"]},{letters:["W","I","N","G"],targetWords:["WING"]}]},{id:"crystal",name:"Crystal Caverns",levels:[{letters:["G","E","M","S"],targetWords:["GEMS","GEM"]},{letters:["G","O","L","D"],targetWords:["GOLD","OLD","GOD"]},{letters:["M","I","N","E"],targetWords:["MINE"]},{letters:["O","R","E"],targetWords:["ORE","ROE"]},{letters:["C","A","V","E"],targetWords:["CAVE"]},{letters:["G","L","O","W","S"],targetWords:["GLOWS","GLOW","LOWS","SLOW"]},{letters:["P","R","I","Z","E"],targetWords:["PRIZE"]},{letters:["R","A","R","E"],targetWords:["RARE","REAR","ERA"]},{letters:["R","O","C","K","S"],targetWords:["ROCKS","ROCK","CORK"]}]},{id:"cyber",name:"Cyber City",levels:[{letters:["D","A","T","A"],targetWords:["DATA"]},{letters:["B","I","T","S"],targetWords:["BITS","BIT","ITS"]},{letters:["C","O","D","E"],targetWords:["CODE","DOC","DOE"]},{letters:["H","A","C","K"],targetWords:["HACK"]},{letters:["C","H","I","P"],targetWords:["CHIP","HIP","SIP","PIC"]},{letters:["B","Y","T","E"],targetWords:["BYTE","YEB"]},{letters:["S","C","A","N"],targetWords:["SCAN","CAN","SAN"]},{letters:["U","S","E","R"],targetWords:["USER","SUE","USE"]},{letters:["L","I","N","K"],targetWords:["LINK","NIL","KIN"]},{letters:["W","A","T","C","H"],targetWords:["WATCH","HAT","CAT"]}]},{id:"ruins",name:"Ancient Ruins",levels:[{letters:["O","L","D"],targetWords:["OLD"]},{letters:["D","U","S","T"],targetWords:["DUST"]},{letters:["R","O","C","K"],targetWords:["ROCK"]},{letters:["G","O","L","D"],targetWords:["GOLD","OLD","GOD"]},{letters:["L","O","S","T"],targetWords:["LOST","SLOT","LOT"]},{letters:["P","A","T","H"],targetWords:["PATH","HAT","PAT"]},{letters:["G","A","T","E"],targetWords:["GATE","ATE","TEA"]},{letters:["T","O","M","B"],targetWords:["TOMB"]},{letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"]},{letters:["S","T","O","N","E"],targetWords:["STONE","TONE","NET","TEN"]}]},{id:"steam",name:"Steam Haven",levels:[{letters:["G","E","A","R"],targetWords:["GEAR","ARE","AGE"]},{letters:["C","O","G","S"],targetWords:["COGS","COG"]},{letters:["I","R","O","N"],targetWords:["IRON","NOR","ION"]},{letters:["P","I","P","E"],targetWords:["PIPE"]},{letters:["R","U","S","T"],targetWords:["RUST","RUT"]},{letters:["V","A","L","V","E"],targetWords:["VALVE"]},{letters:["S","T","E","A","M"],targetWords:["STEAM","TEAM","MET","EAT"]},{letters:["B","E","L","T"],targetWords:["BELT","LET","BET"]},{letters:["W","H","E","E","L"],targetWords:["WHEEL","HEL","LEE"]},{letters:["S","M","O","K","E"],targetWords:["SMOKE","SOME"]}]},{id:"enchanted",name:"Enchanted Garden",levels:[{letters:["F","A","E"],targetWords:["FAE"]},{letters:["W","I","S","P"],targetWords:["WISP"]},{letters:["L","U","M","A"],targetWords:["LUMA"]},{letters:["M","A","G","I","C"],targetWords:["MAGIC","MIG","AIM"]},{letters:["P","E","T","A","L"],targetWords:["PETAL","PLATE","PALE","TEAL"]},{letters:["F","L","O","R","A"],targetWords:["FLORA","OAR","FOR"]},{letters:["V","I","N","E"],targetWords:["VINE","VIE"]},{letters:["W","A","N","D"],targetWords:["WAND"]},{letters:["G","L","O","W"],targetWords:["GLOW","LOW","OWL"]},{letters:["M","O","O","N"],targetWords:["MOON","MOO"]}]},{id:"ghost",name:"Ghostly Grotto",levels:[{letters:["B","O","O"],targetWords:["BOO"]},{letters:["F","O","G"],targetWords:["FOG"]},{letters:["D","A","R","K"],targetWords:["DARK","ARK","RAD"]},{letters:["G","H","O","S","T"],targetWords:["GHOST","HOS","GOT"]},{letters:["B","O","N","E"],targetWords:["BONE","ONE","BEN"]},{letters:["S","C","A","R","Y"],targetWords:["SCARY","SAY","RAY","CAR"]},{letters:["M","I","S","T"],targetWords:["MIST","ITS","SIT"]},{letters:["H","A","U","N","T"],targetWords:["HAUNT","AUT","TAN"]},{letters:["C","O","L","D"],targetWords:["COLD","OLD"]},{letters:["N","I","G","H","T"],targetWords:["NIGHT","GIN","HIT","TIN"]}]},{id:"sakura",name:"Sakura Peak",levels:[{letters:["Z","E","N"],targetWords:["ZEN"]},{letters:["S","U","N"],targetWords:["SUN"]},{letters:["M","O","U","N","T"],targetWords:["MOUNT","NUT","OUT","NOT"]},{letters:["P","E","A","K"],targetWords:["PEAK","KEA","APE"]},{letters:["L","E","A","F"],targetWords:["LEAF","ALE","ELF"]},{letters:["T","R","E","E"],targetWords:["TREE","TEE"]},{letters:["C","O","L","D"],targetWords:["COLD","OLD","COD"]},{letters:["V","I","E","W"],targetWords:["VIEW"]},{letters:["R","I","C","E"],targetWords:["RICE","ICE"]},{letters:["S","N","O","W"],targetWords:["SNOW","NOW","OWN","WON"]}]},{id:"mars",name:"Mars Colony",levels:[{letters:["R","E","D"],targetWords:["RED"]},{letters:["M","A","R","S"],targetWords:["MARS","ARM","RAM"]},{letters:["D","U","S","T"],targetWords:["DUST","RUT"]},{letters:["B","A","S","E"],targetWords:["BASE","SEA","ABS"]},{letters:["R","O","V","E","R"],targetWords:["ROVER","OVER","ROE"]},{letters:["R","O","C","K"],targetWords:["ROCK","CORK"]},{letters:["L","I","F","E"],targetWords:["LIFE","LIE","FIL"]},{letters:["V","O","I","D"],targetWords:["VOID"]},{letters:["O","X","Y","G","E","N"],targetWords:["OXYGEN","YEN","ONE","EGO"]},{letters:["S","P","R","I","N","T"],targetWords:["SPRINT","PIN","TIN","SIN"]}]},{id:"viking",name:"Viking Fjord",levels:[{letters:["S","E","A"],targetWords:["SEA"]},{letters:["I","C","E"],targetWords:["ICE"]},{letters:["A","X","E"],targetWords:["AXE"]},{letters:["S","H","I","P"],targetWords:["SHIP","HIP","SIP"]},{letters:["S","N","O","W"],targetWords:["SNOW","NOW","OWN"]},{letters:["F","J","O","R","D"],targetWords:["FJORD","FOR","ROD"]},{letters:["K","I","N","G"],targetWords:["KING","GIN","INK"]},{letters:["H","O","L","D"],targetWords:["HOLD","OLD","LOD"]},{letters:["W","A","R"],targetWords:["WAR","RAW"]},{letters:["N","O","R","S","E"],targetWords:["NORSE","ROSE","ROE","ONE","SON"]}]},{id:"pirate",name:"Pirate Cove",levels:[{letters:["B","A","Y"],targetWords:["BAY"]},{letters:["S","E","A"],targetWords:["SEA","AES"]},{letters:["G","O","L","D"],targetWords:["GOLD","OLD","GOD"]},{letters:["S","H","I","I","P"],targetWords:["SHIP","HIP","SIP"]},{letters:["C","R","E","W"],targetWords:["CREW","ARE","EWE"]},{letters:["M","A","P","S"],targetWords:["MAPS","MAP","ASP","PAM"]},{letters:["I","S","L","E"],targetWords:["ISLE","LIE","LES"]},{letters:["S","A","N","D"],targetWords:["SAND","SAD","AND"]},{letters:["C","A","V","E"],targetWords:["CAVE"]},{letters:["C","O","I","N"],targetWords:["COIN","ION","CON"]}]},{id:"candy",name:"Candy Kingdom",levels:[{letters:["G","U","M"],targetWords:["GUM"]},{letters:["P","O","P"],targetWords:["POP"]},{letters:["S","W","E","E","T"],targetWords:["SWEET","TEE","SET","WET"]},{letters:["L","O","L","L","Y"],targetWords:["LOLLY"]},{letters:["C","A","K","E"],targetWords:["CAKE"]},{letters:["M","I","L","K"],targetWords:["MILK"]},{letters:["P","I","N","K"],targetWords:["PINK"]},{letters:["S","O","F","T"],targetWords:["SOFT"]},{letters:["M","I","N","T"],targetWords:["MINT","TIN","NIT"]},{letters:["S","U","G","A","R"],targetWords:["SUGAR","RAG","GAS","SUE"]}]},{id:"underground",name:"The Deep",levels:[{letters:["D","I","G"],targetWords:["DIG"]},{letters:["D","I","R","T"],targetWords:["DIRT","RID"]},{letters:["M","U","D"],targetWords:["MUD"]},{letters:["C","A","V","E"],targetWords:["CAVE"]},{letters:["S","O","I","L"],targetWords:["SOIL","OIL"]},{letters:["M","I","N","E"],targetWords:["MINE"]},{letters:["R","O","C","K"],targetWords:["ROCK"]},{letters:["D","E","E","P"],targetWords:["DEEP"]},{letters:["W","O","R","M"],targetWords:["WORM"]},{letters:["D","A","R","K"],targetWords:["DARK"]}]},{id:"safari",name:"Wild Safari",levels:[{letters:["L","I","O","N"],targetWords:["LION","NIL","ION"]},{letters:["W","I","L","D"],targetWords:["WILD","LID"]},{letters:["P","L","A","I","N"],targetWords:["PLAIN","PLAN","NAP","PAN","PIN"]},{letters:["Z","E","B","R","A"],targetWords:["ZEBRA","ARE","BAR"]},{letters:["C","A","M","P"],targetWords:["CAMP","MAP","CAP"]},{letters:["B","I","R","D"],targetWords:["BIRD"]},{letters:["T","R","E","E"],targetWords:["TREE"]},{letters:["H","U","N","T"],targetWords:["HUNT"]},{letters:["R","O","A","R"],targetWords:["ROAR"]},{letters:["S","A","V","A","N","A"],targetWords:["SAVANA","VAN","SAN"]}]},{id:"circus",name:"Grand Circus",levels:[{letters:["F","U","N"],targetWords:["FUN"]},{letters:["T","E","N","T"],targetWords:["TENT","TEN","NET"]},{letters:["L","I","O","N"],targetWords:["LION"]},{letters:["B","A","L","L"],targetWords:["BALL","ALL"]},{letters:["S","H","O","W"],targetWords:["SHOW","WHO","SOW"]},{letters:["R","I","N","G"],targetWords:["RING"]},{letters:["H","O","O","P"],targetWords:["HOOP"]},{letters:["A","C","R","O"],targetWords:["ACRO","ARC","CAR"]},{letters:["J","U","M","P"],targetWords:["JUMP"]},{letters:["C","L","O","W","N"],targetWords:["CLOWN","LOW","OWN"]}]},{id:"medieval",name:"Knight's Tale",levels:[{letters:["S","W","O","R","D"],targetWords:["SWORD","WORD","ROD"]},{letters:["K","I","N","G"],targetWords:["KING"]},{letters:["C","A","S","T","L","E"],targetWords:["CASTLE","LAST","SALT","SALE"]},{letters:["F","O","R","T"],targetWords:["FORT"]},{letters:["H","E","R","O"],targetWords:["HERO","ROE"]},{letters:["L","A","N","D"],targetWords:["LAND","AND"]},{letters:["R","U","L","E"],targetWords:["RULE"]},{letters:["N","O","B","L","E"],targetWords:["NOBLE","ONE","BEL"]},{letters:["G","U","A","R","D"],targetWords:["GUARD","RAD","RAG"]},{letters:["K","N","I","G","H","T"],targetWords:["KNIGHT","THIN","NIGHT","TIN","GIN"]}]},{id:"future",name:"Neo Era",levels:[{letters:["T","E","C","H"],targetWords:["TECH"]},{letters:["B","O","T"],targetWords:["BOT"]},{letters:["W","O","R","L","D"],targetWords:["WORLD","ROD","OLD"]},{letters:["C","I","T","Y"],targetWords:["CITY"]},{letters:["S","P","A","C","E"],targetWords:["SPACE","ACE","SEA","APE"]},{letters:["S","T","A","R"],targetWords:["STAR"]},{letters:["G","L","O","W"],targetWords:["GLOW"]},{letters:["B","E","A","M"],targetWords:["BEAM"]},{letters:["V","I","E","W"],targetWords:["VIEW"]},{letters:["C","Y","B","E","R"],targetWords:["CYBER","BYE","BEER"]}]},{id:"library",name:"Ancient Library",levels:[{letters:["B","O","O","K"],targetWords:["BOOK"]},{letters:["R","E","A","D"],targetWords:["READ","ERA","RED"]},{letters:["P","A","P","E","R"],targetWords:["PAPER","APE","PER","ARE"]},{letters:["I","N","K"],targetWords:["INK"]},{letters:["P","E","N"],targetWords:["PEN"]},{letters:["S","H","E","L","F"],targetWords:["SHELF","SELF","SHE"]},{letters:["P","A","G","E"],targetWords:["PAGE","AGE"]},{letters:["T","A","L","E"],targetWords:["TALE","ATE","LET"]},{letters:["K","N","O","W"],targetWords:["KNOW","NOW","OWN"]},{letters:["L","E","A","R","N"],targetWords:["LEARN","NEAR","REAL","EAR","ERA"]}]},{id:"toybox",name:"Block Land",levels:[{letters:["B","L","O","C","K"],targetWords:["BLOCK"]},{letters:["T","O","Y"],targetWords:["TOY"]},{letters:["P","L","A","Y"],targetWords:["PLAY","PAY","LAP"]},{letters:["C","A","R"],targetWords:["CAR"]},{letters:["B","A","B","Y"],targetWords:["BABY","BAY"]},{letters:["D","O","L","L"],targetWords:["DOLL"]},{letters:["K","I","T","E"],targetWords:["KITE"]},{letters:["G","A","M","E"],targetWords:["GAME","AGE","GEM"]},{letters:["B","E","A","R"],targetWords:["BEAR"]},{letters:["F","L","A","G"],targetWords:["FLAG","LAG","GAL"]}]},{id:"farm",name:"Quiet Farm",levels:[{letters:["C","O","W"],targetWords:["COW"]},{letters:["P","I","G"],targetWords:["PIG"]},{letters:["H","E","N"],targetWords:["HEN"]},{letters:["D","O","G"],targetWords:["DOG"]},{letters:["C","A","T"],targetWords:["CAT"]},{letters:["C","O","R","N"],targetWords:["CORN","NOR","CON"]},{letters:["B","A","R","N"],targetWords:["BARN","BAN","RAN"]},{letters:["P","L","O","W"],targetWords:["PLOW","LOW","OWL"]},{letters:["S","E","E","D"],targetWords:["SEED","SEE"]},{letters:["F","I","E","L","D"],targetWords:["FIELD","FILE","DIE","ELD"]}]},{id:"bamboo",name:"Bamboo Forest",levels:[{letters:["Z","E","N"],targetWords:["ZEN"]},{letters:["P","A","N","D","A"],targetWords:["PANDA","AND","NAP","PAN"]},{letters:["L","E","A","F"],targetWords:["LEAF","ALE","ELF"]},{letters:["T","R","E","E"],targetWords:["TREE"]},{letters:["B","A","M","B","O","O"],targetWords:["BAMBOO","BOO","MOB"]},{letters:["G","L","O","W"],targetWords:["GLOW"]},{letters:["M","I","S","T"],targetWords:["MIST"]},{letters:["W","I","L","D"],targetWords:["WILD"]},{letters:["F","E","E","D"],targetWords:["FEED"]},{letters:["S","I","L","E","N","T"],targetWords:["SILENT","LINE","LENT","SENT","TEN"]}]},{id:"station",name:"Star Station",levels:[{letters:["S","T","A","R"],targetWords:["STAR","RAT","ART"]},{letters:["S","H","I","P"],targetWords:["SHIP","HIP","SIP"]},{letters:["M","O","O","N"],targetWords:["MOON","MOO"]},{letters:["V","O","I","D"],targetWords:["VOID"]},{letters:["A","T","O","M"],targetWords:["ATOM"]},{letters:["C","O","M","E","T"],targetWords:["COMET","MET","COT"]},{letters:["S","O","L","A","R"],targetWords:["SOLAR","OAR"]},{letters:["P","L","A","N","E","T"],targetWords:["PLANET","PLANE","PANT","TEN"]},{letters:["O","R","B","I","T"],targetWords:["ORBIT","BIT","ROT"]},{letters:["G","A","L","A","X","Y"],targetWords:["GALAXY","GAY","LAY"]}]}].map(t=>({id:t.id,name:t.name,themeColorVar:`--world-${t.id}-bg`,isGenerated:!1,levels:t.levels.map((r,n)=>({id:`${t.id}-${n+1}`,worldId:t.id,levelInWorld:n+1,displayName:`Level ${n+1}`,letters:r.letters,targetWords:r.targetWords,unlocked:!1,completed:!1}))}));return e.length>0&&e[0].levels.length>0&&(e[0].levels[0].unlocked=!0),e}function Ut(){var r;const s=localStorage.getItem("wordFinderDeluxeProgress");let e=Ft();const t={soundEffectsEnabled:!0,musicEnabled:!0,adsRemoved:!1,purchasedThemes:["default"],currentThemeId:"default"};if(s)try{const n=JSON.parse(s);if(u=n.coins||100,H=n.bonusWordsFound||[],h={...t,...n.settings||{}},n.gameRoadmap&&Array.isArray(n.gameRoadmap)){const o=n.gameRoadmap,a=new Map;o.forEach(d=>d.levels.forEach(l=>a.set(l.id,{unlocked:l.unlocked,completed:l.completed}))),e.forEach(d=>{d.levels.forEach(l=>{const m=a.get(l.id);m&&(l.unlocked=m.unlocked,l.completed=m.completed)})})}g=e}catch{g=e}else g=e,h=t;g.length>0&&g[0].levels.length>0&&(g.some(n=>n.levels.some(o=>o.unlocked))||(g[0].levels[0].unlocked=!0)),console.log("loadProgress complete. gameRoadmap length:",g.length),console.log("First world:",(r=g[0])==null?void 0:r.name),A(),qt(),Ve(h.currentThemeId)}const Yr=[{id:"coins_240",type:"currency",name:"Small Coin Pack",description:"A handful of coins",coins:240,price:.99,priceDisplay:"$0.99",image:"https://api.iconify.design/solar:coins-bold-duotone.svg?color=%23f39c12"},{id:"coins_720",type:"currency",name:"Medium Coin Pack",description:"A good stack of coins",coins:720,price:2.99,priceDisplay:"$2.99",image:"https://api.iconify.design/solar:banknote-2-bold-duotone.svg?color=%23f39c12"},{id:"coins_1340",type:"currency",name:"Large Coin Pack",bonus:"10% Bonus!",coins:1340,price:4.99,priceDisplay:"$4.99",image:"https://api.iconify.design/solar:safe-2-bold-duotone.svg?color=%23f39c12"},{id:"coins_2940",type:"currency",name:"Huge Coin Pack",bonus:"20% Bonus!",coins:2940,price:9.99,priceDisplay:"$9.99",image:"https://api.iconify.design/solar:treasure-chest-bold-duotone.svg?color=%23f39c12"},{id:"bundle_super",type:"bundle",name:"Super Bundle",items:[{name:"Coins",quantity:1340},{name:"Hints",quantity:2},{name:"Shuffles",quantity:2}],price:5.99,priceDisplay:"$5.99",image:"https://api.iconify.design/fluent-emoji-flat:wrapped-gift.svg"},{id:"bundle_mega",type:"bundle",name:"Mega Bundle",items:[{name:"Coins",quantity:2940},{name:"Hints",quantity:5},{name:"Shuffles",quantity:5}],price:12.99,priceDisplay:"$12.99",image:"https://api.iconify.design/fluent-emoji-flat:party-popper.svg"},{id:"remove_ads",type:"special",name:"Remove Ads",description:"Enjoy an ad-free experience!",price:5.99,priceDisplay:"$5.99",image:"https://api.iconify.design/solar:videocamera-record-bold-duotone.svg?color=%23e74c3c&rotate=15deg&flip=horizontal",action:()=>{h.adsRemoved=!0,B(),i("Ads Removed! Enjoy the game.",!0)}},{id:"theme_dark",type:"theme",name:"Midnight Mode",description:"Sleek dark theme",price:1.99,priceDisplay:"$1.99",image:"https://api.iconify.design/solar:moon-bold-duotone.svg?color=%239b59b6",themeId:"dark"},{id:"theme_nature",type:"theme",name:"Forest Vibes",description:"Relaxing green theme",price:1.99,priceDisplay:"$1.99",image:"https://api.iconify.design/solar:leaf-bold-duotone.svg?color=%232ecc71",themeId:"nature"},{id:"theme_ocean",type:"theme",name:"Deep Ocean",description:"Calming blue theme",price:1.99,priceDisplay:"$1.99",image:"https://api.iconify.design/solar:waterdrops-bold-duotone.svg?color=%233498db",themeId:"ocean"}];function qe(){it.innerHTML="",lt.innerHTML="",ct.innerHTML="",ut.innerHTML="";const s=document.createElement("div");s.className="shop-item-grid",it.appendChild(s);const e=document.createElement("div");e.className="shop-item-grid",lt.appendChild(e);const t=document.createElement("div");t.className="shop-item-grid",ut.appendChild(t);const r=document.createElement("div");r.className="shop-item-grid",ct.appendChild(r),Yr.forEach(n=>{const o=document.createElement("div");o.className="shop-item",o.innerHTML=`
            <div class="shop-item-image-container">
                <img src="${n.image}" alt="${n.name}" class="shop-item-image">
            </div>
            <div class="shop-item-details">
                <h4 class="shop-item-name">${n.name}</h4>
                ${n.description?`<p class="shop-item-description">${n.description}</p>`:""}
                ${n.bonus?`<p class="shop-item-bonus">${n.bonus}</p>`:""}
                ${n.items?`<div class="shop-item-bundle-contents">${n.items.map(d=>`<span>${d.quantity} ${d.name}</span>`).join("")}</div>`:""}
            </div>
            <div class="shop-item-action">
                ${n.type==="theme"&&h.purchasedThemes.includes(n.themeId)?h.currentThemeId===n.themeId?'<button class="shop-price-button" disabled>Active</button>':`<button class="shop-price-button apply-theme-btn" data-theme-id="${n.themeId}">Apply</button>`:`<button class="shop-price-button" data-item-id="${n.id}">${n.priceDisplay}</button>`}
            </div>
        `;const a=o.querySelector(".shop-price-button");a.classList.contains("apply-theme-btn")?a.addEventListener("click",()=>{Ve(n.themeId),B(),qe()}):a.disabled||a.addEventListener("click",()=>zr(n)),n.type==="currency"?s.appendChild(o):n.type==="bundle"?e.appendChild(o):n.type==="theme"?r.appendChild(o):n.type==="special"&&t.appendChild(o)})}function zr(s){s.coins&&(u+=s.coins,i(`${s.coins} coins added!`,!0,!1,2e3)),s.items&&(s.items.forEach(e=>{e.name.toLowerCase()==="coins"&&e.quantity&&(u+=e.quantity)}),i(`${s.name} purchased! Items added.`,!0,!1,2e3)),s.action&&s.action(),s.type==="theme"&&s.themeId&&(h.purchasedThemes.includes(s.themeId)||(h.purchasedThemes.push(s.themeId),i(`${s.name} Unlocked!`,!0),Ve(s.themeId))),P(),B(),qe()}function Ve(s){h.currentThemeId=s;const e=document.documentElement;s==="default"?(e.style.setProperty("--background-gradient-start","#72c2ff"),e.style.setProperty("--background-gradient-end","#3a7bd5"),e.style.setProperty("--letter-button-bg","#f39c12"),e.style.setProperty("--letter-button-border","#e67e22"),document.body.style.backgroundImage="url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1200&q=80')"):s==="dark"?(e.style.setProperty("--background-gradient-start","#2c3e50"),e.style.setProperty("--background-gradient-end","#000000"),e.style.setProperty("--letter-button-bg","#8e44ad"),e.style.setProperty("--letter-button-border","#5b2c6f"),document.body.style.backgroundImage="url('https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?auto=format&fit=crop&w=1200&q=80')"):s==="nature"?(e.style.setProperty("--background-gradient-start","#2ecc71"),e.style.setProperty("--background-gradient-end","#27ae60"),e.style.setProperty("--letter-button-bg","#d35400"),e.style.setProperty("--letter-button-border","#a04000"),document.body.style.backgroundImage="url('https://images.unsplash.com/photo-1448375240586-dfd8f3793371?auto=format&fit=crop&w=1200&q=80')"):s==="ocean"&&(e.style.setProperty("--background-gradient-start","#3498db"),e.style.setProperty("--background-gradient-end","#2980b9"),e.style.setProperty("--letter-button-bg","#e74c3c"),e.style.setProperty("--letter-button-border","#c0392b"),document.body.style.backgroundImage="url('https://images.unsplash.com/photo-1505118380757-91f5f5632de0?auto=format&fit=crop&w=1200&q=80')")}function Lt(){qe(),P(),ee.classList.remove("hidden");const s=me.querySelector(".shop-tab-button");s&&Kt(s.dataset.tab||"currency")}function Wt(){ee.classList.add("hidden")}function Kt(s){var e,t;me.querySelectorAll(".shop-tab-button").forEach(r=>r.classList.remove("active")),document.querySelectorAll(".shop-tab-content").forEach(r=>r.classList.remove("active")),(e=me.querySelector(`.shop-tab-button[data-tab="${s}"]`))==null||e.classList.add("active"),(t=document.getElementById(`shop-tab-${s}`))==null||t.classList.add("active")}function de(){$t(),U.classList.remove("hidden")}function ke(){U.classList.add("hidden")}function $t(){Ge.checked=h.soundEffectsEnabled,xe.checked=h.musicEnabled}function qt(){$t(),k.setEnabled(h.soundEffectsEnabled)}function St(){h.soundEffectsEnabled=Ge.checked,h.musicEnabled=xe.checked,k.setEnabled(h.soundEffectsEnabled),console.log("Settings saved:",h),B(),qt()}function _r(){confirm("Are you sure you want to reset all your progress? This cannot be undone!")&&(localStorage.removeItem("wordFinderDeluxeProgress"),u=100,H=[],g=Ft(),h={soundEffectsEnabled:!0,musicEnabled:!0,adsRemoved:!1,purchasedThemes:["default"],currentThemeId:"default"},F=0,Ut(),ge(),ke(),i("Progress has been reset.",!0,!1,2500))}function Xr(){ss.forEach(t=>{t.addEventListener("click",()=>{var n;const r=t.getAttribute("data-game");r==="wordslide"?ge():r==="wordle"?fr():r==="spelling-bee"?Wr():r==="connections"?yr():r==="strands"?br():r==="letter-boxed"?Tr():r==="sudoku"?Nr():r==="tiles"?Dr():r==="pips"?kr():i(`${(n=t.querySelector(".game-title"))==null?void 0:n.textContent} - Coming Soon!`,!1,!1,2e3)})}),Xs.addEventListener("click",Fr),js.addEventListener("click",Ur),Zs.addEventListener("click",Kr),Js.addEventListener("click",$r),Ys.addEventListener("click",ge),zs.addEventListener("click",de),tr.addEventListener("click",pt),nr.addEventListener("click",Lt),ls.addEventListener("click",p),cs.addEventListener("click",de),ms.addEventListener("click",p),gs.addEventListener("click",Sr),Ss.addEventListener("click",Ar),Es.addEventListener("click",mt),Ls.addEventListener("click",gt),Ws.addEventListener("click",ht),ys.addEventListener("click",p),vs.addEventListener("click",Or),Cs.addEventListener("click",vr),Ot.addEventListener("click",Cr),Is.addEventListener("click",()=>i("Select 4 related words and press Submit!",!0)),bs.addEventListener("click",p),Bs.addEventListener("click",()=>{u>=50?(u-=50,A(),i("Hint: Focus on the theme!",!0)):i("Not enough coins! (50 required)",!1)}),Rs.addEventListener("click",p),ws.addEventListener("click",Rr),Ds.addEventListener("click",Br),ks.addEventListener("click",()=>i("Connect letters on different sides to make words! Use all letters to win.",!0)),Ps.addEventListener("click",p),Hs.addEventListener("click",de),Fs.addEventListener("click",p),qs.addEventListener("click",p),xs.querySelectorAll(".numpad-btn").forEach(t=>{t.addEventListener("click",()=>{const r=parseInt(t.getAttribute("data-val"));wr(r)})}),Re.addEventListener("click",()=>ve(Re.querySelector(".cell-content").textContent)),Ne.forEach(t=>{t.addEventListener("click",()=>ve(t.querySelector(".cell-content").textContent))}),yt.querySelectorAll(".key-button").forEach(t=>{t.addEventListener("click",()=>{const r=t.getAttribute("data-key");r&&ae(r)})}),document.addEventListener("keydown",t=>{G.classList.contains("hidden")?$.classList.contains("hidden")||(t.key==="Enter"?ht():t.key==="Backspace"?mt():t.key===" "?gt():t.key.length===1&&/[a-zA-Z]/.test(t.key)&&ve(t.key)):t.key==="Enter"?ae("ENTER"):t.key==="Backspace"?ae("BACKSPACE"):t.key.length===1&&/[a-zA-Z]/.test(t.key)&&ae(t.key.toUpperCase())}),rs.addEventListener("click",()=>{i("Welcome to the Roadmap!",!0,!1,1500)}),ns.addEventListener("click",de),os.addEventListener("click",pt),is.addEventListener("click",Lt),y.addEventListener("click",()=>{const t=C.timeoutId;t&&clearTimeout(t),C.classList.add("hidden"),y.nextAction&&(y.nextAction(),y.nextAction=null)}),ar.addEventListener("click",Et),X.addEventListener("click",t=>{t.target===X&&Et()}),dr.addEventListener("click",Vr),ir.addEventListener("click",Wt),ee.addEventListener("click",t=>{t.target===ee&&Wt()}),me.querySelectorAll(".shop-tab-button").forEach(t=>{t.addEventListener("click",r=>Kt(r.currentTarget.dataset.tab))}),cr.addEventListener("click",ke),U.addEventListener("click",t=>{t.target===U&&ke()}),Ge.addEventListener("change",St),xe.addEventListener("change",St),ur.addEventListener("click",_r),window.addEventListener("resize",()=>{W.classList.contains("hidden")||(Ue(),Se(),Ae())})}function jr(){try{console.log("Main function starting..."),console.log("levelSelectionScreen:",S),console.log("settingsModal:",U),U.classList.add("hidden"),X.classList.add("hidden"),ee.classList.add("hidden"),console.log("Modals hidden"),console.log("Loading progress..."),Ut(),console.log("Attaching event listeners..."),Xr(),console.log("Showing roadmap screen..."),p(),localStorage.getItem("bonusTipShown")==="true"&&Pe.classList.add("hidden"),console.log("Main function complete!"),console.log("levelSelectionScreen classes:",S.className),console.log("settingsModal classes:",U.className),console.log("gameRoadmap length:",g.length);const s=document.createElement("div");s.style.cssText="position:fixed;top:10px;right:10px;background:rgba(0,0,0,0.8);color:lime;padding:10px;z-index:9999;font-family:monospace;font-size:12px;",s.innerHTML=`
            <div>Roadmap Length: ${g.length}</div>
            <div>Level Screen Hidden: ${S.classList.contains("hidden")}</div>
            <div>Settings Hidden: ${U.classList.contains("hidden")}</div>
        `,document.body.appendChild(s)}catch(s){console.error("Error in main():",s),document.body.innerHTML=`<div style="color: white; padding: 2rem; text-align: center;">
            <h1>Error Loading Game</h1>
            <p>${s}</p>
            <p>Please check the console for details.</p>
        </div>`}}document.addEventListener("DOMContentLoaded",jr);
